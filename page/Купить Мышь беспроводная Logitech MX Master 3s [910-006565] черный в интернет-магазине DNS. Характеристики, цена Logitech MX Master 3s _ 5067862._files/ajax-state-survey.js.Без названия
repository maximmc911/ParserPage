(()=>{"use strict";var e={96614:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Dom_addClasses=void 0,t.Dom_addClasses=function(e,t){t.forEach((function(t){e.classList.add(t)}))}},54958:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Uuid_generateV4=void 0,t.Uuid_generateV4=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]="-",e[13]="-",e[18]="-",e[23]="-",e.join("")}},90804:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AjaxStateProcessorAbstract=void 0;var r=n(96614),i=function(){function e(){var e=this;this._waitingElements=[],this.addWaitingState=function(t){(0,r.Dom_addClasses)(t,["ajs-placeholder","ajs-placeholder_waiting"]),e._waitingElements.push(t)}}return Object.defineProperty(e.prototype,"service",{set:function(e){this._service=e},enumerable:!1,configurable:!0}),e.prototype.needGetStateAfterBuild=function(e){return!0},e.prototype.refreshOnlyAfterUserActivity=function(e){return!1},e.prototype.afterRefresh=function(e){this._waitingElements.forEach((function(e){setTimeout((function(){e.classList.remove("ajs-placeholder_waiting")})),setTimeout((function(){e.classList.remove("ajs-placeholder")}),1e3)})),this._waitingElements=[]},e}();t.AjaxStateProcessorAbstract=i},38141:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DisabledSurveyStorage=void 0;var n=function(){function e(){this.STORAGE_KEY="_usd_"}return e.prototype.exists=function(e){return-1!==this.getAll().indexOf(e)},e.prototype.add=function(e){if(!this.exists(e)){var t=this.getAll();t.push(e),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}},e.prototype.getAll=function(){return JSON.parse(localStorage.getItem(this.STORAGE_KEY)||"[]")},e}();t.DisabledSurveyStorage=n},88154:function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SurveyProcessor=void 0;var s=o(n(21998)),u=n(90804),a=n(38141),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._configs=new Map,t._disabledStorage=new a.DisabledSurveyStorage,t}return i(t,e),t.prototype.build=function(e){var t=this,n=e.data;this._configs.set(e.id,n);var r={locationId:n.locationId,disableOnInteractive:n.disableOnInteractive};if(n.showTimeout){var i=JSON.parse(JSON.stringify(e));return i.data.showTimeout=0,setTimeout((function(){t._service.build(i)}),1e3*n.showTimeout),null}return r},t.prototype.needGetStateAfterBuild=function(e){return!e.data.showTimeout},t.prototype.refresh=function(e,t){this.render(e)},t.prototype.afterRefresh=function(t){e.prototype.afterRefresh.call(this,t),window.dispatchLazyLoadUpdateEvent()},t.prototype.render=function(e){var t=this,n=e.data,r=document.getElementById(e.id);if(null!==r){if(n){var i=this._configs.get(e.id);if(i.disableOnInteractive&&(n.disabled&&this._disabledStorage.add(n.survey.id),this._disabledStorage.exists(n.survey.id)))return void r.remove();var o=new s.default(i.style,i.locationId,n.survey,n.url,(function(){i.disableOnInteractive&&t._disabledStorage.add(n.survey.id)}),i.commerceTarget);this.addWaitingState(o.element),r.parentElement.insertBefore(o.element,r)}r.remove()}},t}(u.AjaxStateProcessorAbstract);t.SurveyProcessor=c},40647:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{a(r.next(e))}catch(e){o(e)}}function u(e){try{a(r.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}a((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(65558),s=n(74666),u="data-container-survey-modal",a=function(e){var t=document.createElement("div");t.setAttribute(u,e),document.body.append(t)},c=function(e){return"[".concat(u,'="').concat(e,'"]')};t.default=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r,u,d,l,E;return i(this,(function(i){switch(i.label){case 0:return[4,(0,o.getConfig)()];case 1:return n=i.sent().domainCode,r="https://a.dns-shop.".concat(n,"/survey-modal"),u="/survey-modal.umd.js",d="survey-modal",[4,(0,s.getExternalStyles)("".concat(r,"/").concat("/style.css"))];case 2:return i.sent(),[4,(0,s.getExternalScript)("".concat(r,"/").concat(u),d)];case 3:return l=i.sent(),a(e),E=c(e),l({surveyTypeId:e,surveyParamId:t},E),[2]}}))}))}},54540:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SurveyLocationEnum=void 0,function(e){e.PRODUCT="f5ffcdc0-4f90-4fe4-8155-4a6921dc2c03",e.CATALOG="8b311728-37b0-4561-a8d1-b2b84d3d3a27",e.SEARCH="f45b19d9-c497-4b1d-9200-289bcd6534fe",e.ORDER="e45b19d9-c497-4b1d-9200-289bcd6534f1",e.COMPARE="4948c576-4aaf-461a-814c-6ee70d87d5b8",e.CHAT_BOT="4538383e-7052-4084-9ab8-1c15ab0fc0bb",e.SERVICE_CENTER="15b9cc57-22dd-4062-9efd-659bccf6e436"}(t.SurveyLocationEnum||(t.SurveyLocationEnum={}))},82274:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SurveyStyleEnum=void 0,function(e){e.TILE="tile",e.LINE="line",e.FUTURE_TILE="future-tile",e.FILTER="filter",e.EXPRESS_MODAL="express-modal"}(t.SurveyStyleEnum||(t.SurveyStyleEnum={}))},21998:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(80138)),o=n(96614),s=n(54958),u=n(91757),a=r(n(40647)),c=n(54540),d=n(82274),l=function(){function e(e,t,n,r,u,l){var E=this;this._style=e,this._locationId=t,this._survey=n,this._submitUrl=r,this._onInteractive=u,this._commerceTarget=l,this._userSurveyId=null,this._init=function(){if(E._userSurveyId=(0,s.Uuid_generateV4)(),E._element=document.createElement("div"),E._isMobile=!1===(new i.default).isDesktop,E.setDesktopStyle(),(0,o.Dom_addClasses)(E._element,["survey-button-widget",E._surveyStyleClass]),!1===E._isMobile||c.SurveyLocationEnum.SERVICE_CENTER===E._locationId||d.SurveyStyleEnum.TILE===E._style){var e=E.generateWidgetContent();E._element.appendChild(e);var t=E.generateButton();E._element.appendChild(t),t.addEventListener("click",(function(e){e.preventDefault(),d.SurveyStyleEnum.EXPRESS_MODAL===E._style&&(E._element.style.display="none"),E.showModal()})),E._commerceTarget&&t.setAttribute("data-commerce-target",E._commerceTarget)}if(d.SurveyStyleEnum.EXPRESS_MODAL===E._style){var n=document.createElement("span");(0,o.Dom_addClasses)(n,["survey-button-widget__icon-close"]),E._element.appendChild(n),n.addEventListener("click",(function(){E._element.style.display="none",E._onInteractive()})),setTimeout((function(){E._element.classList.add(E._style+"_visible")}),300)}},this.showModal=function(){(0,a.default)(E._locationId,E._userSurveyId)},this._init()}return Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),e.prototype.generateWidgetContent=function(){var e=document.createElement("div");e.classList.add("survey-button-widget__text-wrapper");var t=document.createElement("span");t.textContent="Сделаем сайт лучше!",(0,o.Dom_addClasses)(t,["survey-button-widget__title",this._surveyStyleClass+"__title"]),e.appendChild(t);var n=document.createElement("span");return n.textContent=this._survey.description,(0,o.Dom_addClasses)(n,["survey-button-widget__description",this._surveyStyleClass+"__description"]),e.appendChild(n),e},e.prototype.generateButton=function(){if(!1===this._isMobile||c.SurveyLocationEnum.SERVICE_CENTER===this._locationId||d.SurveyStyleEnum.TILE===this._style){var e=window.button.create("Пройти опрос",[d.SurveyStyleEnum.EXPRESS_MODAL,d.SurveyStyleEnum.TILE].includes(this._style)?u.ButtonColorModifiers.BRAND:u.ButtonColorModifiers.WHITE);return(0,o.Dom_addClasses)(e.element,["survey-button-widget__survey-btn",this._surveyStyleClass+"__survey-btn"]),e.element}var t=document.createElement("div");return t.innerText="Опрос. Сделаем сайт лучше",t.classList.add("survey-button-widget__survey-btn-mobile"),t},e.prototype.setDesktopStyle=function(){this._surveyStyleClass="survey-button-widget_"+this._style},e}();t.default=l},91757:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonColorModifiers=void 0,function(e){e.BLUE="_blue",e.BLUE_BORDERED="_blue-bordered",e.BRAND="_brand",e.BRAND_BORDERED="_brand-bordered",e.GREY="_grey",e.RED="_red",e.WHITE="_white"}(t.ButtonColorModifiers||(t.ButtonColorModifiers={}))},42601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenTypes=void 0,function(e){e[e.SCREEN_NOT_SUPPORTED=0]="SCREEN_NOT_SUPPORTED",e[e.SCREEN_WIDE=1]="SCREEN_WIDE",e[e.SCREEN_DESKTOP=2]="SCREEN_DESKTOP",e[e.SCREEN_TABLET=3]="SCREEN_TABLET",e[e.SCREEN_MOBILE=4]="SCREEN_MOBILE"}(t.ScreenTypes||(t.ScreenTypes={}))},80138:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(42601),i=function(){function e(){var e=this;this.SCREEN_MOBILE_MIN_WIDTH=320,this.SCREEN_MOBILE_MAX_WIDTH=767,this.SCREEN_TABLET_MAX_WIDTH=991,this.SCREEN_DESKTOP_MAX_WIDTH=1199,this.EVENT_RESIZE="resize",this.EVENT_OPTIMIZED_RESIZE="optimizedResize",this.EVENT_SCREEN_TYPE_CHANGED="screenTypeChanged",this._currentScreenType=null,this.optimizeResizeEvent=function(t){t=t||window;var n=!1;t.addEventListener(e.EVENT_RESIZE,(function(){n||(n=!0,requestAnimationFrame((function(){t.dispatchEvent(new CustomEvent(e.EVENT_OPTIMIZED_RESIZE));var r=e.calcCurrent();e._currentScreenType!==r&&(e._currentScreenType=r,t.dispatchEvent(new CustomEvent(e.EVENT_SCREEN_TYPE_CHANGED))),n=!1})))}))}}return Object.defineProperty(e.prototype,"current",{get:function(){return null===this._currentScreenType&&(this._currentScreenType=this.calcCurrent()),this._currentScreenType},enumerable:!1,configurable:!0}),e.prototype.calcCurrent=function(){var e=document.querySelector('meta[name="screen-type-helper"]');if(null!==e)return parseInt(e.content,10);var t=window.matchMedia;if(t){if(t("(min-width: "+(this.SCREEN_DESKTOP_MAX_WIDTH+1)+"px)").matches)return r.ScreenTypes.SCREEN_WIDE;if(t("(min-width: "+(this.SCREEN_TABLET_MAX_WIDTH+1)+"px)").matches)return r.ScreenTypes.SCREEN_DESKTOP;if(t("(min-width: "+(this.SCREEN_MOBILE_MAX_WIDTH+1)+"px)").matches)return r.ScreenTypes.SCREEN_TABLET;if(t("(min-width: "+this.SCREEN_MOBILE_MIN_WIDTH+"px)").matches)return r.ScreenTypes.SCREEN_MOBILE}else{var n=window.innerWidth;if(n>this.SCREEN_DESKTOP_MAX_WIDTH)return r.ScreenTypes.SCREEN_WIDE;if(n>this.SCREEN_TABLET_MAX_WIDTH)return r.ScreenTypes.SCREEN_DESKTOP;if(n>this.SCREEN_MOBILE_MAX_WIDTH)return r.ScreenTypes.SCREEN_TABLET;if(n>=this.SCREEN_MOBILE_MIN_WIDTH)return r.ScreenTypes.SCREEN_MOBILE}return r.ScreenTypes.SCREEN_NOT_SUPPORTED},e.prototype.check=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){if(r[n]===this.current)return!0}return!1},Object.defineProperty(e.prototype,"isDesktop",{get:function(){return this.check(r.ScreenTypes.SCREEN_DESKTOP,r.ScreenTypes.SCREEN_WIDE)},enumerable:!1,configurable:!0}),e.prototype.addResizeListener=function(e){this.optimizeResizeEvent(window),window.addEventListener(this.EVENT_OPTIMIZED_RESIZE,e)},e.prototype.removeResizeListener=function(e){window.removeEventListener(this.EVENT_OPTIMIZED_RESIZE,e)},e.prototype.addChangeScreenTypeListener=function(e){this.optimizeResizeEvent(window),window.addEventListener(this.EVENT_SCREEN_TYPE_CHANGED,e)},e.prototype.removeChangeScreenTypeListener=function(e){window.removeEventListener(this.EVENT_SCREEN_TYPE_CHANGED,e)},e}();t.default=i},65558:(e,t,n)=>{n.r(t),n.d(t,{getConfig:()=>o,setConfig:()=>i});const r="env-config:request",i=e=>{window.getConfigQueue||(window.getConfigQueue=[]),window.getConfigQueue.forEach((t=>t(e))),window.addEventListener(r,(()=>{var t;null===(t=window.getConfigQueue)||void 0===t||t.forEach((t=>t(e)))}))},o=()=>new Promise(((e,t)=>{window.getConfigQueue||(window.getConfigQueue=[]),window.getConfigQueue.push(e),dispatchEvent(new CustomEvent(r))}))},74666:(e,t,n)=>{function r(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{a(r.next(e))}catch(e){o(e)}}function u(e){try{a(r.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}a((r=r.apply(e,t||[])).next())}))}function i(e,t){return r(this,void 0,void 0,(function*(){return window[t]?window[t]:yield new Promise(((n,r)=>{const i=document.createElement("script");i.async=!0,i.type="text/javascript",i.addEventListener("load",(e=>{n(window[t])})),i.addEventListener("error",(()=>{r(new Error(`Error loading ${e}`))})),i.src=e,document.head.appendChild(i)}))}))}function o(e){return r(this,void 0,void 0,(function*(){return yield new Promise(((t,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.addEventListener("load",(e=>{t(!0)})),r.addEventListener("error",(()=>{n(new Error(`Error loading ${e}`))})),r.href=e,document.head.appendChild(r)}))}))}n.r(t),n.d(t,{getExternalScript:()=>i,getExternalStyles:()=>o}),"function"==typeof SuppressedError&&SuppressedError}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r;r=n(88154),window.AjaxState.processors.register("survey",new r.SurveyProcessor)})();