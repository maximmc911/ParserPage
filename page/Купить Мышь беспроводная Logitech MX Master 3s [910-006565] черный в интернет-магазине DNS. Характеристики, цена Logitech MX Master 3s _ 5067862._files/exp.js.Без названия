"use strict";(()=>{(function(l,b){let T=l.ymab;if("ymab"in l&&typeof T=="function"&&T.inited)return;let H=l.requestAnimationFrame,v=l.location,Y=l.history,Te=10,Ie=5e3,B=100,Se=10*1e3/B,G={},x={},W={},E={enableRedir:!0,enableVisual:!0,enableHTML:!0,enableJS:!1,enableWatch:!1,enableAdv:!0,enableIntegrations:!0,storeRedirParam:!0,removeAbRedirParam:!1,metrikaTimeout:100,cookieDomain:void 0,nonce:void 0,storeReferer:!1,enableSendYmUid:!0,enableSetYmUid:!1},Re={enableRedir:["boolean"],enableVisual:["boolean"],enableHTML:["boolean"],enableJS:["boolean"],enableWatch:["boolean"],enableAdv:["boolean"],enableIntegrations:["boolean"],cookieDomain:["string"],metrikaTimeout:["number"],storeRedirParam:["boolean","string"],removeAbRedirParam:["boolean"],storeReferer:["boolean"],nonce:["string"],enableSendYmUid:["boolean"],enableSetYmUid:["boolean"]},R={},_e="https://uaas.yandex.ru/v1/exps/",K="_ymab_param",M="_ym_uid",U=60,ke=U*60*24*365,Ae="wSIKtymTfos,",X=/\/$/,I;function L({name:n,value:r,domain:e,ttl:t=ke}){let i=`${n}=${r}; path=/;`;if(v.protocol==="https:"&&(i+="SameSite=None; Secure;"),e){let s=e[0]==="."?1:0;v.hostname.indexOf(e.slice(s))>=0?i+=`domain=${e};`:console.error(`cookieDomain=${e} is not valid for current hostname`)}b.cookie=i+`max-age=${t};`}function D(n){let r=new RegExp(`(?:^|; )${n}=([^;]*)`,"g"),e,t;for(;(t=r.exec(b.cookie))!==null;)e=t[1];return e}function P(n,r){let e=n.indexOf(r);if(e===-1)return[];let t=n.slice(0,e).trim(),i=n.slice(e+1);return[t,i]}function Ee(n){return n.t==="integration"}function Pe(n,r){return n.reduce((e,t)=>{let{t:i,n:s,v:a}=t;if(r.enableIntegrations&&Ee(t))return e.integrations.push(t),e;if(i==="visual"&&r.enableVisual){let[u,c]=P(a,"|");if(!u||c===void 0)return e;switch(s){case"css-insert":return e.cssInsert.unshift({selector:u,value:c}),e;case"text-insert":return e.textInsert.unshift({selector:u,value:c}),e;case"href-insert":return e.hrefInsert.unshift({selector:u,value:c}),e;case"image-insert":return e.imageSrcInsert.unshift({selector:u,value:c}),e;case"html-replace":if(!r.enableHTML)break;return e.htmlReplace.unshift({selector:u,value:c}),e;case"js-insert":if(!r.enableJS)break;return e.jsInsert.unshift({selector:u,value:c}),e}}if(i==="redir"&&r.enableRedir)return e.redirect.push(a),e;if(i==="adv"&&r.enableAdv)return e.adv.push({type:s,value:a}),e;if(i==="advReplaceId"&&r.enableAdv)return e.advReplaceId[s]=a,e;let o=e.flags[s];return o||(e.flags[s]=o=[]),o.push(a),e},{cssInsert:[],textInsert:[],redirect:[],hrefInsert:[],imageSrcInsert:[],htmlReplace:[],jsInsert:[],adv:[],advReplaceId:{},flags:{},integrations:[]})}function xe(n){return n?b.querySelector(n):void 0}function Me(n,r){let e=[];for(let{selector:t,value:i}of n){let s=i.trim();e.push(`${t} {${s}}`)}try{let t=b.createElement("style");t.nonce=r,t.setAttribute("type","text/css"),t.textContent=e.join(`
`).replace(/;/g," !important;"),b.body.appendChild(t)}catch(t){}}function Ue(n,r){try{let t=r.trim().split(";");for(let i of t)if(i){let[s,a]=P(i,":");s&&a!==void 0&&(n.style[s]=a)}}catch(e){}}function Le(n,r,e,t){try{let i=b.createElement("script");i.nonce=n,i.setAttribute("type","text/javascript"),i.innerHTML=`(function(element){${e}})(document.querySelector('${t}'));`,b.body.appendChild(i)}catch(i){}}let z={};function w(n,r){if(z[n])return;let e=b.createElement("script");e.async=!0,e.type="text/javascript",e.src=n,r&&e.addEventListener("load",r);let t=b.head;t.insertBefore(e,t.firstChild),z[n]=!0}let Fe=new Set(["js-insert","css-insert"]),Z={cache:{},getItem(n,r){let e=this.cache[n];e||(e=this.cache[n]={});let t=e[r.selector];t||(t=e[r.selector]={});let i=t[r.value];return i||(i=t[r.value]=new Set),i},has(n,r,e){return Fe.has(n)&&this.getItem(n,r).has(e)},add(n,r,e){return this.getItem(n,r).add(e)}};function Q(n,r,e,t){let{selector:i,value:s}=e;if(!i||s===void 0)return;let a=xe(i);if(!a){t>0&&setTimeout(()=>Q(n,r,e,t-1),B);return}Z.has(n,e,a)||(r(a,s,i),Z.add(n,e,a))}function _(n,r,e,t){e.forEach(i=>Q(n,r,i,t?Se:0))}class Ve{constructor(){this.callbacks={};this.MAX_DEPTH=1e3;this.depth=0;this.started=!1;this.item=new l.MutationObserver(()=>{if(this.depth++>=this.MAX_DEPTH){this.item.disconnect(),H(()=>this.observe());return}Object.values(this.callbacks).forEach(r=>r()),clearTimeout(this.depthTimeout),this.depthTimeout=setTimeout(()=>{this.depth=0},0)})}observe(){this.item.observe(b.body,{subtree:!0,childList:!0,characterData:!0,attributes:!0,attributeFilter:["class"]})}start(r,e){this.callbacks[r]=e,this.started||(this.observe(),this.started=!0)}}let Oe=new Ve,He=_.bind(null,"text-insert",(n,r)=>n.textContent===r||(n.textContent=r)),De=_.bind(null,"href-insert",(n,r)=>n.getAttribute("href")===r.trim()||n.setAttribute("href",r.trim())),Ne=_.bind(null,"image-insert",(n,r)=>n.getAttribute("src")===r.trim()||n.setAttribute("src",r.trim())),je=_.bind(null,"html-replace",(n,r)=>n.innerHTML===r||(n.innerHTML=r)),$e=_.bind(null,"css-insert",Ue),Je=(n,r,e)=>{_("js-insert",Le.bind(null,r),n,e)};function ee(n){var t,i;let r=`yaCounter${n}`,e=l[r];if(!e)try{let s=((i=(t=l.Ya)==null?void 0:t._metrika)==null?void 0:i.counters)||{},a=Object.keys(s).find(o=>o.indexOf(`${n}:`)===0);return s[a||""]}catch(s){}return e}let te=!1;function N(n,r){return new Promise(e=>{var s;let t=P(n,".")[1];if(t)try{(s=l.ym)==null||s.call(l,t,"experiments",r)}catch(a){}function i(){if(!t){console.error(`Bad clientId = ${n}`);return}let a=ee(t);if(!a){setTimeout(i,10);return}try{a.experiments(r)}catch(o){}te=!0,e(!0)}i()})}function qe(n,r){var t;let e=P(n,".")[1];if(e){let i=ee(e);i?i.hit(v.href,{referer:r}):(t=l.ym)==null||t.call(l,e,"hit",v.href,{referer:r})}}function Ye(n,r=v.href){if(n.length===0)return;let e=new URL(r),t=new URL(n,e.toString()),i=t.searchParams;t.protocol=e.protocol,t.hostname=e.hostname;let s=0,a=!0;if(e.searchParams.forEach((o,u)=>{if(u==="ab__exp_flags"||u==="vq__redir_param"){i.delete(u);return}let c=u==="ab_redir"||u==="vq__ab_redir",y=i.get(u);if(y===null){if(c)return;i.set(u,o)}else a&&!c&&y!==o&&(a=!1);s++}),a&&(a=s===Array.from(i.keys()).length),!a||e.pathname.replace(X,"")!==t.pathname.replace(X,""))return t}function Be(n,r,e){let t;for(let y of n)if(t=Ye(y),t)break;if(!t)return!1;let i=0;try{ne(r,e,t,()=>i=r.metrikaTimeout)}catch(y){i=r.metrikaTimeout}let s=t.toString(),a,o;function u(){clearTimeout(o),clearTimeout(a),v.replace(s)}o=setTimeout(u,i);function c(){if(!te){a=setTimeout(c,10);return}u()}return c(),!0}function ne(n,r,e,t){if(r){if(n.storeReferer&&b.referrer)try{let i={referer:b.referrer,url:v.href,ts:Date.now()};l.sessionStorage.setItem("vq__referer",JSON.stringify(i))}catch(i){}switch(n.storeRedirParam){case!0:case"localstorage":let i={experiments:r,ts:Date.now(),target:e.toString()};l.localStorage.setItem("vq__redir_param",JSON.stringify(i));break;case"cookie":L({name:"vq__redir_param",value:r,ttl:5*U,domain:n.cookieDomain});break;case"get":e.searchParams.set("vq__redir_param",r);break;default:t()}}}function Ge(n,r,e){if(typeof e!="string"||e.length===0)return;let t=e;try{let i=new URL(e,v.href);ne(n,r,i,()=>console.error("storeRedirParam is required")),t=i.toString()}catch(i){console.error(i)}return t}function We(n){if(!I||typeof I!="object")return;I[n]===!0&&(I[n]=!1);let{callback:r}=I;if(r){for(let[e,t]of Object.entries(I)){let[i,s]=P(e,".");if(!(!i||!s)&&t===!0&&i.length>0&&!isNaN(Number(s)))return}setTimeout(r,0)}}function Ke(n){l.addEventListener("load",()=>{var y,S;let r=(S=(y=l.Ya)==null?void 0:y.Context)==null?void 0:S.AdvManager;if(!r)return;let e=r.getPlatform(),t=n[e];if(!t||!t.id)return;let i=f=>{l.yaContextCb.push(()=>{r.render({type:"inImage",blockId:t.id,renderTo:f})})},s=f=>new Promise((p,g)=>{l.yaContextCb.push(()=>{r.render({type:"inImage",blockId:t.id,renderTo:f,onRender:p,onError:g,altCallback:g})})}),a="img";t.target_ids&&t.target_ids.length?a=`#${t.target_ids.join(", #")}`:t.target_classes&&t.target_classes.length&&(a=`.${t.target_classes.join(", .")}`);let o=f=>{let p=f.id=`yandex_rtb_${t.id}-${Math.random().toString(16).slice(2)}`;return f.tagName==="IMG"&&!f.complete?new Promise((g,m)=>{f.addEventListener("load",()=>g(p)),f.addEventListener("error",m)}):Promise.resolve(p)},u=f=>{let{width:p,height:g}=f.getBoundingClientRect();return t.min_image_width&&p<t.min_image_width||t.min_image_height&&g<t.min_image_height},c=Array.from(b.querySelectorAll(a));if(t.max_ad_images===void 0||t.max_ad_images>=c.length)for(let f of c)u(f)||o(f).then(i).catch(()=>{});else{let f=p=>{if(p<=0||!c.length)return;let g=c.shift();if(g){if(u(g))return f(p);o(g).then(s).then(()=>f(p-1)).catch(()=>f(p))}};f(t.max_ad_images)}},{once:!0})}let Xe=(n,r)=>l.Math.floor(l.Math.random()*(r-n))+n,ze=()=>[l.Math.round(l.Date.now()/1e3),Xe(1e6,999999999)].join("");function we(n){let r=D(M);if(r)return r;try{let e=l.localStorage.getItem(M);if(e)return e}catch(e){}if(n.enableSetYmUid){let e=ze();try{l.localStorage.setItem(M,e)}catch(t){}return L({name:M,value:e,domain:n.cookieDomain}),e}return""}function Ze(n,r){let e=6,t=0;function i(){var s;try{for(;t<r.length;t++)(s=r[t])==null||s.call(null,n)}catch(a){e-- >0?setTimeout(i,50):console.error(a)}}i()}function re(n,r,e){(R[n]||E).removeAbRedirParam&&(j("ab_redir"),j("vq__ab_redir")),e.length&&Ze(r,e),We(n)}function Qe(n,r,e,t,i){let s=new URL(_e),a=s.searchParams;return a.set("client_id",String(n)),a.set("url",v.href),a.set("i",r||D(K)||""),t.enableSendYmUid&&a.set("duid",we(t)),e&&a.set("client_features",JSON.stringify(e)),i&&a.set("cuid",i),s.toString()}function j(n){let r=new URL(v.href),e=r.searchParams;if(e.has(n)){let t=e.get(n);try{e.delete(n),Y.replaceState(Y.state,"",r.toString())}catch(i){}return t||void 0}}function et(n){try{switch(n.storeRedirParam){case"cookie":{let r=D("vq__redir_param");return L({name:"vq__redir_param",value:"",ttl:0,domain:n.cookieDomain}),r}case"get":return j("vq__redir_param");case"localstorage":case!0:{let r=l.localStorage,e=r.getItem("vq__redir_param"),t;if(e){let i=JSON.parse(e);i.ts>Date.now()-5*U*1e3&&(t=i.experiments)}return r.removeItem("vq__redir_param"),t||void 0}}}catch(r){}}function k(n,r,e,t,i){if(typeof n!="string")throw new Error("clientId: should be string");W[n]=!0;let s=Te,a=R[n]||E,o=Qe(n,r,e,a,i),u=x[o];if(u)return t(u);let c=G[o]||(G[o]=[]);if(c.push(t),c.length>1)return;function y(){if(x[o])return;let g={flags:{},i:r,experiments:void 0,prepareUrl:m=>typeof m=="string"?m:void 0,getBlockId:m=>typeof m=="string"?m:void 0};x[o]=g,N(n,Ae),re(n,g,c)}let S=setTimeout(y,Ie);function f(g){var he,be;let m=R[n]||E,{flags:nt,redirect:le,htmlReplace:ce,adv:ue,advReplaceId:rt,integrations:it,cssInsert:F,textInsert:de,hrefInsert:fe,jsInsert:ge,imageSrcInsert:me}=Pe(g.flags,m),V=Object.assign({},g,{flags:nt,prepareUrl:Ge.bind(null,m,g.experiments),getBlockId:ot});g.i&&(r=g.i);let J=et(m),A=Promise.resolve();J&&J!==g.experiments&&(A=A.then(()=>N(n,J))),A=A.then(()=>N(n,g.experiments));try{let d=l.sessionStorage,C=d.getItem("vq__referer");if(C){let h=JSON.parse(C);h&&h.ts>Date.now()-5*U*1e3&&h.url===b.referrer&&(A=A.then(()=>{qe(n,h.referer),d.removeItem("vq__referer")}))}}catch(d){}clearTimeout(S),x[o]=V,V.i&&L({name:K,value:V.i,domain:m.cookieDomain});function pe(d=!1){ce.length&&je(ce,d),fe.length&&De(fe,d),me.length&&Ne(me,d),de.length&&He(de,d),F.length&&$e(F,d),ge.length&&Je(ge,m.nonce,d)}function st(d){try{return JSON.parse(d)}catch(C){}}it.forEach(d=>{let C=st(d.v);C&&oe(d.n,C.version,()=>{l.dispatchEvent(new CustomEvent("init-plugin",{detail:{t:d.t,n:d.n,v:C}}))})});function at(){m.enableVisual&&(F.length&&Me(F,m.nonce),m.enableWatch&&Oe.start(n,pe),pe(!m.enableWatch)),re(n,V,c)}function ot(d){var C;try{let h=JSON.parse((C=rt[d])!=null?C:"");return(h==null?void 0:h.toId)||d}catch(h){return d}}function lt(){for(let{type:d,value:C}of ue)try{let h=JSON.parse(C);if(typeof h!="object"||h===null)continue;if(d==="in_image"){Ke(h);continue}l.yaContextCb.push(()=>{var Ce,ve;let q=(ve=(Ce=l.Ya)==null?void 0:Ce.Context)==null?void 0:ve.AdvManager;if(!q)return;let ye=q.getPlatform(),O=h[ye];O&&O.id&&q.render({type:d,platform:ye,blockId:O.id,renderTo:O.renderTo})})}catch(h){}}(!le.length||!Be(le,m,g.experiments))&&(H(at),ue.length&&(l.yaContextCb||(l.yaContextCb=[]),(be=(he=l.Ya)==null?void 0:he.Context)!=null&&be.AdvManager||w("https://yandex.ru/ads/system/context.js"),H(lt)))}function p(){if(--s>0)return ie(o,f,p);clearTimeout(S),y()}try{localStorage.removeItem("vq__redirect_param")}catch(g){}ie(o,f,p)}function ie(n,r,e){let t=new XMLHttpRequest;return t.open("GET",n),t.addEventListener("load",function(){if(t.status===200){try{let i=JSON.parse(t.responseText);r(i)}catch(i){i instanceof Error&&e(i.message)}return}e(t.statusText)}),t.addEventListener("error",()=>e(t.statusText)),t.send()}let se={init:(n,r,e,t)=>{k(n,r,e,i=>t&&t(i))},getFlags:(n,r,e,t)=>{k(n,r,e,i=>t&&t(i.flags))},getExperiments:(n,r,e,t)=>{k(n,r,e,i=>t&&t(i.experiments))},getParam:(n,r,e,t)=>{k(n,r,e,i=>t&&t(i.i))},setConfig:(n,r,e,t)=>{ae(n,e),t&&t()},getConfig:(n,r,e,t)=>{let i=R[n]||E,s=Object.assign({},i);delete s.nonce,t&&t(s)},adv:(n,r,e,t)=>{k(n,r,e,i=>t&&t(i))}};function ae(n,r){var e;if(typeof r=="object"){let t=R[n]||(R[n]=Object.assign({},E)),i=Object.keys(r);for(let s of i)if(s in t){let a=s,o=r[a];(e=Re[a])!=null&&e.includes(typeof o)&&(t[a]=o)}}}function tt(n){let{clientId:r,config:e}=n;if(!r)throw new Error("clientId is required");ae(r,e),k(r,n.i,n.clientFeatures,t=>n.callback&&n.callback(t),n.cuid)}function oe(n,r,e){let t=r==="beta";(t||/^(\d\.)+\d+$/.test(r)&&/^[a-z0-9-]+$/ig.test(n))&&w(`https://abt.s3.yandex.net/${n}/${t?"":"v"}${r}/main.js`,e)}function $(n,r,e,t,i){if(typeof n=="object")return tt(n);if(!r)throw new Error("method not specified");if(!(r in se))throw new Error("unknown method");typeof t=="function"&&(i=t,t={}),typeof e=="function"&&(i=e,e=void 0),typeof e=="object"&&(t=e,e=void 0),t||(t={}),se[r](n,e,t,i)}T&&(Array.isArray(T.a)&&T.a.forEach(n=>$.apply(null,n)),typeof T.antiFlicker=="object"&&(I=T.antiFlicker)),$.inited=!0,l.ymab=$,function(n){let r=["ru","ua","by","kz","com","com.tr"];function e(s){if(!s)return null;if(typeof s!="string")return s;try{return JSON.parse(s)}catch(a){return null}}function t(s){let a=new URL(s),{hostname:o,protocol:u}=a,c=(o==null?void 0:o.split("."))||[];c[1]==="test"&&c.splice(1,1);let[y,S]=c,p=c.slice(2).join(".");return u==="https:"&&y==="ab"&&S==="yandex"&&r.indexOf(p)!==-1}function i(s){let a=s.origin;if(!a||!t(a))return;let o=e(s.data);if(!(!o||!W[o.clientId]))switch(o.type){case"appendplugin":oe(o.plugin,o.version);break}}n.addEventListener("message",i)}(l)})(window,document);})();
