(()=>{"use strict";var t={96319:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(99802));window.compareStorage=window.compareStorage||new o.default(window.compareStorageConfig)},81825:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CompareStorageEventsEnum=void 0,function(t){t.UPDATE="compareStorage:UPDATE",t.CLEAR="compareStorage:CLEAR"}(e.CompareStorageEventsEnum||(e.CompareStorageEventsEnum={}))},99802:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(81825),s=function(){function t(t){this._config=t,this._keyIds="cst_ids",this._keyStamp="cst_us",this._config=Object.assign({lastUpdateStamp:Date.now()/1e3,storageUrl:function(){var t="https://www.dns-shop.ru";if("kz"===location.origin.split(".").pop())t="https://www.dns-shop.kz";return t+"/catalog/compare/storage/"}()},t)}return t.prototype.getAll=function(){return r(this,void 0,Promise,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return[4,this._getState()];case 1:return e.sent(),(t=JSON.parse(localStorage.getItem(this._keyIds)))?[2,Object.values(t)]:[2,[]]}}))}))},t.prototype.isEmpty=function(){return r(this,void 0,Promise,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t=0,[4,this.getAll()];case 1:return[2,t===e.sent().length]}}))}))},t.prototype.count=function(){return r(this,void 0,Promise,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.getAll()];case 1:return[2,t.sent().length]}}))}))},t.prototype.has=function(t){return r(this,void 0,Promise,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=-1,[4,this.getAll()];case 1:return[2,e!==n.sent().indexOf(t)]}}))}))},t.prototype.add=function(t){return r(this,void 0,Promise,(function(){return o(this,(function(e){return[2,this.sendRequest("add",t)]}))}))},t.prototype.remove=function(t){return r(this,void 0,Promise,(function(){return o(this,(function(e){return[2,this.sendRequest("remove",t)]}))}))},t.prototype.clear=function(){return r(this,void 0,Promise,(function(){return o(this,(function(t){return[2,this.sendRequest("clear")]}))}))},t.prototype.resetLocalStorage=function(){localStorage.removeItem(this._keyIds),localStorage.removeItem(this._keyStamp)},t.prototype.dispatchChange=function(){return r(this,void 0,Promise,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return[4,this.count()];case 1:return 0===(t=e.sent())&&this.dispatchEvent(i.CompareStorageEventsEnum.CLEAR),this.dispatchEvent(i.CompareStorageEventsEnum.UPDATE,{count:t}),[2]}}))}))},t.prototype.dispatchEvent=function(t,e){var n=document.createEvent("CustomEvent");n.initCustomEvent(t,!0,!0,e),window.dispatchEvent(n)},t.prototype.sendRequest=function(t,e){return void 0===e&&(e=[]),r(this,void 0,Promise,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:(n=new FormData).set("action",t),n.set("ids",JSON.stringify(e)),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,fetch(this._config.storageUrl,{body:n,cache:"no-cache",credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-Token":this._getCsrfToken()},method:"POST",mode:"cors",redirect:"follow",referrer:"no-referrer"}).then((function(t){return t.json()})).catch((function(){return null}))];case 2:return null!==(r=o.sent())&&this._processStorageResponse(r),"getState"===t?[3,4]:(this._getStatePromise=null,[4,this.dispatchChange()]);case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:return i=o.sent(),console.log(i),[3,6];case 6:return this._getStatePromise=null,[2]}}))}))},t.prototype._getState=function(){return r(this,void 0,Promise,(function(){return o(this,(function(t){return this._getStatePromise||(this._getStatePromise=this._getStateInner()),[2,this._getStatePromise]}))}))},t.prototype._getStateInner=function(){return r(this,void 0,void 0,(function(){var t,e;return o(this,(function(n){return 0!==(t=JSON.parse(localStorage.getItem("cp"))||[]).length?(localStorage.removeItem("cp"),[2,this.add(t)]):0===this._config.lastUpdateStamp?(this.resetLocalStorage(),[2]):(e=parseInt(localStorage.getItem(this._keyStamp)),isNaN(e)||e<this._config.lastUpdateStamp?[2,this.sendRequest("getState")]:[2])}))}))},t.prototype._processStorageResponse=function(t){t.result&&(localStorage.setItem(this._keyIds,JSON.stringify(t.data.products)),localStorage.setItem(this._keyStamp,t.data.stamp),this._config.lastUpdateStamp=t.data.stamp)},t.prototype._getCsrfToken=function(){var t=document.querySelector("meta[name=csrf-token]");if(null===t)return"";var e=t.getAttribute("content");return null===e?"":e},t}();e.default=s}},e={};(function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports})(96319)})();