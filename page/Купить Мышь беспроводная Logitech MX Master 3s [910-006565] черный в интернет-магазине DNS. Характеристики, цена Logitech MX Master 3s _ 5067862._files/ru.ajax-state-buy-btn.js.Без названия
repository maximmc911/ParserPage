(()=>{"use strict";var __webpack_modules__={49468:(t,e,n)=>{var r=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(t,e,n)=>e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l=(t,e)=>{for(var n in e||(e={}))s.call(e,n)&&c(t,n,e[n]);if(a)for(var n of a(e))u.call(e,n)&&c(t,n,e[n]);return t};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});var p="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},f="1.9.0",d=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var h=function(t){var e=new Set([t]),n=new Set,r=t.match(d);if(!r)return function(){return!1};var o=+r[1],i=+r[2],a=+r[3];if(null!=r[4])return function(e){return e===t};function s(t){return n.add(t),!1}function u(t){return e.add(t),!0}return function(t){if(e.has(t))return!0;if(n.has(t))return!1;var r=t.match(d);if(!r)return s(t);var c=+r[1],l=+r[2],p=+r[3];return null!=r[4]||o!==c?s(t):0===o?i===l&&a<=p?u(t):s(t):i<=l?u(t):s(t)}}(f),_=f.split(".")[0],y=Symbol.for("opentelemetry.js.api."+_),E=p;function v(t,e,n,r){var o;void 0===r&&(r=!1);var i=E[y]=null!==(o=E[y])&&void 0!==o?o:{version:f};if(!r&&i[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return n.error(a.stack||a.message),!1}if(i.version!==f){a=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+t+" does not match previously registered API v"+f);return n.error(a.stack||a.message),!1}return i[t]=e,n.debug("@opentelemetry/api: Registered a global for "+t+" v"+f+"."),!0}function T(t){var e,n,r=null===(e=E[y])||void 0===e?void 0:e.version;if(r&&h(r))return null===(n=E[y])||void 0===n?void 0:n[t]}function g(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+f+".");var n=E[y];n&&delete n[t]}var m,b,O=function(){function t(t){this._namespace=t.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S("debug",this._namespace,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S("error",this._namespace,t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S("info",this._namespace,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S("warn",this._namespace,t)},t.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S("verbose",this._namespace,t)},t}();function S(t,e,n){var r=T("diag");if(r)return n.unshift(e),r[t].apply(r,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)(r||!(o in e))&&(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(n),!1))}(b=m||(m={}))[b.NONE=0]="NONE",b[b.ERROR=30]="ERROR",b[b.WARN=50]="WARN",b[b.INFO=60]="INFO",b[b.DEBUG=70]="DEBUG",b[b.VERBOSE=80]="VERBOSE",b[b.ALL=9999]="ALL";var R=function(){function t(){function t(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=T("diag");if(r)return r[t].apply(r,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)(r||!(o in e))&&(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(e),!1))}}var e=this;e.setLogger=function(t,n){var r,o,i;if(void 0===n&&(n={logLevel:m.INFO}),t===e){var a=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return e.error(null!==(r=a.stack)&&void 0!==r?r:a.message),!1}"number"==typeof n&&(n={logLevel:n});var s=T("diag"),u=function(t,e){function n(n,r){var o=e[n];return"function"==typeof o&&t>=r?o.bind(e):function(){}}return t<m.NONE?t=m.NONE:t>m.ALL&&(t=m.ALL),e=e||{},{error:n("error",m.ERROR),warn:n("warn",m.WARN),info:n("info",m.INFO),debug:n("debug",m.DEBUG),verbose:n("verbose",m.VERBOSE)}}(null!==(o=n.logLevel)&&void 0!==o?o:m.INFO,t);if(s&&!n.suppressOverrideMessage){var c=null!==(i=(new Error).stack)&&void 0!==i?i:"<failed to generate stacktrace>";s.warn("Current logger will be overwritten from "+c),u.warn("Current logger will overwrite one already registered from "+c)}return v("diag",u,e,!0)},e.disable=function(){g("diag",e)},e.createComponentLogger=function(t){return new O(t)},e.verbose=t("verbose"),e.debug=t("debug"),e.info=t("info"),e.warn=t("warn"),e.error=t("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),w=function(){function t(t){this._entries=t?new Map(t):new Map}return t.prototype.getEntry=function(t){var e=this._entries.get(t);if(e)return Object.assign({},e)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2);return[e[0],e[1]]}))},t.prototype.setEntry=function(e,n){var r=new t(this._entries);return r._entries.set(e,n),r},t.prototype.removeEntry=function(e){var n=new t(this._entries);return n._entries.delete(e),n},t.prototype.removeEntries=function(){for(var e,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=new t(this._entries);try{for(var a=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),s=a.next();!s.done;s=a.next()){var u=s.value;i._entries.delete(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i},t.prototype.clear=function(){return new t},t}(),P=Symbol("BaggageEntryMetadata"),C=R.instance();function A(t){return void 0===t&&(t={}),new w(new Map(Object.entries(t)))}function L(t){return Symbol.for(t)}var I,D=function t(e){var n=this;n._currentContext=e?new Map(e):new Map,n.getValue=function(t){return n._currentContext.get(t)},n.setValue=function(e,r){var o=new t(n._currentContext);return o._currentContext.set(e,r),o},n.deleteValue=function(e){var r=new t(n._currentContext);return r._currentContext.delete(e),r}},N=new D,k=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),M=function(){function t(){}return t.prototype.createGauge=function(t,e){return X},t.prototype.createHistogram=function(t,e){return q},t.prototype.createCounter=function(t,e){return Y},t.prototype.createUpDownCounter=function(t,e){return W},t.prototype.createObservableGauge=function(t,e){return Q},t.prototype.createObservableCounter=function(t,e){return K},t.prototype.createObservableUpDownCounter=function(t,e){return $},t.prototype.addBatchObservableCallback=function(t,e){},t.prototype.removeBatchObservableCallback=function(t){},t}(),x=function(){},U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e.prototype.add=function(t,e){},e}(x),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e.prototype.add=function(t,e){},e}(x),j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e.prototype.record=function(t,e){},e}(x),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e.prototype.record=function(t,e){},e}(x),z=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.removeCallback=function(t){},t}(),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e}(z),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e}(z),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e}(z),V=new M,Y=new U,X=new j,q=new G,W=new B,K=new F,Q=new H,$=new Z,J={get:function(t,e){if(null!=t)return t[e]},keys:function(t){return null==t?[]:Object.keys(t)}},tt={set:function(t,e,n){null!=t&&(t[e]=n)}},et=function(){function t(){}return t.prototype.active=function(){return N},t.prototype.with=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return e.call.apply(e,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)(r||!(o in e))&&(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([n],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(r),!1))},t.prototype.bind=function(t,e){return e},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),nt="context",rt=new et,ot=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(t){return v(nt,t,R.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(t,e,n){for(var r,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(r=this._getContextManager()).with.apply(r,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)(r||!(o in e))&&(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([t,e,n],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(o),!1))},t.prototype.bind=function(t,e){return this._getContextManager().bind(t,e)},t.prototype._getContextManager=function(){return T(nt)||rt},t.prototype.disable=function(){this._getContextManager().disable(),g(nt,R.instance())},t}();!function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"}(I||(I={}));var it="0000000000000000",at="00000000000000000000000000000000",st={traceId:at,spanId:it,traceFlags:I.NONE},ut=function(){function t(t){void 0===t&&(t=st),this._spanContext=t}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(t,e){return this},t.prototype.setAttributes=function(t){return this},t.prototype.addEvent=function(t,e){return this},t.prototype.addLink=function(t){return this},t.prototype.addLinks=function(t){return this},t.prototype.setStatus=function(t){return this},t.prototype.updateName=function(t){return this},t.prototype.end=function(t){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(t,e){},t}(),ct=L("OpenTelemetry Context Key SPAN");function lt(t){return t.getValue(ct)||void 0}function pt(){return lt(ot.getInstance().active())}function ft(t,e){return t.setValue(ct,e)}function dt(t){return t.deleteValue(ct)}function ht(t,e){return ft(t,new ut(e))}function _t(t){var e;return null===(e=lt(t))||void 0===e?void 0:e.spanContext()}var yt=/^([0-9a-f]{32})$/i,Et=/^[0-9a-f]{16}$/i;function vt(t){return yt.test(t)&&t!==at}function Tt(t){return Et.test(t)&&t!==it}function gt(t){return vt(t.traceId)&&Tt(t.spanId)}function mt(t){return new ut(t)}var bt=ot.getInstance(),Ot=function(){function t(){}return t.prototype.startSpan=function(t,e,n){if(void 0===n&&(n=bt.active()),!(null==e||!e.root))return new ut;var r=n&&_t(n);return function(t){return"object"==typeof t&&"string"==typeof t.spanId&&"string"==typeof t.traceId&&"number"==typeof t.traceFlags}(r)&&gt(r)?new ut(r):new ut},t.prototype.startActiveSpan=function(t,e,n,r){var o,i,a;if(!(arguments.length<2)){2===arguments.length?a=e:3===arguments.length?(o=e,a=n):(o=e,i=n,a=r);var s=null!=i?i:bt.active(),u=this.startSpan(t,o,s),c=ft(s,u);return bt.with(c,a,void 0,u)}},t}();var St,Rt,wt,Pt=new Ot,Ct=function(){function t(t,e,n,r){this._provider=t,this.name=e,this.version=n,this.options=r}return t.prototype.startSpan=function(t,e,n){return this._getTracer().startSpan(t,e,n)},t.prototype.startActiveSpan=function(t,e,n,r){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Pt},t}(),At=function(){function t(){}return t.prototype.getTracer=function(t,e,n){return new Ot},t}(),Lt=new At,It=function(){function t(){}return t.prototype.getTracer=function(t,e,n){var r;return null!==(r=this.getDelegateTracer(t,e,n))&&void 0!==r?r:new Ct(this,t,e,n)},t.prototype.getDelegate=function(){var t;return null!==(t=this._delegate)&&void 0!==t?t:Lt},t.prototype.setDelegate=function(t){this._delegate=t},t.prototype.getDelegateTracer=function(t,e,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(t,e,n)},t}();!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(St||(St={})),function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"}(Rt||(Rt={})),function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"}(wt||(wt={}));var Dt=ot.getInstance(),Nt=R.instance(),kt=function(){function t(){}return t.prototype.getMeter=function(t,e,n){return V},t}(),Mt=new kt,xt="metrics",Ut=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(t){return v(xt,t,R.instance())},t.prototype.getMeterProvider=function(){return T(xt)||Mt},t.prototype.getMeter=function(t,e,n){return this.getMeterProvider().getMeter(t,e,n)},t.prototype.disable=function(){g(xt,R.instance())},t}(),Bt=Ut.getInstance(),jt=function(){function t(){}return t.prototype.inject=function(t,e){},t.prototype.extract=function(t,e){return t},t.prototype.fields=function(){return[]},t}(),Gt=L("OpenTelemetry Baggage Key");function zt(t){return t.getValue(Gt)||void 0}function Ft(){return zt(ot.getInstance().active())}function Ht(t,e){return t.setValue(Gt,e)}function Zt(t){return t.deleteValue(Gt)}var Vt="propagation",Yt=new jt,Xt=function(){function t(){this.createBaggage=A,this.getBaggage=zt,this.getActiveBaggage=Ft,this.setBaggage=Ht,this.deleteBaggage=Zt}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(t){return v(Vt,t,R.instance())},t.prototype.inject=function(t,e,n){return void 0===n&&(n=tt),this._getGlobalPropagator().inject(t,e,n)},t.prototype.extract=function(t,e,n){return void 0===n&&(n=J),this._getGlobalPropagator().extract(t,e,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){g(Vt,R.instance())},t.prototype._getGlobalPropagator=function(){return T(Vt)||Yt},t}(),qt=Xt.getInstance(),Wt="trace",Kt=function(){function t(){this._proxyTracerProvider=new It,this.wrapSpanContext=mt,this.isSpanContextValid=gt,this.deleteSpan=dt,this.getSpan=lt,this.getActiveSpan=pt,this.getSpanContext=_t,this.setSpan=ft,this.setSpanContext=ht}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(t){var e=v(Wt,this._proxyTracerProvider,R.instance());return e&&this._proxyTracerProvider.setDelegate(t),e},t.prototype.getTracerProvider=function(){return T(Wt)||this._proxyTracerProvider},t.prototype.getTracer=function(t,e){return this.getTracerProvider().getTracer(t,e)},t.prototype.disable=function(){g(Wt,R.instance()),this._proxyTracerProvider=new It},t}(),Qt=Kt.getInstance();var $t,Jt="OT_ZONE_CONTEXT",te=function(){function t(){this._enabled=!1,this._zoneCounter=0}return t.prototype._activeContextFromZone=function(t){return t&&t.get(Jt)||N},t.prototype._bindFunction=function(t,e){var n=this,r=function(){for(var r=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return n.with(t,(function(){return e.apply(r,o)}))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),r},t.prototype._bindListener=function(t,e){var n=e;return void 0!==n.__ot_listeners||(n.__ot_listeners={},"function"==typeof n.addEventListener&&(n.addEventListener=this._patchAddEventListener(n,n.addEventListener,t)),"function"==typeof n.removeEventListener&&(n.removeEventListener=this._patchRemoveEventListener(n,n.removeEventListener))),e},t.prototype._createZoneName=function(){this._zoneCounter++;var t=Math.random();return this._zoneCounter+"-"+t},t.prototype._createZone=function(t,e){var n;return Zone.current.fork({name:t,properties:(n={},n[Jt]=e,n)})},t.prototype._getActiveZone=function(){return Zone.current},t.prototype._patchAddEventListener=function(t,e,n){var r=this;return function(o,i,a){void 0===t.__ot_listeners&&(t.__ot_listeners={});var s=t.__ot_listeners[o];void 0===s&&(s=new WeakMap,t.__ot_listeners[o]=s);var u=r.bind(n,i);return s.set(i,u),e.call(this,o,u,a)}},t.prototype._patchRemoveEventListener=function(t,e){return function(n,r){if(void 0===t.__ot_listeners||void 0===t.__ot_listeners[n])return e.call(this,n,r);var o=t.__ot_listeners[n],i=o.get(r);return o.delete(r),e.call(this,n,i||r)}},t.prototype.active=function(){if(!this._enabled)return N;var t=this._getActiveZone();return this._activeContextFromZone(t)||N},t.prototype.bind=function(t,e){return void 0===t&&(t=this.active()),"function"==typeof e?this._bindFunction(t,e):(function(t){return void 0===t&&(t={}),"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)&&this._bindListener(t,e),e)},t.prototype.disable=function(){return this._enabled=!1,this},t.prototype.enable=function(){return this._enabled=!0,this},t.prototype.with=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var i=this._createZoneName();return this._createZone(i,t).run(e,n,r)},t}(),ee={};!function(){if($t)return ee;$t=1;const t=globalThis;function e(e){return(t.__Zone_symbol_prefix||"__zone_symbol__")+e}const n=Object.getOwnPropertyDescriptor,r=Object.defineProperty,a=Object.getPrototypeOf,s=Object.create,u=Array.prototype.slice,c="addEventListener",p="removeEventListener",f=e(c),d=e(p),h="true",_="false",y=e("");function E(t,e){return Zone.current.wrap(t,e)}function v(t,e,n,r,o){return Zone.current.scheduleMacroTask(t,e,n,r,o)}const T=e,g="undefined"!=typeof window,m=g?window:void 0,b=g&&m||globalThis;function O(t,e){for(let n=t.length-1;n>=0;n--)"function"==typeof t[n]&&(t[n]=E(t[n],e+"_"+n));return t}function S(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}const R="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,w=!("nw"in b)&&void 0!==b.process&&"[object process]"===b.process.toString(),P=!w&&!R&&!(!g||!m.HTMLElement),C=void 0!==b.process&&"[object process]"===b.process.toString()&&!R&&!(!g||!m.HTMLElement),A={},L=T("enable_beforeunload"),I=function(t){if(!(t=t||b.event))return;let e=A[t.type];e||(e=A[t.type]=T("ON_PROPERTY"+t.type));const n=this||t.target||b,r=n[e];let o;if(P&&n===m&&"error"===t.type){const e=t;o=r&&r.call(this,e.message,e.filename,e.lineno,e.colno,e.error),!0===o&&t.preventDefault()}else o=r&&r.apply(this,arguments),"beforeunload"===t.type&&b[L]&&"string"==typeof o?t.returnValue=o:null!=o&&!o&&t.preventDefault();return o};function D(t,e,o){let i=n(t,e);if(!i&&o&&n(o,e)&&(i={enumerable:!0,configurable:!0}),!i||!i.configurable)return;const a=T("on"+e+"patched");if(t.hasOwnProperty(a)&&t[a])return;delete i.writable,delete i.value;const s=i.get,u=i.set,c=e.slice(2);let l=A[c];l||(l=A[c]=T("ON_PROPERTY"+c)),i.set=function(e){let n=this;!n&&t===b&&(n=b),n&&("function"==typeof n[l]&&n.removeEventListener(c,I),u&&u.call(n,null),n[l]=e,"function"==typeof e&&n.addEventListener(c,I,!1))},i.get=function(){let n=this;if(!n&&t===b&&(n=b),!n)return null;const r=n[l];if(r)return r;if(s){let t=s.call(this);if(t)return i.set.call(this,t),"function"==typeof n.removeAttribute&&n.removeAttribute(e),t}return null},r(t,e,i),t[a]=!0}function N(t,e,n){if(e)for(let r=0;r<e.length;r++)D(t,"on"+e[r],n);else{const e=[];for(const n in t)"on"==n.slice(0,2)&&e.push(n);for(let r=0;r<e.length;r++)D(t,e[r],n)}}const k=T("originalInstance");function M(t){const e=b[t];if(!e)return;b[T(t)]=e,b[t]=function(){const n=O(arguments,t);switch(n.length){case 0:this[k]=new e;break;case 1:this[k]=new e(n[0]);break;case 2:this[k]=new e(n[0],n[1]);break;case 3:this[k]=new e(n[0],n[1],n[2]);break;case 4:this[k]=new e(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},B(b[t],e);const n=new e((function(){}));let o;for(o in n)"XMLHttpRequest"===t&&"responseBlob"===o||function(e){"function"==typeof n[e]?b[t].prototype[e]=function(){return this[k][e].apply(this[k],arguments)}:r(b[t].prototype,e,{set:function(n){"function"==typeof n?(this[k][e]=E(n,t+"."+e),B(this[k][e],n)):this[k][e]=n},get:function(){return this[k][e]}})}(o);for(o in e)"prototype"!==o&&e.hasOwnProperty(o)&&(b[t][o]=e[o])}function x(t,e,r){let o=t;for(;o&&!o.hasOwnProperty(e);)o=a(o);!o&&t[e]&&(o=t);const i=T(e);let s=null;if(o&&(!(s=o[i])||!o.hasOwnProperty(i))){s=o[i]=o[e];if(S(o&&n(o,e))){const t=r(s,i,e);o[e]=function(){return t(this,arguments)},B(o[e],s)}}return s}function U(t,e,n){let r=null;function o(t){const e=t.data;return e.args[e.cbIdx]=function(){t.invoke.apply(this,arguments)},r.apply(e.target,e.args),t}r=x(t,e,(t=>function(e,r){const i=n(e,r);return i.cbIdx>=0&&"function"==typeof r[i.cbIdx]?v(i.name,r[i.cbIdx],i,o):t.apply(e,r)}))}function B(t,e){t[T("OriginalDelegate")]=e}let j=!1,G=!1;function z(){if(j)return G;j=!0;try{const t=m.navigator.userAgent;(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/")||-1!==t.indexOf("Edge/"))&&(G=!0)}catch(t){}return G}function F(t){return"function"==typeof t}function H(t){return"number"==typeof t}let Z=!1;if("undefined"!=typeof window)try{const t=Object.defineProperty({},"passive",{get:function(){Z=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(ct){Z=!1}const V={useG:!0},Y={},X={},q=new RegExp("^"+y+"(\\w+)(true|false)$"),W=T("propagationStopped");function K(t,e){const n=(e?e(t):t)+_,r=(e?e(t):t)+h,o=y+n,i=y+r;Y[t]={},Y[t][_]=o,Y[t][h]=i}function Q(t,e,n,r){const s=r&&r.add||c,u=r&&r.rm||p,f=r&&r.listeners||"eventListeners",d=r&&r.rmAll||"removeAllListeners",E=T(s),v="."+s+":",g="prependListener",m="."+g+":",b=function(t,e,n){if(t.isRemoved)return;const r=t.callback;let o;"object"==typeof r&&r.handleEvent&&(t.callback=t=>r.handleEvent(t),t.originalDelegate=r);try{t.invoke(t,e,[n])}catch(t){o=t}const i=t.options;if(i&&"object"==typeof i&&i.once){const r=t.originalDelegate?t.originalDelegate:t.callback;e[u].call(e,n.type,r,i)}return o};function O(n,r,o){if(!(r=r||t.event))return;const i=n||r.target||t,a=i[Y[r.type][o?h:_]];if(a){const t=[];if(1===a.length){const e=b(a[0],i,r);e&&t.push(e)}else{const e=a.slice();for(let n=0;n<e.length&&(!r||!0!==r[W]);n++){const o=b(e[n],i,r);o&&t.push(o)}}if(1===t.length)throw t[0];for(let n=0;n<t.length;n++){const r=t[n];e.nativeScheduleMicroTask((()=>{throw r}))}}}const S=function(t){return O(this,t,!1)},R=function(t){return O(this,t,!0)};function P(e,n){if(!e)return!1;let r=!0;n&&void 0!==n.useG&&(r=n.useG);const c=n&&n.vh;let p=!0;n&&void 0!==n.chkDup&&(p=n.chkDup);let b=!1;n&&void 0!==n.rt&&(b=n.rt);let O=e;for(;O&&!O.hasOwnProperty(s);)O=a(O);if(!O&&e[s]&&(O=e),!O||O[E])return!1;const P=n&&n.eventNameToString,C={},A=O[E]=O[s],L=O[T(u)]=O[u],I=O[T(f)]=O[f],D=O[T(d)]=O[d];let N;function k(t,e){return!Z&&"object"==typeof t&&t?!!t.capture:Z&&e?"boolean"==typeof t?{capture:t,passive:!0}:t?"object"==typeof t&&!1!==t.passive?((t,e)=>o(t,i(e)))(l({},t),{passive:!0}):t:{passive:!0}:t}n&&n.prepend&&(N=O[T(n.prepend)]=O[n.prepend]);const M=r?function(t){if(!C.isExisting)return A.call(C.target,C.eventName,C.capture?R:S,C.options)}:function(t){return A.call(C.target,C.eventName,t.invoke,C.options)},x=r?function(t){if(!t.isRemoved){const e=Y[t.eventName];let n;e&&(n=e[t.capture?h:_]);const r=n&&t.target[n];if(r)for(let e=0;e<r.length;e++)if(r[e]===t){r.splice(e,1),t.isRemoved=!0,t.removeAbortListener&&(t.removeAbortListener(),t.removeAbortListener=null),0===r.length&&(t.allRemoved=!0,t.target[n]=null);break}}if(t.allRemoved)return L.call(t.target,t.eventName,t.capture?R:S,t.options)}:function(t){return L.call(t.target,t.eventName,t.invoke,t.options)},U=n&&n.diff?n.diff:function(t,e){const n=typeof e;return"function"===n&&t.callback===e||"object"===n&&t.originalDelegate===e},j=Zone[T("UNPATCHED_EVENTS")],G=t[T("PASSIVE_EVENTS")];const z=function(e,o,i,a,s=!1,u=!1){return function(){const f=this||t;let d=arguments[0];n&&n.transferEventName&&(d=n.transferEventName(d));let y=arguments[1];if(!y)return e.apply(this,arguments);if(w&&"uncaughtException"===d)return e.apply(this,arguments);let E=!1;if("function"!=typeof y){if(!y.handleEvent)return e.apply(this,arguments);E=!0}if(c&&!c(e,y,f,arguments))return;const v=Z&&!!G&&-1!==G.indexOf(d),T=function(t){if("object"==typeof t&&null!==t){const e=l({},t);return t.signal&&(e.signal=t.signal),e}return t}(k(arguments[2],v)),g=null==T?void 0:T.signal;if(null!=g&&g.aborted)return;if(j)for(let t=0;t<j.length;t++)if(d===j[t])return v?e.call(f,d,y,T):e.apply(this,arguments);const m=!!T&&("boolean"==typeof T||T.capture),b=!(!T||"object"!=typeof T)&&T.once,O=Zone.current;let S=Y[d];S||(K(d,P),S=Y[d]);const R=S[m?h:_];let A,L=f[R],I=!1;if(L){if(I=!0,p)for(let t=0;t<L.length;t++)if(U(L[t],y))return}else L=f[R]=[];const D=f.constructor.name,N=X[D];N&&(A=N[d]),A||(A=D+o+(P?P(d):d)),C.options=T,b&&(C.options.once=!1),C.target=f,C.capture=m,C.eventName=d,C.isExisting=I;const M=r?V:void 0;M&&(M.taskData=C),g&&(C.options.signal=void 0);const x=O.scheduleEventTask(A,y,M,i,a);if(g){C.options.signal=g;const t=()=>x.zone.cancelTask(x);e.call(g,"abort",t,{once:!0}),x.removeAbortListener=()=>g.removeEventListener("abort",t)}return C.target=null,M&&(M.taskData=null),b&&(C.options.once=!0),!Z&&"boolean"==typeof x.options||(x.options=T),x.target=f,x.capture=m,x.eventName=d,E&&(x.originalDelegate=y),u?L.unshift(x):L.push(x),s?f:void 0}};return O[s]=z(A,v,M,x,b),N&&(O[g]=z(N,m,(function(t){return N.call(C.target,C.eventName,t.invoke,C.options)}),x,b,!0)),O[u]=function(){const e=this||t;let r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));const o=arguments[2],i=!!o&&("boolean"==typeof o||o.capture),a=arguments[1];if(!a)return L.apply(this,arguments);if(c&&!c(L,a,e,arguments))return;const s=Y[r];let u;s&&(u=s[i?h:_]);const l=u&&e[u];if(l)for(let t=0;t<l.length;t++){const n=l[t];if(U(n,a)){if(l.splice(t,1),n.isRemoved=!0,0===l.length&&(n.allRemoved=!0,e[u]=null,!i&&"string"==typeof r)){e[y+"ON_PROPERTY"+r]=null}return n.zone.cancelTask(n),b?e:void 0}}return L.apply(this,arguments)},O[f]=function(){const e=this||t;let r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));const o=[],i=$(e,P?P(r):r);for(let t=0;t<i.length;t++){const e=i[t];let n=e.originalDelegate?e.originalDelegate:e.callback;o.push(n)}return o},O[d]=function(){const e=this||t;let r=arguments[0];if(r){n&&n.transferEventName&&(r=n.transferEventName(r));const t=Y[r];if(t){const n=t[_],o=t[h],i=e[n],a=e[o];if(i){const t=i.slice();for(let e=0;e<t.length;e++){const n=t[e];let o=n.originalDelegate?n.originalDelegate:n.callback;this[u].call(this,r,o,n.options)}}if(a){const t=a.slice();for(let e=0;e<t.length;e++){const n=t[e];let o=n.originalDelegate?n.originalDelegate:n.callback;this[u].call(this,r,o,n.options)}}}}else{const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=t[e],r=q.exec(n);let o=r&&r[1];o&&"removeListener"!==o&&this[d].call(this,o)}this[d].call(this,"removeListener")}if(b)return this},B(O[s],A),B(O[u],L),D&&B(O[d],D),I&&B(O[f],I),!0}let C=[];for(let t=0;t<n.length;t++)C[t]=P(n[t],r);return C}function $(t,e){if(!e){const n=[];for(let r in t){const o=q.exec(r);let i=o&&o[1];if(i&&(!e||i===e)){const e=t[r];if(e)for(let t=0;t<e.length;t++)n.push(e[t])}}return n}let n=Y[e];n||(K(e),n=Y[e]);const r=t[n[_]],o=t[n[h]];return r?o?r.concat(o):r.slice():o?o.slice():[]}function J(t,e){const n=t.Event;n&&n.prototype&&e.patchMethod(n.prototype,"stopImmediatePropagation",(t=>function(e,n){e[W]=!0,t&&t.apply(e,n)}))}const tt=T("zoneTask");function et(t,e,n,r){let o=null,i=null;n+=r;const a={};function s(e){const n=e.data;n.args[0]=function(){return e.invoke.apply(this,arguments)};const r=o.apply(t,n.args);return H(r)?n.handleId=r:(n.handle=r,n.isRefreshable=F(r.refresh)),e}function u(e){const{handle:n,handleId:r}=e.data;return i.call(t,null!=n?n:r)}o=x(t,e+=r,(n=>function(o,i){var c;if(F(i[0])){const t={isRefreshable:!1,isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?i[1]||0:void 0,args:i},n=i[0];i[0]=function(){try{return n.apply(this,arguments)}finally{const{handle:e,handleId:n,isPeriodic:r,isRefreshable:o}=t;!r&&!o&&(n?delete a[n]:e&&(e[tt]=null))}};const o=v(e,i[0],t,s,u);if(!o)return o;const{handleId:l,handle:p,isRefreshable:f,isPeriodic:d}=o.data;if(l)a[l]=o;else if(p&&(p[tt]=o,f&&!d)){const t=p.refresh;p.refresh=function(){const{zone:e,state:n}=o;return"notScheduled"===n?(o._state="scheduled",e._updateTaskCount(o,1)):"running"===n&&(o._state="scheduling"),t.call(this)}}return null!=(c=null!=p?p:l)?c:o}return n.apply(t,i)})),i=x(t,n,(e=>function(n,r){const o=r[0];let i;H(o)?(i=a[o],delete a[o]):(i=null==o?void 0:o[tt],i?o[tt]=null:i=o),null!=i&&i.type?i.cancelFn&&i.zone.cancelTask(i):e.apply(t,r)}))}function nt(t,e,n){if(!n||0===n.length)return e;const r=n.filter((e=>e.target===t));if(!r||0===r.length)return e;const o=r[0].ignoreProperties;return e.filter((t=>-1===o.indexOf(t)))}function rt(t,e,n,r){if(!t)return;N(t,nt(t,e,n),r)}function ot(t){return Object.getOwnPropertyNames(t).filter((t=>t.startsWith("on")&&t.length>2)).map((t=>t.substring(2)))}function it(t,e){if(w&&!C||Zone[t.symbol("patchEvents")])return;const n=e.__Zone_ignore_on_properties;let r=[];if(P){const t=window;r=r.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const e=function(){try{const t=m.navigator.userAgent;if(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/"))return!0}catch(t){}return!1}()?[{target:t,ignoreProperties:["error"]}]:[];rt(t,ot(t),n&&n.concat(e),a(t))}r=r.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let t=0;t<r.length;t++){const o=e[r[t]];o&&o.prototype&&rt(o.prototype,ot(o.prototype),n)}}function at(t){t.__load_patch("ZoneAwarePromise",((t,e,n)=>{const r=Object.getOwnPropertyDescriptor,o=Object.defineProperty;const i=n.symbol,a=[],s=!1!==t[i("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],u=i("Promise"),c=i("then");n.onUnhandledError=t=>{if(n.showUncaughtError()){const e=t&&t.rejection;e?console.error("Unhandled Promise rejection:",e instanceof Error?e.message:e,"; Zone:",t.zone.name,"; Task:",t.task&&t.task.source,"; Value:",e,e instanceof Error?e.stack:void 0):console.error(t)}},n.microtaskDrainDone=()=>{for(;a.length;){const t=a.shift();try{t.zone.runGuarded((()=>{throw t.throwOriginal?t.rejection:t}))}catch(t){p(t)}}};const l=i("unhandledPromiseRejectionHandler");function p(t){n.onUnhandledError(t);try{const n=e[l];"function"==typeof n&&n.call(this,t)}catch(t){}}function f(t){return t&&t.then}function d(t){return t}function h(t){return N.reject(t)}const _=i("state"),y=i("value"),E=i("finally"),v=i("parentPromiseValue"),T=i("parentPromiseState"),g=null,m=!0,b=!1;function O(t,e){return n=>{try{P(t,e,n)}catch(e){P(t,!1,e)}}}const S=function(){let t=!1;return function(e){return function(){t||(t=!0,e.apply(null,arguments))}}},R="Promise resolved with itself",w=i("currentTaskTrace");function P(t,r,i){const u=S();if(t===i)throw new TypeError(R);if(t[_]===g){let c=null;try{("object"==typeof i||"function"==typeof i)&&(c=i&&i.then)}catch(e){return u((()=>{P(t,!1,e)}))(),t}if(r!==b&&i instanceof N&&i.hasOwnProperty(_)&&i.hasOwnProperty(y)&&i[_]!==g)A(i),P(t,i[_],i[y]);else if(r!==b&&"function"==typeof c)try{c.call(i,u(O(t,r)),u(O(t,!1)))}catch(e){u((()=>{P(t,!1,e)}))()}else{t[_]=r;const u=t[y];if(t[y]=i,t[E]===E&&r===m&&(t[_]=t[T],t[y]=t[v]),r===b&&i instanceof Error){const t=e.currentTask&&e.currentTask.data&&e.currentTask.data.__creationTrace__;t&&o(i,w,{configurable:!0,enumerable:!1,writable:!0,value:t})}for(let e=0;e<u.length;)L(t,u[e++],u[e++],u[e++],u[e++]);if(0==u.length&&r==b){t[_]=0;let r=i;try{throw new Error("Uncaught (in promise): "+function(t){if(t&&t.toString===Object.prototype.toString)return(t.constructor&&t.constructor.name||"")+": "+JSON.stringify(t);return t?t.toString():Object.prototype.toString.call(t)}(i)+(i&&i.stack?"\n"+i.stack:""))}catch(t){r=t}s&&(r.throwOriginal=!0),r.rejection=i,r.promise=t,r.zone=e.current,r.task=e.currentTask,a.push(r),n.scheduleMicroTask()}}}return t}const C=i("rejectionHandledHandler");function A(t){if(0===t[_]){try{const n=e[C];n&&"function"==typeof n&&n.call(this,{rejection:t[y],promise:t})}catch(t){}t[_]=b;for(let e=0;e<a.length;e++)t===a[e].promise&&a.splice(e,1)}}function L(t,e,n,r,o){A(t);const i=t[_],a=i?"function"==typeof r?r:d:"function"==typeof o?o:h;e.scheduleMicroTask("Promise.then",(()=>{try{const r=t[y],o=!!n&&E===n[E];o&&(n[v]=r,n[T]=i);const s=e.run(a,void 0,o&&a!==h&&a!==d?[]:[r]);P(n,!0,s)}catch(t){P(n,!1,t)}}),n)}const I=function(){},D=t.AggregateError;class N{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(t){return t instanceof N?t:P(new this(null),m,t)}static reject(t){return P(new this(null),b,t)}static withResolvers(){const t={};return t.promise=new N(((e,n)=>{t.resolve=e,t.reject=n})),t}static any(t){if(!t||"function"!=typeof t[Symbol.iterator])return Promise.reject(new D([],"All promises were rejected"));const e=[];let n=0;try{for(let r of t)n++,e.push(N.resolve(r))}catch(t){return Promise.reject(new D([],"All promises were rejected"))}if(0===n)return Promise.reject(new D([],"All promises were rejected"));let r=!1;const o=[];return new N(((t,i)=>{for(let a=0;a<e.length;a++)e[a].then((e=>{r||(r=!0,t(e))}),(t=>{o.push(t),n--,0===n&&(r=!0,i(new D(o,"All promises were rejected")))}))}))}static race(t){let e,n,r=new this(((t,r)=>{e=t,n=r}));function o(t){e(t)}function i(t){n(t)}for(let e of t)f(e)||(e=this.resolve(e)),e.then(o,i);return r}static all(t){return N.allWithCallback(t)}static allSettled(t){return(this&&this.prototype instanceof N?this:N).allWithCallback(t,{thenCallback:t=>({status:"fulfilled",value:t}),errorCallback:t=>({status:"rejected",reason:t})})}static allWithCallback(t,e){let n,r,o=new this(((t,e)=>{n=t,r=e})),i=2,a=0;const s=[];for(let o of t){f(o)||(o=this.resolve(o));const t=a;try{o.then((r=>{s[t]=e?e.thenCallback(r):r,i--,0===i&&n(s)}),(o=>{e?(s[t]=e.errorCallback(o),i--,0===i&&n(s)):r(o)}))}catch(t){r(t)}i++,a++}return i-=2,0===i&&n(s),o}constructor(t){const e=this;if(!(e instanceof N))throw new Error("Must be an instanceof Promise.");e[_]=g,e[y]=[];try{const n=S();t&&t(n(O(e,m)),n(O(e,b)))}catch(t){P(e,!1,t)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return N}then(t,n){var r;let o=null==(r=this.constructor)?void 0:r[Symbol.species];(!o||"function"!=typeof o)&&(o=this.constructor||N);const i=new o(I),a=e.current;return this[_]==g?this[y].push(a,i,t,n):L(this,a,i,t,n),i}catch(t){return this.then(null,t)}finally(t){var n;let r=null==(n=this.constructor)?void 0:n[Symbol.species];(!r||"function"!=typeof r)&&(r=N);const o=new r(I);o[E]=E;const i=e.current;return this[_]==g?this[y].push(i,o,t,t):L(this,i,o,t,t),o}}N.resolve=N.resolve,N.reject=N.reject,N.race=N.race,N.all=N.all;const k=t[u]=t.Promise;t.Promise=N;const M=i("thenPatched");function U(t){const e=t.prototype,n=r(e,"then");if(n&&(!1===n.writable||!n.configurable))return;const o=e.then;e[c]=o,t.prototype.then=function(t,e){return new N(((t,e)=>{o.call(this,t,e)})).then(t,e)},t[M]=!0}return n.patchThen=U,k&&(U(k),x(t,"fetch",(t=>function(t){return function(e,n){let r=t.apply(e,n);if(r instanceof N)return r;let o=r.constructor;return o[M]||U(o),r}}(t)))),Promise[e.__symbol__("uncaughtPromiseErrors")]=a,N}))}function st(t,e,n,r,o){const i=Zone.__symbol__(r);if(e[i])return;const a=e[i]=e[r];e[r]=function(i,s,u){return s&&s.prototype&&o.forEach((function(e){const o=`${n}.${r}::`+e,i=s.prototype;try{if(i.hasOwnProperty(e)){const n=t.ObjectGetOwnPropertyDescriptor(i,e);n&&n.value?(n.value=t.wrapWithCurrentZone(n.value,o),t._redefineProperty(s.prototype,e,n)):i[e]&&(i[e]=t.wrapWithCurrentZone(i[e],o))}else i[e]&&(i[e]=t.wrapWithCurrentZone(i[e],o))}catch(t){}})),a.call(e,i,s,u)},t.attachOriginToPatched(e[r],a)}const ut=function(){const n=globalThis,r=!0===n[e("forceDuplicateZoneCheck")];if(n.Zone&&(r||"function"!=typeof n.Zone.__symbol__))throw new Error("Zone already loaded.");return null!=n.Zone||(n.Zone=function(){const n=t.performance;function r(t){n&&n.mark&&n.mark(t)}function o(t,e){n&&n.measure&&n.measure(t,e)}r("Zone");const i=class n{static assertZonePatched(){if(t.Promise!==A.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let t=n.current;for(;t.parent;)t=t.parent;return t}static get current(){return I.zone}static get currentTask(){return D}static __load_patch(i,a,s=!1){if(A.hasOwnProperty(i)){const n=!0===t[e("forceDuplicateZoneCheck")];if(!s&&n)throw Error("Already loaded patch: "+i)}else if(!t["__Zone_disable_"+i]){const e="Zone:"+i;r(e),A[i]=a(t,n,L),o(e,e)}}get parent(){return this._parent}get name(){return this._name}constructor(t,e){this._parent=t,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new u(this,this._parent&&this._parent._zoneDelegate,e)}get(t){const e=this.getZoneWith(t);if(e)return e._properties[t]}getZoneWith(t){let e=this;for(;e;){if(e._properties.hasOwnProperty(t))return e;e=e._parent}return null}fork(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}wrap(t,e){if("function"!=typeof t)throw new Error("Expecting function got: "+t);const n=this._zoneDelegate.intercept(this,t,e),r=this;return function(){return r.runGuarded(n,this,arguments,e)}}run(t,e,n,r){I={parent:I,zone:this};try{return this._zoneDelegate.invoke(this,t,e,n,r)}finally{I=I.parent}}runGuarded(t,e=null,n,r){I={parent:I,zone:this};try{try{return this._zoneDelegate.invoke(this,t,e,n,r)}catch(t){if(this._zoneDelegate.handleError(this,t))throw t}}finally{I=I.parent}}runTask(t,e,n){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||T).name+"; Execution: "+this.name+")");const r=t,{type:o,data:{isPeriodic:i=!1,isRefreshable:a=!1}={}}=t;if(t.state===g&&(o===C||o===P))return;const s=t.state!=O;s&&r._transitionTo(O,b);const u=D;D=r,I={parent:I,zone:this};try{o==P&&t.data&&!i&&!a&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,r,e,n)}catch(t){if(this._zoneDelegate.handleError(this,t))throw t}}finally{const e=t.state;if(e!==g&&e!==R)if(o==C||i||a&&e===m)s&&r._transitionTo(b,O,m);else{const t=r._zoneDelegates;this._updateTaskCount(r,-1),s&&r._transitionTo(g,O,g),a&&(r._zoneDelegates=t)}I=I.parent,D=u}}scheduleTask(t){if(t.zone&&t.zone!==this){let e=this;for(;e;){if(e===t.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${t.zone.name}`);e=e.parent}}t._transitionTo(m,g);const e=[];t._zoneDelegates=e,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(e){throw t._transitionTo(R,m,g),this._zoneDelegate.handleError(this,e),e}return t._zoneDelegates===e&&this._updateTaskCount(t,1),t.state==m&&t._transitionTo(b,m),t}scheduleMicroTask(t,e,n,r){return this.scheduleTask(new c(w,t,e,n,r,void 0))}scheduleMacroTask(t,e,n,r,o){return this.scheduleTask(new c(P,t,e,n,r,o))}scheduleEventTask(t,e,n,r,o){return this.scheduleTask(new c(C,t,e,n,r,o))}cancelTask(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||T).name+"; Execution: "+this.name+")");if(t.state===b||t.state===O){t._transitionTo(S,b,O);try{this._zoneDelegate.cancelTask(this,t)}catch(e){throw t._transitionTo(R,S),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(t,-1),t._transitionTo(g,S),t.runCount=-1,t}}_updateTaskCount(t,e){const n=t._zoneDelegates;-1==e&&(t._zoneDelegates=null);for(let r=0;r<n.length;r++)n[r]._updateTaskCount(t.type,e)}};i.__symbol__=e;let a=i;const s={name:"",onHasTask:(t,e,n,r)=>t.hasTask(n,r),onScheduleTask:(t,e,n,r)=>t.scheduleTask(n,r),onInvokeTask:(t,e,n,r,o,i)=>t.invokeTask(n,r,o,i),onCancelTask:(t,e,n,r)=>t.cancelTask(n,r)};class u{get zone(){return this._zone}constructor(t,e,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=t,this._parentDelegate=e,this._forkZS=n&&(n&&n.onFork?n:e._forkZS),this._forkDlgt=n&&(n.onFork?e:e._forkDlgt),this._forkCurrZone=n&&(n.onFork?this._zone:e._forkCurrZone),this._interceptZS=n&&(n.onIntercept?n:e._interceptZS),this._interceptDlgt=n&&(n.onIntercept?e:e._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this._zone:e._interceptCurrZone),this._invokeZS=n&&(n.onInvoke?n:e._invokeZS),this._invokeDlgt=n&&(n.onInvoke?e:e._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this._zone:e._invokeCurrZone),this._handleErrorZS=n&&(n.onHandleError?n:e._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?e:e._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this._zone:e._handleErrorCurrZone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:e._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?e:e._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this._zone:e._scheduleTaskCurrZone),this._invokeTaskZS=n&&(n.onInvokeTask?n:e._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?e:e._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this._zone:e._invokeTaskCurrZone),this._cancelTaskZS=n&&(n.onCancelTask?n:e._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?e:e._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this._zone:e._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const r=n&&n.onHasTask,o=e&&e._hasTaskZS;(r||o)&&(this._hasTaskZS=r?n:s,this._hasTaskDlgt=e,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,n.onScheduleTask||(this._scheduleTaskZS=s,this._scheduleTaskDlgt=e,this._scheduleTaskCurrZone=this._zone),n.onInvokeTask||(this._invokeTaskZS=s,this._invokeTaskDlgt=e,this._invokeTaskCurrZone=this._zone),n.onCancelTask||(this._cancelTaskZS=s,this._cancelTaskDlgt=e,this._cancelTaskCurrZone=this._zone))}fork(t,e){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,t,e):new a(t,e)}intercept(t,e,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,t,e,n):e}invoke(t,e,n,r,o){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,t,e,n,r,o):e.apply(n,r)}handleError(t,e){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,t,e)}scheduleTask(t,e){let n=e;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,t,e),n||(n=e);else if(e.scheduleFn)e.scheduleFn(e);else{if(e.type!=w)throw new Error("Task is missing scheduleFn.");E(e)}return n}invokeTask(t,e,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,t,e,n,r):e.callback.apply(n,r)}cancelTask(t,e){let n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,t,e);else{if(!e.cancelFn)throw Error("Task is not cancelable");n=e.cancelFn(e)}return n}hasTask(t,e){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,t,e)}catch(e){this.handleError(t,e)}}_updateTaskCount(t,e){const n=this._taskCounts,r=n[t],o=n[t]=r+e;if(o<0)throw new Error("More tasks executed then were scheduled.");if(0==r||0==o){const e={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:t};this.hasTask(this._zone,e)}}}class c{constructor(e,n,r,o,i,a){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=e,this.source=n,this.data=o,this.scheduleFn=i,this.cancelFn=a,!r)throw new Error("callback is not defined");this.callback=r;const s=this;e===C&&o&&o.useG?this.invoke=c.invokeTask:this.invoke=function(){return c.invokeTask.call(t,s,this,arguments)}}static invokeTask(t,e,n){t||(t=this),N++;try{return t.runCount++,t.zone.runTask(t,e,n)}finally{1==N&&v(),N--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(g,m)}_transitionTo(t,e,n){if(this._state!==e&&this._state!==n)throw new Error(`${this.type} '${this.source}': can not transition to '${t}', expecting state '${e}'${n?" or '"+n+"'":""}, was '${this._state}'.`);this._state=t,t==g&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const l=e("setTimeout"),p=e("Promise"),f=e("then");let d,h=[],_=!1;function y(e){if(d||t[p]&&(d=t[p].resolve(0)),d){let t=d[f];t||(t=d.then),t.call(d,e)}else t[l](e,0)}function E(t){0===N&&0===h.length&&y(v),t&&h.push(t)}function v(){if(!_){for(_=!0;h.length;){const t=h;h=[];for(let e=0;e<t.length;e++){const n=t[e];try{n.zone.runTask(n,null,null)}catch(t){L.onUnhandledError(t)}}}L.microtaskDrainDone(),_=!1}}const T={name:"NO ZONE"},g="notScheduled",m="scheduling",b="scheduled",O="running",S="canceling",R="unknown",w="microTask",P="macroTask",C="eventTask",A={},L={symbol:e,currentZoneFrame:()=>I,onUnhandledError:k,microtaskDrainDone:k,scheduleMicroTask:E,showUncaughtError:()=>!a[e("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:k,patchMethod:()=>k,bindArguments:()=>[],patchThen:()=>k,patchMacroTask:()=>k,patchEventPrototype:()=>k,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>k,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>k,wrapWithCurrentZone:()=>k,filterProperties:()=>[],attachOriginToPatched:()=>k,_redefineProperty:()=>k,patchCallbacks:()=>k,nativeScheduleMicroTask:y};let I={parent:null,zone:new a(null,null)},D=null,N=0;function k(){}return o("Zone","Zone"),a}()),n.Zone}();return at(ct=ut),function(t){t.__load_patch("toString",(t=>{const e=Function.prototype.toString,n=T("OriginalDelegate"),r=T("Promise"),o=T("Error"),i=function(){if("function"==typeof this){const i=this[n];if(i)return"function"==typeof i?e.call(i):Object.prototype.toString.call(i);if(this===Promise){const n=t[r];if(n)return e.call(n)}if(this===Error){const n=t[o];if(n)return e.call(n)}}return e.call(this)};i[n]=e,Function.prototype.toString=i;const a=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":a.call(this)}}))}(ct),function(t){t.__load_patch("util",((t,e,o)=>{const i=ot(t);o.patchOnProperties=N,o.patchMethod=x,o.bindArguments=O,o.patchMacroTask=U;const a=e.__symbol__("BLACK_LISTED_EVENTS"),l=e.__symbol__("UNPATCHED_EVENTS");t[l]&&(t[a]=t[l]),t[a]&&(e[a]=e[l]=t[a]),o.patchEventPrototype=J,o.patchEventTarget=Q,o.isIEOrEdge=z,o.ObjectDefineProperty=r,o.ObjectGetOwnPropertyDescriptor=n,o.ObjectCreate=s,o.ArraySlice=u,o.patchClass=M,o.wrapWithCurrentZone=E,o.filterProperties=nt,o.attachOriginToPatched=B,o._redefineProperty=Object.defineProperty,o.patchCallbacks=st,o.getGlobalObjects=()=>({globalSources:X,zoneSymbolEventNames:Y,eventNames:i,isBrowser:P,isMix:C,isNode:w,TRUE_STR:h,FALSE_STR:_,ZONE_SYMBOL_PREFIX:y,ADD_EVENT_LISTENER_STR:c,REMOVE_EVENT_LISTENER_STR:p})}))}(ct),function(t){t.__load_patch("legacy",(e=>{const n=e[t.__symbol__("legacyPatch")];n&&n()})),t.__load_patch("timers",(t=>{const e="set",n="clear";et(t,e,n,"Timeout"),et(t,e,n,"Interval"),et(t,e,n,"Immediate")})),t.__load_patch("requestAnimationFrame",(t=>{et(t,"request","cancel","AnimationFrame"),et(t,"mozRequest","mozCancel","AnimationFrame"),et(t,"webkitRequest","webkitCancel","AnimationFrame")})),t.__load_patch("blocking",((t,e)=>{const n=["alert","prompt","confirm"];for(let r=0;r<n.length;r++){x(t,n[r],((n,r,o)=>function(r,i){return e.current.run(n,t,i,o)}))}})),t.__load_patch("EventTarget",((t,e,n)=>{(function(t,e){e.patchEventPrototype(t,e)})(t,n),function(t,e){if(Zone[e.symbol("patchEventTarget")])return;const{eventNames:n,zoneSymbolEventNames:r,TRUE_STR:o,FALSE_STR:i,ZONE_SYMBOL_PREFIX:a}=e.getGlobalObjects();for(let t=0;t<n.length;t++){const e=n[t],s=a+(e+i),u=a+(e+o);r[e]={},r[e][i]=s,r[e][o]=u}const s=t.EventTarget;s&&s.prototype&&e.patchEventTarget(t,e,[s&&s.prototype])}(t,n);const r=t.XMLHttpRequestEventTarget;r&&r.prototype&&n.patchEventTarget(t,n,[r.prototype])})),t.__load_patch("MutationObserver",((t,e,n)=>{M("MutationObserver"),M("WebKitMutationObserver")})),t.__load_patch("IntersectionObserver",((t,e,n)=>{M("IntersectionObserver")})),t.__load_patch("FileReader",((t,e,n)=>{M("FileReader")})),t.__load_patch("on_property",((t,e,n)=>{it(n,t)})),t.__load_patch("customElements",((t,e,n)=>{!function(t,e){const{isBrowser:n,isMix:r}=e.getGlobalObjects();if(!n&&!r||!t.customElements||!("customElements"in t))return;e.patchCallbacks(e,t.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"])}(t,n)})),t.__load_patch("XHR",((t,e)=>{!function(t){const u=t.XMLHttpRequest;if(!u)return;const c=u.prototype;let l=c[f],p=c[d];if(!l){const e=t.XMLHttpRequestEventTarget;if(e){const t=e.prototype;l=t[f],p=t[d]}}const h="readystatechange",_="scheduled";function y(t){const r=t.data,a=r.target;a[i]=!1,a[s]=!1;const u=a[o];l||(l=a[f],p=a[d]),u&&p.call(a,h,u);const c=a[o]=()=>{if(a.readyState===a.DONE)if(!r.aborted&&a[i]&&t.state===_){const n=a[e.__symbol__("loadfalse")];if(0!==a.status&&n&&n.length>0){const o=t.invoke;t.invoke=function(){const n=a[e.__symbol__("loadfalse")];for(let e=0;e<n.length;e++)n[e]===t&&n.splice(e,1);!r.aborted&&t.state===_&&o.call(t)},n.push(t)}else t.invoke()}else!r.aborted&&!1===a[i]&&(a[s]=!0)};return l.call(a,h,c),a[n]||(a[n]=t),S.apply(a,r.args),a[i]=!0,t}function E(){}function g(t){const e=t.data;return e.aborted=!0,R.apply(e.target,e.args)}const m=x(c,"open",(()=>function(t,e){return t[r]=0==e[2],t[a]=e[1],m.apply(t,e)})),b=T("fetchTaskAborting"),O=T("fetchTaskScheduling"),S=x(c,"send",(()=>function(t,n){if(!0===e.current[O]||t[r])return S.apply(t,n);{const e={target:t,url:t[a],isPeriodic:!1,args:n,aborted:!1},r=v("XMLHttpRequest.send",E,e,y,g);t&&!0===t[s]&&!e.aborted&&r.state===_&&r.invoke()}})),R=x(c,"abort",(()=>function(t,r){const o=function(t){return t[n]}(t);if(o&&"string"==typeof o.type){if(null==o.cancelFn||o.data&&o.data.aborted)return;o.zone.cancelTask(o)}else if(!0===e.current[b])return R.apply(t,r)}))}(t);const n=T("xhrTask"),r=T("xhrSync"),o=T("xhrListener"),i=T("xhrScheduled"),a=T("xhrURL"),s=T("xhrErrorBeforeScheduled")})),t.__load_patch("geolocation",(t=>{t.navigator&&t.navigator.geolocation&&function(t,e){const r=t.constructor.name;for(let o=0;o<e.length;o++){const i=e[o],a=t[i];if(a){if(!S(n(t,i)))continue;t[i]=(t=>{const e=function(){return t.apply(this,O(arguments,r+"."+i))};return B(e,t),e})(a)}}}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])})),t.__load_patch("PromiseRejectionEvent",((t,e)=>{function n(e){return function(n){$(t,e).forEach((r=>{const o=t.PromiseRejectionEvent;if(o){const t=new o(e,{promise:n.promise,reason:n.rejection});r.invoke(t)}}))}}t.PromiseRejectionEvent&&(e[T("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),e[T("rejectionHandledHandler")]=n("rejectionhandled"))})),t.__load_patch("queueMicrotask",((t,e,n)=>{!function(t,e){e.patchMethod(t,"queueMicrotask",(t=>function(t,e){Zone.current.scheduleMicroTask("queueMicrotask",e[0])}))}(t,n)}))}(ut),ee;var ct}();var ne=L("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function re(t){return t.setValue(ne,!0)}function oe(t){return!0===t.getValue(ne)}var ie="baggage";function ae(t){return t.getAllEntries().map((function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2),n=e[0],r=e[1],o=encodeURIComponent(n)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(o+=";"+r.metadata.toString()),o}))}function se(t){var e=t.split(";");if(!(e.length<=0)){var n=e.shift();if(n){var r=n.indexOf("=");if(!(r<=0)){var o,i=decodeURIComponent(n.substring(0,r).trim()),a=decodeURIComponent(n.substring(r+1).trim());return e.length>0&&(o=function(t){return"string"!=typeof t&&(C.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:P,toString:function(){return t}}}(e.join(";"))),{key:i,value:a,metadata:o}}}}}var ue=function(){function t(){}return t.prototype.inject=function(t,e,n){var r=qt.getBaggage(t);if(r&&!oe(t)){var o=function(t){return t.reduce((function(t,e){var n=t+(""!==t?",":"")+e;return n.length>8192?t:n}),"")}(ae(r).filter((function(t){return t.length<=4096})).slice(0,180));o.length>0&&n.set(e,ie,o)}},t.prototype.extract=function(t,e,n){var r=n.get(e,ie),o=Array.isArray(r)?r.join(","):r;if(!o)return t;var i={};return 0===o.length?t:(o.split(",").forEach((function(t){var e=se(t);if(e){var n={value:e.value};e.metadata&&(n.metadata=e.metadata),i[e.key]=n}})),0===Object.entries(i).length?t:qt.setBaggage(t,qt.createBaggage(i)))},t.prototype.fields=function(){return[ie]},t}(),ce=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},le=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function pe(t){var e,n,r={};if("object"!=typeof t||null==t)return r;try{for(var o=ce(Object.entries(t)),i=o.next();!i.done;i=o.next()){var a=le(i.value,2),s=a[0],u=a[1];fe(s)?de(u)?Array.isArray(u)?r[s]=u.slice():r[s]=u:Nt.warn("Invalid attribute value set for key: "+s):Nt.warn("Invalid attribute key: "+s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function fe(t){return"string"==typeof t&&t.length>0}function de(t){return null==t||(Array.isArray(t)?function(t){var e,n,r;try{for(var o=ce(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(null!=a){if(!r){if(he(a)){r=typeof a;continue}return!1}if(typeof a!==r)return!1}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return!0}(t):he(t))}function he(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}var _e,ye=function(t){Nt.error(function(t){return"string"==typeof t?t:JSON.stringify(function(t){for(var e={},n=t;null!==n;)Object.getOwnPropertyNames(n).forEach((function(t){if(!e[t]){var r=n[t];r&&(e[t]=String(r))}})),n=Object.getPrototypeOf(n);return e}(t))}(t))};function Ee(t){try{ye(t)}catch(t){}}!function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}(_e||(_e={}));var ve=["OTEL_SDK_DISABLED"];function Te(t){return ve.indexOf(t)>-1}var ge=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function me(t){return ge.indexOf(t)>-1}var be=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_SEMCONV_STABILITY_OPT_IN"];function Oe(t){return be.indexOf(t)>-1}var Se=1/0,Re=128,we={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:m.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Se,OTEL_ATTRIBUTE_COUNT_LIMIT:Re,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Se,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Re,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Se,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:Re,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:_e.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative",OTEL_SEMCONV_STABILITY_OPT_IN:[]};function Pe(t,e,n){if(void 0!==n[t]){var r=String(n[t]);e[t]="true"===r.toLowerCase()}}function Ce(t,e,n,r,o){if(void 0===r&&(r=-1/0),void 0===o&&(o=1/0),void 0!==n[t]){var i=Number(n[t]);isNaN(i)||(e[t]=i<r?r:i>o?o:i)}}function Ae(t,e,n,r){void 0===r&&(r=",");var o=n[t];"string"==typeof o&&(e[t]=o.split(r).map((function(t){return t.trim()})))}var Le={ALL:m.ALL,VERBOSE:m.VERBOSE,DEBUG:m.DEBUG,INFO:m.INFO,WARN:m.WARN,ERROR:m.ERROR,NONE:m.NONE};function Ie(t,e,n){var r=n[t];if("string"==typeof r){var o=Le[r.toUpperCase()];null!=o&&(e[t]=o)}}function De(t){var e={};for(var n in we){var r=n;if("OTEL_LOG_LEVEL"===r)Ie(r,e,t);else if(Te(r))Pe(r,e,t);else if(me(r))Ce(r,e,t);else if(Oe(r))Ae(r,e,t);else{var o=t[r];null!=o&&(e[r]=String(o))}}return e}var Ne="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{};function ke(){var t=De(Ne);return Object.assign({},we,t)}function Me(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function xe(t){for(var e=new Uint8Array(t.length/2),n=0,r=0;r<t.length;r+=2){var o=Me(t.charCodeAt(r)),i=Me(t.charCodeAt(r+1));e[n++]=o<<4|i}return e}var Ue,Be,je=performance,Ge="exception.type",ze="exception.message",Fe="telemetry.sdk.name",He="telemetry.sdk.language",Ze="telemetry.sdk.version",Ve="service.name",Ye="url.full",Xe="user_agent.original",qe=((Ue={})[Fe]="opentelemetry",Ue["process.runtime.name"]="browser",Ue[He]="webjs",Ue[Ze]="1.27.0",Ue),We=Math.pow(10,6),Ke=Math.pow(10,9);function Qe(t){var e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*We)]}function $e(){var t=je.timeOrigin;if("number"!=typeof t){var e=je;t=e.timing&&e.timing.fetchStart}return t}function Je(t){return 1e6*t[0]+t[1]/1e3}function tn(t){return Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]}function en(t){return tn(t)||"number"==typeof t||t instanceof Date}function nn(t,e){var n=[t[0]+e[0],t[1]+e[1]];return n[1]>=Ke&&(n[1]-=Ke,n[0]+=1),n}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(Be||(Be={}));var rn=function(){function t(t){var e;void 0===t&&(t={}),this._propagators=null!==(e=t.propagators)&&void 0!==e?e:[],this._fields=Array.from(new Set(this._propagators.map((function(t){return"function"==typeof t.fields?t.fields():[]})).reduce((function(t,e){return t.concat(e)}),[])))}return t.prototype.inject=function(t,e,n){var r,o;try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._propagators),a=i.next();!a.done;a=i.next()){var s=a.value;try{s.inject(t,e,n)}catch(t){Nt.warn("Failed to inject with "+s.constructor.name+". Err: "+t.message)}}}catch(t){r={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},t.prototype.extract=function(t,e,n){return this._propagators.reduce((function(t,r){try{return r.extract(t,e,n)}catch(t){Nt.warn("Failed to extract with "+r.constructor.name+". Err: "+t.message)}return t}),t)},t.prototype.fields=function(){return this._fields.slice()},t}(),on="[_0-9a-z-*/]",an=new RegExp("^(?:"+("[a-z]"+on+"{0,255}")+"|"+("[a-z0-9]"+on+"{0,240}@[a-z]"+on+"{0,13}")+")$"),sn=/^[ -~]{0,255}[!-~]$/,un=/,|=/;var cn=function(){function t(t){this._internalState=new Map,t&&this._parse(t)}return t.prototype.set=function(t,e){var n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,e),n},t.prototype.unset=function(t){var e=this._clone();return e._internalState.delete(t),e},t.prototype.get=function(t){return this._internalState.get(t)},t.prototype.serialize=function(){var t=this;return this._keys().reduce((function(e,n){return e.push(n+"="+t.get(n)),e}),[]).join(",")},t.prototype._parse=function(t){t.length>512||(this._internalState=t.split(",").reverse().reduce((function(t,e){var n=e.trim(),r=n.indexOf("=");if(-1!==r){var o=n.slice(0,r),i=n.slice(r+1,e.length);(function(t){return an.test(t)})(o)&&function(t){return sn.test(t)&&!un.test(t)}(i)&&t.set(o,i)}return t}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}(),ln="traceparent",pn="tracestate",fn=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");var dn=function(){function t(){}return t.prototype.inject=function(t,e,n){var r=Qt.getSpanContext(t);if(r&&!oe(t)&&gt(r)){var o="00-"+r.traceId+"-"+r.spanId+"-0"+Number(r.traceFlags||I.NONE).toString(16);n.set(e,ln,o),r.traceState&&n.set(e,pn,r.traceState.serialize())}},t.prototype.extract=function(t,e,n){var r=n.get(e,ln);if(!r)return t;var o=Array.isArray(r)?r[0]:r;if("string"!=typeof o)return t;var i=function(t){var e=fn.exec(t);return!e||"00"===e[1]&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}(o);if(!i)return t;i.isRemote=!0;var a=n.get(e,pn);if(a){var s=Array.isArray(a)?a.join(","):a;i.traceState=new cn("string"==typeof s?s:void 0)}return Qt.setSpanContext(t,i)},t.prototype.fields=function(){return[ln,pn]},t}(),hn="[object Null]",_n="[object Undefined]",yn=Function.prototype.toString,En=yn.call(Object),vn=function(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object),Tn=Object.prototype,gn=Tn.hasOwnProperty,mn=Symbol?Symbol.toStringTag:void 0,bn=Tn.toString;function On(t){if(!function(t){return null!=t&&"object"==typeof t}(t)||"[object Object]"!==function(t){return null==t?void 0===t?_n:hn:mn&&mn in Object(t)?function(t){var e=gn.call(t,mn),n=t[mn],r=!1;try{t[mn]=void 0,r=!0}catch(t){}var o=bn.call(t);return r&&(e?t[mn]=n:delete t[mn]),o}(t):function(t){return bn.call(t)}(t)}(t))return!1;var e=vn(t);if(null===e)return!0;var n=gn.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&yn.call(n)===En}function Sn(t){return Pn(t)?t.slice():t}function Rn(t,e,n,r){var o;if(void 0===n&&(n=0),!(n>20)){if(n++,Ln(t)||Ln(e)||Cn(e))o=Sn(e);else if(Pn(t)){if(o=t.slice(),Pn(e))for(var i=0,a=e.length;i<a;i++)o.push(Sn(e[i]));else if(An(e))for(i=0,a=(s=Object.keys(e)).length;i<a;i++){o[u=s[i]]=Sn(e[u])}}else if(An(t))if(An(e)){if(!function(t,e){return!(!On(t)||!On(e))}(t,e))return e;o=Object.assign({},t);var s;for(i=0,a=(s=Object.keys(e)).length;i<a;i++){var u,c=e[u=s[i]];if(Ln(c))void 0===c?delete o[u]:o[u]=c;else{var l=o[u],p=c;if(wn(t,u,r)||wn(e,u,r))delete o[u];else{if(An(l)&&An(p)){var f=r.get(l)||[],d=r.get(p)||[];f.push({obj:t,key:u}),d.push({obj:e,key:u}),r.set(l,f),r.set(p,d)}o[u]=Rn(o[u],c,n,r)}}}}else o=e;return o}}function wn(t,e,n){for(var r=n.get(t[e])||[],o=0,i=r.length;o<i;o++){var a=r[o];if(a.key===e&&a.obj===t)return!0}return!1}function Pn(t){return Array.isArray(t)}function Cn(t){return"function"==typeof t}function An(t){return!Ln(t)&&!Pn(t)&&!Cn(t)&&"object"==typeof t}function Ln(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||void 0===t||t instanceof Date||t instanceof RegExp||null===t}var In=function(){function t(){var t=this;this._promise=new Promise((function(e,n){t._resolve=e,t._reject=n}))}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(t){this._resolve(t)},t.prototype.reject=function(t){this._reject(t)},t}(),Dn=function(){function t(t,e){this._callback=t,this._that=e,this._isCalled=!1,this._deferred=new In}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)(r||!(o in e))&&(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([this._that],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(n),!1))).then((function(t){return e._deferred.resolve(t)}),(function(t){return e._deferred.reject(t)}))}catch(t){this._deferred.reject(t)}}return this._deferred.promise},t}();var Nn={_export:function(t,e){return new Promise((function(n){Dt.with(re(Dt.active()),(function(){t.export(e,(function(t){n(t)}))}))}))}},kn=function(){function t(t){void 0===t&&(t={}),this._sendingPromises=[],this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new Dn(this._shutdown,this),this._concurrencyLimit="number"==typeof t.concurrencyLimit?t.concurrencyLimit:30}return t.prototype.export=function(t,e){this._shutdownOnce.isCalled?e({code:Be.FAILED,error:new Error("Exporter has been shutdown")}):this._sendingPromises.length>=this._concurrencyLimit?e({code:Be.FAILED,error:new Error("Concurrent export limit reached")}):this._export(t).then((function(){e({code:Be.SUCCESS})})).catch((function(t){e({code:Be.FAILED,error:t})}))},t.prototype._export=function(t){var e=this;return new Promise((function(n,r){try{Nt.debug("items to be sent",t),e.send(t,n,r)}catch(t){r(t)}}))},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype.forceFlush=function(){return Promise.all(this._sendingPromises).then((function(){}))},t.prototype._shutdown=function(){return Nt.debug("shutdown started"),this.onShutdown(),this.forceFlush()},t}(),Mn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xn=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.name="OTLPExporterError",o.data=r,o.code=n,o}return Mn(e,t),e}(Error);function Un(t){if(null!=t){var e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?1e3*e:-1;var n=new Date(t).getTime()-Date.now();return n>=0?n:0}}var Bn=function(){function t(t){this._parameters=t}return t.prototype.send=function(t,e){var n=this;return new Promise((function(r){var o=new XMLHttpRequest;o.timeout=e,o.open("POST",n._parameters.url),Object.entries(n._parameters.headers).forEach((function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2),n=e[0],r=e[1];o.setRequestHeader(n,r)})),o.ontimeout=function(t){r({status:"failure",error:new Error("XHR request timed out")})},o.onreadystatechange=function(){o.status>=200&&o.status<=299?(Nt.debug("XHR success"),r({status:"success"})):o.status&&function(t){return[429,502,503,504].includes(t)}(o.status)?r({status:"retryable",retryInMillis:Un(o.getResponseHeader("Retry-After"))}):0!==o.status&&r({status:"failure",error:new Error("XHR request failed with non-retryable status")})},o.onabort=function(){r({status:"failure",error:new Error("XHR request aborted")})},o.onerror=function(){r({status:"failure",error:new Error("XHR request errored")})},o.send(new Blob([t],{type:n._parameters.headers["Content-Type"]}))}))},t.prototype.shutdown=function(){},t}();function jn(t){return new Bn(t)}var Gn=function(){function t(t){this._params=t}return t.prototype.send=function(t){var e=this;return new Promise((function(n){navigator.sendBeacon(e._params.url,new Blob([t],{type:e._params.blobType}))?(Nt.debug("SendBeacon success"),n({status:"success"})):n({status:"failure",error:new Error("SendBeacon failed")})}))},t.prototype.shutdown=function(){},t}();var zn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Fn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};var Hn=function(){function t(t){this._transport=t}return t.prototype.retry=function(t,e,n){var r=this;return new Promise((function(o,i){setTimeout((function(){r._transport.send(t,e).then(o,i)}),n)}))},t.prototype.send=function(t,e){var n;return zn(this,void 0,void 0,(function(){var r,o,i,a,s,u,c;return Fn(this,(function(l){switch(l.label){case 0:return r=Date.now()+e,[4,this._transport.send(t,e)];case 1:o=l.sent(),i=5,a=1e3,l.label=2;case 2:return"retryable"===o.status&&i>0?(i--,s=Math.max(Math.min(a,5e3)+(.4*Math.random()-.2),0),a*=1.5,u=null!==(n=o.retryInMillis)&&void 0!==n?n:s,c=r-Date.now(),u>c?[2,o]:[4,this.retry(t,c,u)]):[3,4];case 3:return o=l.sent(),[3,2];case 4:return[2,o]}}))}))},t.prototype.shutdown=function(){return this._transport.shutdown()},t}();function Zn(t){if(!Number.isNaN(t)&&Number.isFinite(t)&&t>0)return t;throw new Error("Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '"+t+"')")}function Vn(t){void 0===t&&(t={});var e={};return Object.entries(t).forEach((function(t){var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2),r=n[0],o=n[1];void 0!==o?e[r]=String(o):Nt.warn('Header "'+r+'" has invalid value ('+o+") and will be ignored")})),e}var Yn=function(){return Yn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Yn.apply(this,arguments)};function Xn(t,e,n){var r=Yn({},n),o={};return null!=e&&Object.assign(o,e),null!=t&&Object.assign(o,t),Object.assign(o,r)}function qn(t){if(null!=t)try{return new URL(t),t}catch(e){throw new Error("Configuration: Could not parse user-provided export URL: '"+t+"'")}}function Wn(t,e,n){var r,o;return Yn(Yn({},function(t,e,n){var r,o,i,a,s,u;return{timeoutMillis:Zn(null!==(o=null!==(r=t.timeoutMillis)&&void 0!==r?r:e.timeoutMillis)&&void 0!==o?o:n.timeoutMillis),concurrencyLimit:null!==(a=null!==(i=t.concurrencyLimit)&&void 0!==i?i:e.concurrencyLimit)&&void 0!==a?a:n.concurrencyLimit,compression:null!==(u=null!==(s=t.compression)&&void 0!==s?s:e.compression)&&void 0!==u?u:n.compression}}(t,e,n)),{headers:Xn(Vn(t.headers),e.headers,n.headers),url:null!==(o=null!==(r=qn(t.url))&&void 0!==r?r:e.url)&&void 0!==o?o:n.url})}var Kn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qn=function(t){function e(e,n,r,o){void 0===e&&(e={});var i=t.call(this,e)||this;i._serializer=n;var a=!!e.headers||"function"!=typeof navigator.sendBeacon,s=Wn({url:e.url,timeoutMillis:e.timeoutMillis,headers:e.headers,concurrencyLimit:e.concurrencyLimit},{},function(t,e){return Yn(Yn({},{timeoutMillis:1e4,concurrencyLimit:30,compression:"none"}),{headers:t,url:"http://localhost:4318/"+e})}(r,o));return i._timeoutMillis=s.timeoutMillis,i._concurrencyLimit=s.concurrencyLimit,i._transport=a?function(t){return new Hn(t.transport)}({transport:jn({headers:s.headers,url:s.url})}):function(t){return new Gn(t)}({url:s.url,blobType:s.headers["Content-Type"]}),i}return Kn(e,t),e.prototype.onShutdown=function(){},e.prototype.send=function(t,e,n){var r=this;if(this._shutdownOnce.isCalled)Nt.debug("Shutdown already started. Cannot send objects");else{var o=this._serializer.serializeRequest(t);if(null!=o){var i=this._transport.send(o,this._timeoutMillis).then((function(t){"success"===t.status?e():"failure"===t.status&&t.error?n(t.error):"retryable"===t.status?n(new xn("Export failed with retryable status")):n(new xn("Export failed with unknown error"))}),n);this._sendingPromises.push(i);var a=function(){var t=r._sendingPromises.indexOf(i);r._sendingPromises.splice(t,1)};i.then(a,a)}else n(new Error("Could not serialize message"))}},e}(kn);function $n(t){var e=BigInt(1e9);return BigInt(t[0])*e+BigInt(t[1])}function Jn(t){return function(t){return{low:Number(BigInt.asUintN(32,t)),high:Number(BigInt.asUintN(32,t>>BigInt(32)))}}($n(t))}var tr="undefined"!=typeof BigInt?function(t){return $n(t).toString()}:function(t){return t[0]*Ke+t[1]};function er(t){return t}function nr(t){if(void 0!==t)return xe(t)}var rr={encodeHrTime:Jn,encodeSpanContext:xe,encodeOptionalSpanContext:nr};function or(t){return{name:t.name,version:t.version}}function ir(t){return Object.keys(t).map((function(e){return ar(e,t[e])}))}function ar(t,e){return{key:t,value:sr(e)}}function sr(t){var e=typeof t;return"string"===e?{stringValue:t}:"number"===e?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:"boolean"===e?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(sr)}}:"object"===e&&null!=t?{kvlistValue:{values:Object.entries(t).map((function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2);return ar(e[0],e[1])}))}}:{}}function ur(t,e){var n,r=t.spanContext(),o=t.status;return{traceId:e.encodeSpanContext(r.traceId),spanId:e.encodeSpanContext(r.spanId),parentSpanId:e.encodeOptionalSpanContext(t.parentSpanId),traceState:null===(n=r.traceState)||void 0===n?void 0:n.serialize(),name:t.name,kind:null==t.kind?0:t.kind+1,startTimeUnixNano:e.encodeHrTime(t.startTime),endTimeUnixNano:e.encodeHrTime(t.endTime),attributes:ir(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map((function(t){return function(t,e){return{attributes:t.attributes?ir(t.attributes):[],name:t.name,timeUnixNano:e.encodeHrTime(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}(t,e)})),droppedEventsCount:t.droppedEventsCount,status:{code:o.code,message:o.message},links:t.links.map((function(t){return function(t,e){var n;return{attributes:t.attributes?ir(t.attributes):[],spanId:e.encodeSpanContext(t.context.spanId),traceId:e.encodeSpanContext(t.context.traceId),traceState:null===(n=t.context.traceState)||void 0===n?void 0:n.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}(t,e)})),droppedLinksCount:t.droppedLinksCount}}function cr(t){return{attributes:ir(t.attributes),droppedAttributesCount:0}}var lr=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function pr(t,e){var n=function(t){var e,n;if(void 0===t)return rr;var r=null===(e=t.useLongBits)||void 0===e||e,o=null!==(n=t.useHex)&&void 0!==n&&n;return{encodeHrTime:r?Jn:tr,encodeSpanContext:o?er:xe,encodeOptionalSpanContext:o?er:nr}}(e);return{resourceSpans:dr(t,n)}}function fr(t){var e,n,r=new Map;try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),i=o.next();!i.done;i=o.next()){var a=i.value,s=r.get(a.resource);s||(s=new Map,r.set(a.resource,s));var u=a.instrumentationLibrary.name+"@"+(a.instrumentationLibrary.version||"")+":"+(a.instrumentationLibrary.schemaUrl||""),c=s.get(u);c||(c=[],s.set(u,c)),c.push(a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function dr(t,e){for(var n=[],r=fr(t).entries(),o=r.next();!o.done;){for(var i=lr(o.value,2),a=i[0],s=[],u=i[1].values(),c=u.next();!c.done;){var l=c.value;if(l.length>0){var p=l.map((function(t){return ur(t,e)}));s.push({scope:or(l[0].instrumentationLibrary),spans:p,schemaUrl:l[0].instrumentationLibrary.schemaUrl})}c=u.next()}var f={resource:cr(a),scopeSpans:s,schemaUrl:void 0};n.push(f),o=r.next()}return n}var hr=function(){return hr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},hr.apply(this,arguments)},_r=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))},yr=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Er=function(){function t(t,e){var n,r=this;this._attributes=t,this.asyncAttributesPending=null!=e,this._syncAttributes=null!==(n=this._attributes)&&void 0!==n?n:{},this._asyncAttributesPromise=null==e?void 0:e.then((function(t){return r._attributes=Object.assign({},r._attributes,t),r.asyncAttributesPending=!1,t}),(function(t){return Nt.debug("a resource's async attributes promise rejected: %s",t),r.asyncAttributesPending=!1,{}}))}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t(((e={})["service.name"]="unknown_service",e[He]=qe[He],e[Fe]=qe[Fe],e[Ze]=qe[Ze],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var t;return this.asyncAttributesPending&&Nt.error("Accessing resource attributes before async attributes settled"),null!==(t=this._attributes)&&void 0!==t?t:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return _r(this,void 0,void 0,(function(){return yr(this,(function(t){switch(t.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.merge=function(e){var n,r=this;if(!e)return this;var o=hr(hr({},this._syncAttributes),null!==(n=e._syncAttributes)&&void 0!==n?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(o);var i=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then((function(t){var n,o=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2),i=o[0],a=o[1];return hr(hr(hr(hr({},r._syncAttributes),i),null!==(n=e._syncAttributes)&&void 0!==n?n:e.attributes),a)}));return new t(o,i)},t.EMPTY=new t({}),t}(),vr={serializeRequest:function(t){var e=pr(t,{useHex:!0,useLongBits:!1});return(new TextEncoder).encode(JSON.stringify(e))},deserializeResponse:function(t){var e=new TextDecoder;return JSON.parse(e.decode(t))}},Tr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gr=function(t){function e(e){return void 0===e&&(e={}),t.call(this,e,vr,{"Content-Type":"application/json"},"v1/traces")||this}return Tr(e,t),e}(Qn),mr=L("OpenTelemetry Context Key B3 Debug Flag"),br="b3",Or="x-b3-traceid",Sr="x-b3-spanid",Rr="x-b3-sampled",wr="x-b3-flags",Pr=new Set([!0,"true","True","1",1]),Cr=new Set([!1,"false","False","0",0]);function Ar(t,e,n){return function(t){return Array.isArray(t)?t[0]:t}(e.get(t,n))}function Lr(t,e){return"1"===Ar(t,e,wr)?"1":void 0}var Ir=function(){function t(){}return t.prototype.inject=function(t,e,n){var r=Qt.getSpanContext(t);if(r&&gt(r)&&!oe(t)){var o=t.getValue(mr);n.set(e,Or,r.traceId),n.set(e,Sr,r.spanId),"1"===o?n.set(e,wr,o):void 0!==r.traceFlags&&n.set(e,Rr,(I.SAMPLED&r.traceFlags)===I.SAMPLED?"1":"0")}},t.prototype.extract=function(t,e,n){var r=function(t,e){var n=Ar(t,e,Or);return"string"==typeof n?n.padStart(32,"0"):""}(e,n),o=function(t,e){var n=Ar(t,e,Sr);return"string"==typeof n?n:""}(e,n),i=function(t,e){var n=Ar(t,e,Rr);return"1"===Lr(t,e)||Pr.has(n)?I.SAMPLED:void 0===n||Cr.has(n)?I.NONE:void 0}(e,n),a=Lr(e,n);return vt(r)&&Tt(o)&&function(t){return t===I.SAMPLED||t===I.NONE}(i)?(t=t.setValue(mr,a),Qt.setSpanContext(t,{traceId:r,spanId:o,isRemote:!0,traceFlags:i})):t},t.prototype.fields=function(){return[Or,Sr,wr,Rr,"x-b3-parentspanid"]},t}(),Dr=/((?:[0-9a-f]{16}){1,2})-([0-9a-f]{16})(?:-([01d](?![0-9a-f])))?(?:-([0-9a-f]{16}))?/,Nr="0".repeat(16),kr=new Set(["d","1"]);var Mr,xr=function(){function t(){}return t.prototype.inject=function(t,e,n){var r=Qt.getSpanContext(t);if(r&&gt(r)&&!oe(t)){var o=t.getValue(mr)||1&r.traceFlags,i=r.traceId+"-"+r.spanId+"-"+o;n.set(e,br,i)}},t.prototype.extract=function(t,e,n){var r=n.get(e,br),o=Array.isArray(r)?r[0]:r;if("string"!=typeof o)return t;var i=o.match(Dr);if(!i)return t;var a=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(i,4),s=a[1],u=a[2],c=a[3],l=function(t){return 32===t.length?t:""+Nr+t}(s);if(!vt(l)||!Tt(u))return t;var p=function(t){return t&&kr.has(t)?I.SAMPLED:I.NONE}(c);return"d"===c&&(t=t.setValue(mr,c)),Qt.setSpanContext(t,{traceId:l,spanId:u,isRemote:!0,traceFlags:p})},t.prototype.fields=function(){return[br]},t}();!function(t){t[t.SINGLE_HEADER=0]="SINGLE_HEADER",t[t.MULTI_HEADER=1]="MULTI_HEADER"}(Mr||(Mr={}));var Ur,Br=function(){function t(t){void 0===t&&(t={}),this._b3MultiPropagator=new Ir,this._b3SinglePropagator=new xr,t.injectEncoding===Mr.MULTI_HEADER?(this._inject=this._b3MultiPropagator.inject,this._fields=this._b3MultiPropagator.fields()):(this._inject=this._b3SinglePropagator.inject,this._fields=this._b3SinglePropagator.fields())}return t.prototype.inject=function(t,e,n){oe(t)||this._inject(t,e,n)},t.prototype.extract=function(t,e,n){var r=n.get(e,br);return(Array.isArray(r)?r[0]:r)?this._b3SinglePropagator.extract(t,e,n):this._b3MultiPropagator.extract(t,e,n)},t.prototype.fields=function(){return this._fields},t}(),jr=function(){return jr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},jr.apply(this,arguments)},Gr=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},zr=function(){function t(t,e,n,r,o,i,a,s,u,c){void 0===a&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:wt.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=r,this.parentSpanId=i,this.kind=o,this.links=a;var l=Date.now();this._performanceStartTime=je.now(),this._performanceOffset=l-(this._performanceStartTime+$e()),this._startTimeProvided=null!=s,this.startTime=this._getTime(null!=s?s:l),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,null!=c&&this.setAttributes(c),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,e)}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(t,e){return null==e||this._isSpanEnded()?this:0===t.length?(Nt.warn("Invalid attribute key: "+t),this):de(e)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(e),this):(Nt.warn("Invalid attribute value set for key: "+t),this)},t.prototype.setAttributes=function(t){var e,n;try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(t)),o=r.next();!o.done;o=r.next()){var i=Gr(o.value,2),a=i[0],s=i[1];this.setAttribute(a,s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return this},t.prototype.addEvent=function(t,e,n){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return Nt.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(0===this._droppedEventsCount&&Nt.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),en(e)&&(en(n)||(n=e),e=void 0);var r=pe(e);return this.events.push({name:t,attributes:r,time:this._getTime(n),droppedAttributesCount:0}),this},t.prototype.addLink=function(t){return this.links.push(t),this},t.prototype.addLinks=function(t){var e;return(e=this.links).push.apply(e,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)(r||!(o in e))&&(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],Gr(t),!1)),this},t.prototype.setStatus=function(t){return this._isSpanEnded()||(this.status=jr({},t),null!=this.status.message&&"string"!=typeof t.message&&(Nt.warn("Dropping invalid status.message of type '"+typeof t.message+"', expected 'string'"),delete this.status.message)),this},t.prototype.updateName=function(t){return this._isSpanEnded()||(this.name=t),this},t.prototype.end=function(t){this._isSpanEnded()?Nt.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once."):(this._ended=!0,this.endTime=this._getTime(t),this._duration=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return r<0&&(n-=1,r+=Ke),[n,r]}(this.startTime,this.endTime),this._duration[0]<0&&(Nt.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&Nt.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this))},t.prototype._getTime=function(t){if("number"==typeof t&&t<je.now())return function(t){return nn(Qe($e()),Qe("number"==typeof t?t:je.now()))}(t+this._performanceOffset);if("number"==typeof t)return Qe(t);if(t instanceof Date)return Qe(t.getTime());if(tn(t))return t;if(this._startTimeProvided)return Qe(Date.now());var e=je.now()-this._performanceStartTime;return nn(this.startTime,Qe(e))},t.prototype.isRecording=function(){return!1===this._ended},t.prototype.recordException=function(t,e){var n={};"string"==typeof t?n[ze]=t:t&&(t.code?n[Ge]=t.code.toString():t.name&&(n[Ge]=t.name),t.message&&(n[ze]=t.message),t.stack&&(n["exception.stacktrace"]=t.stack)),n[Ge]||n[ze]?this.addEvent("exception",n,e):Nt.warn("Failed to record an exception "+t)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&Nt.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(t,e){return t.length<=e?t:t.substr(0,e)},t.prototype._truncateToSize=function(t){var e=this,n=this._attributeValueLengthLimit;return n<=0?(Nt.warn("Attribute value limit must be positive, got "+n),t):"string"==typeof t?this._truncateToLimitUtil(t,n):Array.isArray(t)?t.map((function(t){return"string"==typeof t?e._truncateToLimitUtil(t,n):t})):t},t}();!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Ur||(Ur={}));var Fr=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Ur.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}(),Hr=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Ur.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}(),Zr=function(){function t(t){var e,n,r,o;this._root=t.root,this._root||(Ee(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Hr),this._remoteParentSampled=null!==(e=t.remoteParentSampled)&&void 0!==e?e:new Hr,this._remoteParentNotSampled=null!==(n=t.remoteParentNotSampled)&&void 0!==n?n:new Fr,this._localParentSampled=null!==(r=t.localParentSampled)&&void 0!==r?r:new Hr,this._localParentNotSampled=null!==(o=t.localParentNotSampled)&&void 0!==o?o:new Fr}return t.prototype.shouldSample=function(t,e,n,r,o,i){var a=Qt.getSpanContext(t);return a&&gt(a)?a.isRemote?a.traceFlags&I.SAMPLED?this._remoteParentSampled.shouldSample(t,e,n,r,o,i):this._remoteParentNotSampled.shouldSample(t,e,n,r,o,i):a.traceFlags&I.SAMPLED?this._localParentSampled.shouldSample(t,e,n,r,o,i):this._localParentNotSampled.shouldSample(t,e,n,r,o,i):this._root.shouldSample(t,e,n,r,o,i)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}(),Vr=function(){function t(t){void 0===t&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(4294967295*this._ratio)}return t.prototype.shouldSample=function(t,e){return{decision:vt(e)&&this._accumulate(e)<this._upperBound?Ur.RECORD_AND_SAMPLED:Ur.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(t){return"number"!=typeof t||isNaN(t)?0:t>=1?1:t<=0?0:t},t.prototype._accumulate=function(t){for(var e=0,n=0;n<t.length/8;n++){var r=8*n;e=(e^parseInt(t.slice(r,r+8),16))>>>0}return e},t}(),Yr=ke(),Xr=_e.AlwaysOn;function qr(){var t=ke();return{sampler:Wr(Yr),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:t.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:t.OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:t.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:t.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:t.OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:t.OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:t.OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:t.OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function Wr(t){switch(void 0===t&&(t=ke()),t.OTEL_TRACES_SAMPLER){case _e.AlwaysOn:return new Hr;case _e.AlwaysOff:return new Fr;case _e.ParentBasedAlwaysOn:return new Zr({root:new Hr});case _e.ParentBasedAlwaysOff:return new Zr({root:new Fr});case _e.TraceIdRatio:return new Vr(Kr(t));case _e.ParentBasedTraceIdRatio:return new Zr({root:new Vr(Kr(t))});default:return Nt.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+Xr+'".'),new Hr}}function Kr(t){if(void 0===t.OTEL_TRACES_SAMPLER_ARG||""===t.OTEL_TRACES_SAMPLER_ARG)return Nt.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(Nt.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to 1."),1):e<0||e>1?(Nt.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to 1."),1):e}function Qr(t){var e,n,r,o,i,a,s,u,c,l,p,f,d=Object.assign({},t.spanLimits),h=De(Ne);return d.attributeCountLimit=null!==(a=null!==(i=null!==(o=null!==(n=null===(e=t.spanLimits)||void 0===e?void 0:e.attributeCountLimit)&&void 0!==n?n:null===(r=t.generalLimits)||void 0===r?void 0:r.attributeCountLimit)&&void 0!==o?o:h.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==i?i:h.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==a?a:Re,d.attributeValueLengthLimit=null!==(f=null!==(p=null!==(l=null!==(u=null===(s=t.spanLimits)||void 0===s?void 0:s.attributeValueLengthLimit)&&void 0!==u?u:null===(c=t.generalLimits)||void 0===c?void 0:c.attributeValueLengthLimit)&&void 0!==l?l:h.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==p?p:h.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==f?f:Se,Object.assign({},t,{spanLimits:d})}var $r=function(){function t(t,e){this._exporter=t,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=ke();this._maxExportBatchSize="number"==typeof(null==e?void 0:e.maxExportBatchSize)?e.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==e?void 0:e.maxQueueSize)?e.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==e?void 0:e.scheduledDelayMillis)?e.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==e?void 0:e.exportTimeoutMillis)?e.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Dn(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Nt.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(t,e){},t.prototype.onEnd=function(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&I.SAMPLED&&this._addToBuffer(t)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var t=this;return Promise.resolve().then((function(){return t.onShutdown()})).then((function(){return t._flushAll()})).then((function(){return t._exporter.shutdown()}))},t.prototype._addToBuffer=function(t){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&Nt.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(Nt.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()},t.prototype._flushAll=function(){var t=this;return new Promise((function(e,n){for(var r=[],o=0,i=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize);o<i;o++)r.push(t._flushOneBatch());Promise.all(r).then((function(){e()})).catch(n)}))},t.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((function(e,n){var r=setTimeout((function(){n(new Error("Timeout"))}),t._exportTimeoutMillis);Dt.with(re(Dt.active()),(function(){var o;t._finishedSpans.length<=t._maxExportBatchSize?(o=t._finishedSpans,t._finishedSpans=[]):o=t._finishedSpans.splice(0,t._maxExportBatchSize);for(var i=function(){return t._exporter.export(o,(function(t){var o;clearTimeout(r),t.code===Be.SUCCESS?e():n(null!==(o=t.error)&&void 0!==o?o:new Error("BatchSpanProcessor: span export failed"))}))},a=null,s=0,u=o.length;s<u;s++){var c=o[s];c.resource.asyncAttributesPending&&c.resource.waitForAsyncAttributes&&(null!=a||(a=[]),a.push(c.resource.waitForAsyncAttributes()))}null===a?i():Promise.all(a).then(i,(function(t){Ee(t),n(t)}))}))}))},t.prototype._maybeStartTimer=function(){var t=this;if(!this._isExporting){var e=function(){t._isExporting=!0,t._flushOneBatch().finally((function(){t._isExporting=!1,t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())})).catch((function(e){t._isExporting=!1,Ee(e)}))};if(this._finishedSpans.length>=this._maxExportBatchSize)return e();void 0===this._timer&&(this._timer=setTimeout((function(){return e()}),this._scheduledDelayMillis),this._timer)}},t.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},t}(),Jr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),to=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.onInit(n),r}return Jr(e,t),e.prototype.onInit=function(t){var e=this;!0!==(null==t?void 0:t.disableAutoFlushOnDocumentHide)&&"undefined"!=typeof document&&(this._visibilityChangeListener=function(){"hidden"===document.visibilityState&&e.forceFlush()},this._pageHideListener=function(){e.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e}($r),eo=function(){this.generateTraceId=ro(16),this.generateSpanId=ro(8)},no=Array(32);function ro(t){return function(){for(var e=0;e<2*t;e++)no[e]=Math.floor(16*Math.random())+48,no[e]>=58&&(no[e]+=39);return String.fromCharCode.apply(null,no.slice(0,2*t))}}var oo,io=function(){function t(t,e,n){this._tracerProvider=n;var r=function(t){var e={sampler:Wr()},n=qr(),r=Object.assign({},n,e,t);return r.generalLimits=Object.assign({},n.generalLimits,t.generalLimits||{}),r.spanLimits=Object.assign({},n.spanLimits,t.spanLimits||{}),r}(e);this._sampler=r.sampler,this._generalLimits=r.generalLimits,this._spanLimits=r.spanLimits,this._idGenerator=e.idGenerator||new eo,this.resource=n.resource,this.instrumentationLibrary=t}return t.prototype.startSpan=function(t,e,n){var r,o,i;void 0===e&&(e={}),void 0===n&&(n=Dt.active()),e.root&&(n=Qt.deleteSpan(n));var a=Qt.getSpan(n);if(oe(n))return Nt.debug("Instrumentation suppressed, returning Noop Span"),Qt.wrapSpanContext(st);var s,u,c,l=null==a?void 0:a.spanContext(),p=this._idGenerator.generateSpanId();l&&Qt.isSpanContextValid(l)?(s=l.traceId,u=l.traceState,c=l.spanId):s=this._idGenerator.generateTraceId();var f=null!==(r=e.kind)&&void 0!==r?r:Rt.INTERNAL,d=(null!==(o=e.links)&&void 0!==o?o:[]).map((function(t){return{context:t.context,attributes:pe(t.attributes)}})),h=pe(e.attributes),_=this._sampler.shouldSample(n,s,t,f,h,d);u=null!==(i=_.traceState)&&void 0!==i?i:u;var y={traceId:s,spanId:p,traceFlags:_.decision===St.RECORD_AND_SAMPLED?I.SAMPLED:I.NONE,traceState:u};if(_.decision===St.NOT_RECORD)return Nt.debug("Recording is off, propagating context in a non-recording span"),Qt.wrapSpanContext(y);var E=pe(Object.assign(h,_.attributes));return new zr(this,n,t,y,f,c,d,e.startTime,void 0,E)},t.prototype.startActiveSpan=function(t,e,n,r){var o,i,a;if(!(arguments.length<2)){2===arguments.length?a=e:3===arguments.length?(o=e,a=n):(o=e,i=n,a=r);var s=null!=i?i:Dt.active(),u=this.startSpan(t,o,s),c=Qt.setSpan(s,u);return Dt.with(c,a,void 0,u)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}(),ao=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},so=function(){function t(t){this._spanProcessors=t}return t.prototype.forceFlush=function(){var t,e,n=[];try{for(var r=ao(this._spanProcessors),o=r.next();!o.done;o=r.next()){var i=o.value;n.push(i.forceFlush())}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return new Promise((function(t){Promise.all(n).then((function(){t()})).catch((function(e){Ee(e||new Error("MultiSpanProcessor: forceFlush failed")),t()}))}))},t.prototype.onStart=function(t,e){var n,r;try{for(var o=ao(this._spanProcessors),i=o.next();!i.done;i=o.next()){i.value.onStart(t,e)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.onEnd=function(t){var e,n;try{for(var r=ao(this._spanProcessors),o=r.next();!o.done;o=r.next()){o.value.onEnd(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.shutdown=function(){var t,e,n=[];try{for(var r=ao(this._spanProcessors),o=r.next();!o.done;o=r.next()){var i=o.value;n.push(i.shutdown())}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return new Promise((function(t,e){Promise.all(n).then((function(){t()}),e)}))},t}(),uo=function(){function t(){}return t.prototype.onStart=function(t,e){},t.prototype.onEnd=function(t){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}();!function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"}(oo||(oo={}));var co,lo=function(){function t(t){var e;void 0===t&&(t={}),this._registeredSpanProcessors=[],this._tracers=new Map;var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.shift(),r=new WeakMap;t.length>0;)n=Rn(n,t.shift(),0,r);return n}({},qr(),Qr(t));this.resource=null!==(e=n.resource)&&void 0!==e?e:Er.empty(),this.resource=Er.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var r=this._buildExporterFromEnv();if(void 0!==r){var o=new to(r);this.activeSpanProcessor=o}else this.activeSpanProcessor=new uo}return t.prototype.getTracer=function(t,e,n){var r=t+"@"+(e||"")+":"+((null==n?void 0:n.schemaUrl)||"");return this._tracers.has(r)||this._tracers.set(r,new io({name:t,version:e,schemaUrl:null==n?void 0:n.schemaUrl},this._config,this)),this._tracers.get(r)},t.prototype.addSpanProcessor=function(t){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((function(t){return Nt.error("Error while trying to shutdown current span processor",t)})),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new so(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(t){void 0===t&&(t={}),Qt.setGlobalTracerProvider(this),void 0===t.propagator&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&Dt.setGlobalContextManager(t.contextManager),t.propagator&&qt.setGlobalPropagator(t.propagator)},t.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,e=this._registeredSpanProcessors.map((function(e){return new Promise((function(n){var r,o=setTimeout((function(){n(new Error("Span processor did not completed within timeout period of "+t+" ms")),r=oo.timeout}),t);e.forceFlush().then((function(){clearTimeout(o),r!==oo.timeout&&(r=oo.resolved,n(r))})).catch((function(t){clearTimeout(o),r=oo.error,n(t)}))}))}));return new Promise((function(t,n){Promise.all(e).then((function(e){var r=e.filter((function(t){return t!==oo.resolved}));r.length>0?n(r):t()})).catch((function(t){return n([t])}))}))},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(t){var e;return null===(e=this.constructor._registeredPropagators.get(t))||void 0===e?void 0:e()},t.prototype._getSpanExporter=function(t){var e;return null===(e=this.constructor._registeredExporters.get(t))||void 0===e?void 0:e()},t.prototype._buildPropagatorFromEnv=function(){var t=this,e=Array.from(new Set(ke().OTEL_PROPAGATORS)),n=e.map((function(e){var n=t._getPropagator(e);return n||Nt.warn('Propagator "'+e+'" requested through environment variable is unavailable.'),n})).reduce((function(t,e){return e&&t.push(e),t}),[]);if(0!==n.length)return 1===e.length?n[0]:new rn({propagators:n})},t.prototype._buildExporterFromEnv=function(){var t=ke().OTEL_TRACES_EXPORTER;if("none"!==t&&""!==t){var e=this._getSpanExporter(t);return e||Nt.error('Exporter "'+t+'" requested through environment variable is unavailable.'),e}},t._registeredPropagators=new Map([["tracecontext",function(){return new dn}],["baggage",function(){return new ue}]]),t._registeredExporters=new Map,t}(),po=function(){function t(){}return t.prototype.export=function(t,e){return this._sendSpans(t,e)},t.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype._exportInfo=function(t){var e;return{resource:{attributes:t.resource.attributes},instrumentationScope:t.instrumentationLibrary,traceId:t.spanContext().traceId,parentId:t.parentSpanId,traceState:null===(e=t.spanContext().traceState)||void 0===e?void 0:e.serialize(),name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:Je(t.startTime),duration:Je(t.duration),attributes:t.attributes,status:t.status,events:t.events,links:t.links}},t.prototype._sendSpans=function(t,e){var n,r;try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),i=o.next();!i.done;i=o.next()){var a=i.value;console.dir(this._exportInfo(a),{depth:3})}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}if(e)return e({code:Be.SUCCESS})},t}(),fo=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))},ho=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},_o=function(){function t(t){this._exporter=t,this._shutdownOnce=new Dn(this._shutdown,this),this._unresolvedExports=new Set}return t.prototype.forceFlush=function(){return fo(this,void 0,void 0,(function(){return ho(this,(function(t){switch(t.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return t.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype.onStart=function(t,e){},t.prototype.onEnd=function(t){var e,n,r=this;if(!this._shutdownOnce.isCalled&&t.spanContext().traceFlags&I.SAMPLED){var o=function(){return Nn._export(r._exporter,[t]).then((function(t){var e;t.code!==Be.SUCCESS&&Ee(null!==(e=t.error)&&void 0!==e?e:new Error("SimpleSpanProcessor: span export failed (status "+t+")"))})).catch((function(t){Ee(t)}))};if(t.resource.asyncAttributesPending){var i=null===(n=(e=t.resource).waitForAsyncAttributes)||void 0===n?void 0:n.call(e).then((function(){return null!=i&&r._unresolvedExports.delete(i),o()}),(function(t){return Ee(t)}));null!=i&&this._unresolvedExports.add(i)}else o()}},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return this._exporter.shutdown()},t}(),yo=function(){function t(){this._enabled=!1,this._currentContext=N}return t.prototype._bindFunction=function(t,e){void 0===t&&(t=N);var n=this,r=function(){for(var r=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return n.with(t,(function(){return e.apply(r,o)}))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),r},t.prototype.active=function(){return this._currentContext},t.prototype.bind=function(t,e){return void 0===t&&(t=this.active()),"function"==typeof e?this._bindFunction(t,e):e},t.prototype.disable=function(){return this._currentContext=N,this._enabled=!1,this},t.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=N),this},t.prototype.with=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var i=this._currentContext;this._currentContext=t||N;try{return e.call.apply(e,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)(r||!(o in e))&&(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([n],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(r),!1))}finally{this._currentContext=i}},t}(),Eo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vo=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;if(e.contextManager)throw"contextManager should be defined in register method not in constructor";if(e.propagator)throw"propagator should be defined in register method not in constructor";return n}return Eo(e,t),e.prototype.register=function(e){void 0===e&&(e={}),void 0===e.contextManager&&(e.contextManager=new yo),e.contextManager&&e.contextManager.enable(),t.prototype.register.call(this,e)},e}(lo);function To(t,e){return e in t}function go(t,e,n,r){var o=void 0,i=void 0;To(n,e)&&"number"==typeof n[e]&&(o=n[e]);var a=co.FETCH_START;if(To(n,a)&&"number"==typeof n[a]&&(i=n[a]),void 0!==o&&void 0!==i&&o>=i)return t.addEvent(e,o),t}function mo(t,e){go(t,co.FETCH_START,e),go(t,co.DOMAIN_LOOKUP_START,e),go(t,co.DOMAIN_LOOKUP_END,e),go(t,co.CONNECT_START,e),To(e,"name")&&e.name.startsWith("https:")&&go(t,co.SECURE_CONNECTION_START,e),go(t,co.CONNECT_END,e),go(t,co.REQUEST_START,e),go(t,co.RESPONSE_START,e),go(t,co.RESPONSE_END,e);var n=e[co.ENCODED_BODY_SIZE];void 0!==n&&t.setAttribute("http.response_content_length",n);var r=e[co.DECODED_BODY_SIZE];void 0!==r&&n!==r&&t.setAttribute("http.response_content_length_uncompressed",r)}!function(t){t.CONNECT_END="connectEnd",t.CONNECT_START="connectStart",t.DECODED_BODY_SIZE="decodedBodySize",t.DOM_COMPLETE="domComplete",t.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",t.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",t.DOM_INTERACTIVE="domInteractive",t.DOMAIN_LOOKUP_END="domainLookupEnd",t.DOMAIN_LOOKUP_START="domainLookupStart",t.ENCODED_BODY_SIZE="encodedBodySize",t.FETCH_START="fetchStart",t.LOAD_EVENT_END="loadEventEnd",t.LOAD_EVENT_START="loadEventStart",t.NAVIGATION_START="navigationStart",t.REDIRECT_END="redirectEnd",t.REDIRECT_START="redirectStart",t.REQUEST_START="requestStart",t.RESPONSE_END="responseEnd",t.RESPONSE_START="responseStart",t.SECURE_CONNECTION_START="secureConnectionStart",t.UNLOAD_EVENT_END="unloadEventEnd",t.UNLOAD_EVENT_START="unloadEventStart"}(co||(co={}));var bo=function(){function t(){}return t.prototype.emit=function(t){},t}(),Oo=new bo,So=function(){function t(){}return t.prototype.getLogger=function(t,e,n){return new bo},t}(),Ro=new So,wo=function(){function t(t,e,n,r){this._provider=t,this.name=e,this.version=n,this.options=r}return t.prototype.emit=function(t){this._getLogger().emit(t)},t.prototype._getLogger=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateLogger(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Oo},t}(),Po=function(){function t(){}return t.prototype.getLogger=function(t,e,n){var r;return null!==(r=this.getDelegateLogger(t,e,n))&&void 0!==r?r:new wo(this,t,e,n)},t.prototype.getDelegate=function(){var t;return null!==(t=this._delegate)&&void 0!==t?t:Ro},t.prototype.setDelegate=function(t){this._delegate=t},t.prototype.getDelegateLogger=function(t,e,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getLogger(t,e,n)},t}(),Co="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},Ao=Symbol.for("io.opentelemetry.js.api.logs"),Lo=Co;var Io,Do,No=function(){function t(){this._proxyLoggerProvider=new Po}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalLoggerProvider=function(t){return Lo[Ao]?this.getLoggerProvider():(Lo[Ao]=function(t,e,n){return function(r){return r===t?e:n}}(1,t,Ro),this._proxyLoggerProvider.setDelegate(t),t)},t.prototype.getLoggerProvider=function(){var t,e;return null!==(e=null===(t=Lo[Ao])||void 0===t?void 0:t.call(Lo,1))&&void 0!==e?e:this._proxyLoggerProvider},t.prototype.getLogger=function(t,e,n){return this.getLoggerProvider().getLogger(t,e,n)},t.prototype.disable=function(){delete Lo[Ao],this._proxyLoggerProvider=new Po},t}(),ko=No.getInstance();var Mo=function(){if(Do)return Io;function t(t){return"function"==typeof t}Do=1;var e=console.error.bind(console);function n(t,e,n){var r=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:r,writable:!0,value:n})}function r(n){n&&n.logger&&(t(n.logger)?e=n.logger:e("new logger isn't a function, not replacing"))}function o(r,o,i){if(r&&r[o]){if(!i)return e("no wrapper function"),void e((new Error).stack);if(t(r[o])&&t(i)){var a=r[o],s=i(a,o);return n(s,"__original",a),n(s,"__unwrap",(function(){r[o]===s&&n(r,o,a)})),n(s,"__wrapped",!0),n(r,o,s),s}e("original object and wrapper must be functions")}else e("no original function "+o+" to wrap")}function i(t,n){return t&&t[n]?t[n].__unwrap?t[n].__unwrap():void e("no original to unwrap to -- has "+n+" already been unwrapped?"):(e("no function to unwrap."),void e((new Error).stack))}return r.wrap=o,r.massWrap=function(t,n,r){if(!t)return e("must provide one or more modules to patch"),void e((new Error).stack);Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(e){o(t,e,r)}))})):e("must provide one or more functions to wrap on modules")},r.unwrap=i,r.massUnwrap=function(t,n){if(!t)return e("must provide one or more modules to patch"),void e((new Error).stack);Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(e){i(t,e)}))})):e("must provide one or more functions to unwrap on modules")},Io=r}(),xo=function(){return xo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},xo.apply(this,arguments)},Uo=function(){function t(t,e,n){this.instrumentationName=t,this.instrumentationVersion=e,this._config={},this._wrap=Mo.wrap,this._unwrap=Mo.unwrap,this._massWrap=Mo.massWrap,this._massUnwrap=Mo.massUnwrap,this.setConfig(n),this._diag=Nt.createComponentLogger({namespace:t}),this._tracer=Qt.getTracer(t,e),this._meter=Bt.getMeter(t,e),this._logger=ko.getLogger(t,e),this._updateMetricInstruments()}return Object.defineProperty(t.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),t.prototype.setMeterProvider=function(t){this._meter=t.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(t.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),t.prototype.setLoggerProvider=function(t){this._logger=t.getLogger(this.instrumentationName,this.instrumentationVersion)},t.prototype.getModuleDefinitions=function(){var t,e=null!==(t=this.init())&&void 0!==t?t:[];return Array.isArray(e)?e:[e]},t.prototype._updateMetricInstruments=function(){},t.prototype.getConfig=function(){return this._config},t.prototype.setConfig=function(t){this._config=xo({enabled:!0},t)},t.prototype.setTracerProvider=function(t){this._tracer=t.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(t.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),t.prototype._runSpanCustomizationHook=function(t,e,n,r){if(t)try{t(n,r)}catch(t){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:e},t)}},t}(),Bo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jo=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o._config.enabled&&o.enable(),o}return Bo(e,t),e}(Uo);function Go(t){const e=window&&window.performance&&performance.getEntriesByType&&[...performance.getEntriesByType(t)];return null!=e?e:[]}var zo=Object.defineProperty,Fo=Object.getOwnPropertySymbols,Ho=Object.prototype.hasOwnProperty,Zo=Object.prototype.propertyIsEnumerable,Vo=(t,e,n)=>e in t?zo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yo=(t,e)=>{for(var n in e||(e={}))Ho.call(e,n)&&Vo(t,n,e[n]);if(Fo)for(var n of Fo(e))Zo.call(e,n)&&Vo(t,n,e[n]);return t};const Xo=class t extends jo{constructor(e){super(t.INSTRUMENTATION_NAME,t.INSTRUMENTATION_VERSION,e)}wrapFetch(){return t=>(e,n)=>{var r,o;let i;const a=e instanceof Request?e.url:e.toString();try{i=new URL(a,location.href)}catch(r){return this._config.provider.isDebug&&console.error("OpenTelemetry:   ",a),t(e,n)}const s=null!=(r=window.__opentelemetry_fetch_urls__)?r:[];let u;for(const[t,e]of Object.entries(s))if(i.href.startsWith(e)){u=t;break}if(!u)return t(e,n);const c=(null!=(o=null==n?void 0:n.method)?o:"GET").toUpperCase(),l=this.tracer.startSpan(u,{startTime:performance.now()});if(!l)return t(e,n);l.setAttribute("http.request.method",c),l.setAttribute(Ye,i.href),l.setAttribute("server.address",i.host),l.setAttribute("url.scheme",i.protocol.replace(":","")),"undefined"!=typeof navigator&&l.setAttribute(Xe,navigator.userAgent);const p=Qt.setSpan(Dt.active(),l);return Dt.with(p,(()=>((t,e,n)=>new Promise(((r,o)=>{var i=t=>{try{s(n.next(t))}catch(t){o(t)}},a=t=>{try{s(n.throw(t))}catch(t){o(t)}},s=t=>t.done?r(t.value):Promise.resolve(t.value).then(i,a);s((n=n.apply(t,e)).next())})))(this,null,(function*(){var r,o,a;try{const o=yield t(e,n);if(!o.ok){const t=null!=(r=yield o.clone().json())?r:{},e=`HttpError: ${o.status}`;this.setError(l,JSON.stringify(t),e)}return this.endSpan(l,o),o}catch(t){throw t&&this.setError(l,null!=(o=t.message)?o:t.toString(),null!=(a=t.name)?a:"Unknown error"),this.endSpan(l,{status:0,statusText:"Error",url:i.href}),t}}))))}}setError(t,e,n){t.setStatus({code:wt.ERROR,message:n}),t.recordException({name:"FetchError",message:e})}endSpan(e,n){var r;e.setAttribute("http.response.status_code",n.status),e.setAttribute("statusText",null!=(r=n.statusText)?r:"");let o=performance.now();setTimeout((()=>{let t=Go("resource");for(const r of t.reverse())if(r.name.startsWith(n.url)){mo(e,r),r.responseEnd;break}e.end(o)}),t.RESOURCE_WAIT_TIME_MS)}init(){}enable(){var t;this.setTracerProvider(this._config.provider.webTracerProvider),function(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped}(fetch)&&this._unwrap(window,"fetch"),window.__opentelemetry_fetch_urls__=null!=(t=window.__opentelemetry_fetch_urls__)?t:{},window.__opentelemetry_fetch_urls__=Yo(Yo({},window.__opentelemetry_fetch_urls__),this._config.urls),this._wrap(window,"fetch",this.wrapFetch())}disable(){this._unwrap(window,"fetch")}};Xo.INSTRUMENTATION_NAME="FetchInstrumentation",Xo.INSTRUMENTATION_VERSION="1.0.0",Xo.RESOURCE_WAIT_TIME_MS=3e3;let qo=Xo;const Wo=class t extends jo{constructor(e){super(t.INSTRUMENTATION_NAME,t.INSTRUMENTATION_VERSION,e)}init(){}enable(){this.setTracerProvider(this._config.provider.webTracerProvider),"complete"===document.readyState?this.asyncLoadWrapper():window.addEventListener("load",this.asyncLoadWrapper.bind(this))}asyncLoadWrapper(){setTimeout((()=>{this.onDocumentLoad()}))}onDocumentLoad(){var t;const e=null!=(t=Go("navigation")[0])?t:null;if(!e)return;const n=this._config.provider.tracer.startSpan("documentLoad",{startTime:e.fetchStart});n.setAttribute(Ye,location.href),n.setAttribute(Xe,navigator.userAgent),go(n,co.DOM_CONTENT_LOADED_EVENT_START,e),go(n,co.DOM_CONTENT_LOADED_EVENT_END,e),go(n,co.DOM_INTERACTIVE,e),go(n,co.DOM_COMPLETE,e),go(n,co.LOAD_EVENT_START,e),go(n,co.LOAD_EVENT_END,e);const r=Go("paint");for(const t of r)n.addEvent(t.name,t.startTime);const o=Go("resource");for(const t of o){if("iframe"===t.initiatorType||"beacon"===t.initiatorType||t.responseEnd>e.loadEventStart)continue;const r=this._config.provider.tracer.startSpan("fetchResource",{startTime:t.fetchStart},Qt.setSpan(Dt.active(),n));mo(r,t),r.setAttribute(Ye,t.name),r.end(t.responseEnd)}n.end(e.loadEventEnd),document.removeEventListener("load",this.asyncLoadWrapper)}};Wo.INSTRUMENTATION_NAME="FetchInstrumentation",Wo.INSTRUMENTATION_VERSION="1.0.0";let Ko=Wo;e.DocumentLoadInstrumentation=Ko,e.FetchInstrumentation=qo,e.OpenTelemetryConfig=class{constructor(){this.isDebug=!1,this.samplingRatio=1}},e.OpenTelemetryProvider=class{constructor(t){this.config=t,this.webTracerProvider=new vo({resource:new Er({[Ve]:t.serviceName}),sampler:new Zr({root:new Vr(t.samplingRatio)})});const e=new gr({url:t.collectorUrl});t.isDebug?(this.webTracerProvider.addSpanProcessor(new _o(e)),this.webTracerProvider.addSpanProcessor(new _o(new po))):this.webTracerProvider.addSpanProcessor(new to(e)),this.webTracerProvider.register({propagator:new Br,contextManager:new te})}get tracer(){return this.webTracerProvider.getTracer("web-tracer")}get isDebug(){return this.config.isDebug}}},62801:t=>{!function(){function e(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function n(t,n,r){var o,i=new Promise((function(i,a){e(o=t[n].apply(t,r)).then(i,a)}));return i.request=o,i}function r(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function o(t,e,r,o){o.forEach((function(o){o in r.prototype&&(t.prototype[o]=function(){return n(this[e],o,arguments)})}))}function i(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function a(t,e,r,o){o.forEach((function(o){o in r.prototype&&(t.prototype[o]=function(){return t=this[e],(r=n(t,o,arguments)).then((function(t){if(t)return new u(t,r.request)}));var t,r})}))}function s(t){this._index=t}function u(t,e){this._cursor=t,this._request=e}function c(t){this._store=t}function l(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new l(n)}function f(t){this._db=t}r(s,"_index",["name","keyPath","multiEntry","unique"]),o(s,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),a(s,"_index",IDBIndex,["openCursor","openKeyCursor"]),r(u,"_cursor",["direction","key","primaryKey","value"]),o(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(u.prototype[t]=function(){var n=this,r=arguments;return Promise.resolve().then((function(){return n._cursor[t].apply(n._cursor,r),e(n._request).then((function(t){if(t)return new u(t,n._request)}))}))})})),c.prototype.createIndex=function(){return new s(this._store.createIndex.apply(this._store,arguments))},c.prototype.index=function(){return new s(this._store.index.apply(this._store,arguments))},r(c,"_store",["name","keyPath","indexNames","autoIncrement"]),o(c,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),a(c,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),i(c,"_store",IDBObjectStore,["deleteIndex"]),l.prototype.objectStore=function(){return new c(this._tx.objectStore.apply(this._tx,arguments))},r(l,"_tx",["objectStoreNames","mode"]),i(l,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new c(this._db.createObjectStore.apply(this._db,arguments))},r(p,"_db",["name","version","objectStoreNames"]),i(p,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new l(this._db.transaction.apply(this._db,arguments))},r(f,"_db",["name","version","objectStoreNames"]),i(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[c,s].forEach((function(e){e.prototype[t.replace("open","iterate")]=function(){var e,n=(e=arguments,Array.prototype.slice.call(e)),r=n[n.length-1],o=this._store||this._index,i=o[t].apply(o,n.slice(0,-1));i.onsuccess=function(){r(i.result)}}}))})),[s,c].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(o){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():o(r)):o(r)}))}))})}));var d={open:function(t,e,r){var o=n(indexedDB,"open",[t,e]),i=o.request;return i.onupgradeneeded=function(t){r&&r(new p(i.result,t.oldVersion,i.transaction))},o.then((function(t){return new f(t)}))},delete:function(t){return n(indexedDB,"deleteDatabase",[t])}};t.exports=d,t.exports.default=t.exports}()},18998:(t,e,n)=>{n.r(e),n.d(e,{Headers:()=>l,Request:()=>E,Response:()=>T,DOMException:()=>m,fetch:()=>b});var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r&&r,o={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(o.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1};function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return o.iterable&&(e[Symbol.iterator]=function(){return e}),e}function l(t){this.map={},t instanceof l?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function d(t){var e=new FileReader,n=f(e);return e.readAsArrayBuffer(t),n}function h(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:o.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():o.arrayBuffer&&o.blob&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=h(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||a(t))?this._bodyArrayBuffer=h(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=p(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(d)}),this.text=function(){var t,e,n,r=p(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=f(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(t,e){t=s(t),e=u(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},l.prototype.delete=function(t){delete this.map[s(t)]},l.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},l.prototype.set=function(t,e){this.map[s(t)]=u(e)},l.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},l.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),c(t)},l.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),c(t)},l.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),c(t)},o.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(t,e){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,o=(e=e||{}).body;if(t instanceof E){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function v(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}})),e}function T(t,e){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},_.call(E.prototype),_.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},T.error=function(){var t=new T(null,{status:0,statusText:""});return t.type="error",t};var g=[301,302,303,307,308];T.redirect=function(t,e){if(-1===g.indexOf(e))throw new RangeError("Invalid status code");return new T(null,{status:e,headers:{location:t}})};var m=r.DOMException;try{new m}catch(t){(m=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),m.prototype.constructor=m}function b(t,e){return new Promise((function(n,i){var a=new E(t,e);if(a.signal&&a.signal.aborted)return i(new m("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new l,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o)}})),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;setTimeout((function(){n(new T(o,r))}),0)},s.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){i(new m("Aborted","AbortError"))}),0)},s.open(a.method,function(t){try{return""===t&&r.location.href?r.location.href:t}catch(e){return t}}(a.url),!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&(o.blob?s.responseType="blob":o.arrayBuffer&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof l?a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){s.setRequestHeader(t,u(e.headers[t]))})),a.signal&&(a.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",c)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}b.polyfill=!0,r.fetch||(r.fetch=b,r.Headers=l,r.Request=E,r.Response=T)},66489:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OpenTelemetryServices=void 0,function(t){t.CART_SERVICE="cart-service"}(e.OpenTelemetryServices||(e.OpenTelemetryServices={}))},96614:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Dom_addClasses=void 0,e.Dom_addClasses=function(t,e){e.forEach((function(e){t.classList.add(e)}))}},90804:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AjaxStateProcessorAbstract=void 0;var r=n(96614),o=function(){function t(){var t=this;this._waitingElements=[],this.addWaitingState=function(e){(0,r.Dom_addClasses)(e,["ajs-placeholder","ajs-placeholder_waiting"]),t._waitingElements.push(e)}}return Object.defineProperty(t.prototype,"service",{set:function(t){this._service=t},enumerable:!1,configurable:!0}),t.prototype.needGetStateAfterBuild=function(t){return!0},t.prototype.refreshOnlyAfterUserActivity=function(t){return!1},t.prototype.afterRefresh=function(t){this._waitingElements.forEach((function(t){setTimeout((function(){t.classList.remove("ajs-placeholder_waiting")})),setTimeout((function(){t.classList.remove("ajs-placeholder")}),1e3)})),this._waitingElements=[]},t}();e.AjaxStateProcessorAbstract=o},7605:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BuyButtonActionEnum=void 0,function(t){t.INIT="init",t.ADD="add",t.RESET="reset"}(e.BuyButtonActionEnum||(e.BuyButtonActionEnum={}))},12957:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BuyButtonAddResultEnum=void 0,function(t){t[t.SUCCESS=0]="SUCCESS",t[t.MULTIPLE_OF_STEP=1]="MULTIPLE_OF_STEP",t[t.OVER_MAX_COUNT=2]="OVER_MAX_COUNT",t[t.ERROR=3]="ERROR"}(e.BuyButtonAddResultEnum||(e.BuyButtonAddResultEnum={}))},78010:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BuyButtonEventsEnum=void 0,function(t){t.ADD="buy-button:add",t.REFRESH="buy-button:refresh",t.UPDATED="buy-button:updated",t.RESET="buy-button:reset",t.PREORDER_CLICK="preorder-button:click"}(e.BuyButtonEventsEnum||(e.BuyButtonEventsEnum={}))},26005:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BuyButtonProcessor=void 0;var u=s(n(31080)),c=s(n(95140)),l=n(6543),p=n(49468),f=s(n(80138)),d=n(28109),h=n(77837),_=n(66489),y=n(91757),E=s(n(24515)),v=n(90804),T=n(7605),g=n(12957),m=n(78010),b=n(70489),O=n(80799),S=n(37852),R=n(42027),w=function(t){function e(){var e=t.call(this)||this;return e._buttons=new Map,e._configs=new Map,e._showPrepay=new Set,e._products=new Map,e._screen=new f.default,window.addEventListener(m.BuyButtonEventsEnum.RESET,(function(t){e._resetState(t.detail)})),window.addEventListener(m.BuyButtonEventsEnum.REFRESH,(function(){e._products.forEach((function(t,n){e._request(n,{action:T.BuyButtonActionEnum.INIT,id:t})}))})),e}return o(e,t),e.prototype.build=function(t){this._render(t,!0);var e=t.data;return this._products.set(t.id,e.productId),e.showPrepay&&this._showPrepay.add(t.id),{id:e.productId}},e.prototype.refresh=function(t,e){this._render(t,!1,e)},e.prototype._render=function(t,e,n){var r=this;if(this._configs.set(t.id,t),n&&(this._cartUrl=n.cartUrl),e){var o=t.data;if(o.openTelemetryCollectorUrl){var s=new p.OpenTelemetryConfig;s.serviceName=_.OpenTelemetryServices.CART_SERVICE,s.collectorUrl=o.openTelemetryCollectorUrl,s.samplingRatio=.5;var u=new p.OpenTelemetryProvider(s);try{var f=new URL(c.default.getInstance().getSettings().addUrl,o.restApiUrl);new p.FetchInstrumentation({urls:{addToCart:f.toString()},provider:u})}catch(t){}}var d=void 0,E=void 0;this.isFilled(document.getElementById(t.id))?d=R.ProductTypesEnum.PREORDER===t.data.productType?y.ButtonColorModifiers.BLUE:y.ButtonColorModifiers.BRAND:(d=y.ButtonColorModifiers.WHITE,E=R.ProductTypesEnum.PREORDER===t.data.productType?y.ButtonColorModifiers.BLUE:y.ButtonColorModifiers.BRAND);var v=window.buttonInteractive.drawInteractive(t.id,"","","",[],!1,void 0,d,E);R.ProductTypesEnum.PREORDER===o.productType?v.element.classList.add("preorder-btn"):v.element.classList.add("buy-btn"),v.actionHandler=function(){return i(r,void 0,void 0,(function(){var e,n,r,i;return a(this,(function(a){switch(a.label){case 0:return R.ProductTypesEnum.PREORDER===o.productType&&(0,l.domDispatchEvent)(m.BuyButtonEventsEnum.PREORDER_CLICK),e=this.getCartParams(o.productId),v.element.setAttribute("disabled",""),n={ids:o.productId?[o.productId]:null,bundle:e.bundle,count:1,type:o.productType,additional:e.additional},[4,c.default.getInstance().setEntity(n,o.cityId)];case 1:return r=a.sent(),i="boolean"!=typeof r?r.code:r?g.BuyButtonAddResultEnum.SUCCESS:g.BuyButtonAddResultEnum.ERROR,this._request(t.id,{id:o.productId,action:T.BuyButtonActionEnum.ADD,addResult:i}),(0,l.domDispatchEvent)(m.BuyButtonEventsEnum.ADD,v.element,{productId:o.productId}),c.default.getInstance().refresh(),e.bundle&&1<e.bundle.products.length&&!this._screen.isDesktop&&window.popup.show(O.______+' <a href="'+this._cartUrl+'" class="buy-button-gift-popup__link">'+O.__+"</a>","buy-button-gift-popup"),v.element.removeAttribute("disabled"),[2]}}))}))},this._buttons.set(t.id,v),o.isAbAvailsTesting&&R.ProductTypesEnum.PREORDER!==t.data.productType&&v.element.classList.add("buy-btn-avails"),window.addEventListener(h.CatalogProductEvents.UPDATE_PRIMARY_BUTTONS,(function(){r._refreshBtn(t.id,!1)}))}this._refreshBtn(t.id,!1===e)},e.prototype.hasProductIdInCart=function(t){return(new u.default).getEntities().then((function(e){return e.has(t)}))},e.prototype._refreshBtn=function(t,e){return i(this,void 0,void 0,(function(){var n,r,o,i,s,u,c,p=this;return a(this,(function(a){switch(a.label){case 0:return n=this._configs.get(t),r=!1,o=!1,i=new Map,void 0===n?[3,2]:(s=n.data,[4,this.hasProductIdInCart(s.productId)]);case 1:o=a.sent(),r=s.isNeedPrepay,a.label=2;case 2:return e?(this._products.forEach((function(e,r){r===t&&(u=e,p._configs.get(r).data=n.data)})),this._products.forEach((function(t,e){t===u&&i.set(e,p._buttons.get(e))}))):i.set(t,this._buttons.get(t)),c=new Map,i.forEach((function(t,e){var i,a=new E.default;if(a.showTooltipOnMobile=!1,o)a.buttonText=O.___,a.tooltipText=O.____,a.redirectUrl=p.getCartUrlByActiveTab(n.data),a.color=R.ProductTypesEnum.PREORDER===n.data.productType?y.ButtonColorModifiers.BLUE_BORDERED:y.ButtonColorModifiers.BRAND_BORDERED,a.hover=R.ProductTypesEnum.PREORDER===n.data.productType?y.ButtonColorModifiers.BLUE:y.ButtonColorModifiers.BRAND,i=n.data.availAbText?"buy-btn__mobile-icon_cart":"buy-btn__mobile-icon_bought";else if(r&&p._showPrepay.has(e))!n.data.availAbText&&n?a.buttonText="":a.buttonText=n.data.availAbText?n.data.availAbText:O.__,n.data.isAbAvailsTesting?a.color=y.ButtonColorModifiers.BRAND:a.color=R.ProductTypesEnum.PREORDER===n.data.productType?y.ButtonColorModifiers.BLUE:y.ButtonColorModifiers.BRAND,a.tooltipText="",a.redirectUrl="",a.hover=R.ProductTypesEnum.PREORDER===n.data.productType?y.ButtonColorModifiers.BLUE:y.ButtonColorModifiers.BRAND,a.hint={tooltip:O.___},i="buy-btn__mobile-icon_cart";else{if(n.data.isAbAvailsTesting&&!n.data.availAbText)a.buttonText="",a.color=y.ButtonColorModifiers.BRAND;else if(a.buttonText=n.data.availAbText?n.data.availAbText:R.ProductTypesEnum.PREORDER===n.data.productType?O.__:O.__,!n.data.availAbText){var s=t.element.closest(".catalog-product"),u=t.element.closest(".product-card-top__buy");s&&s.classList.remove("product-ab-avails"),u&&u.classList.remove("product-ab-avails")}a.tooltipText="",a.redirectUrl="",p.isFilled(t.element)?a.color=R.ProductTypesEnum.PREORDER===n.data.productType?y.ButtonColorModifiers.BLUE:y.ButtonColorModifiers.BRAND:(n.data.isAbAvailsTesting||n.data.availAbText?a.color=y.ButtonColorModifiers.BRAND:a.color=y.ButtonColorModifiers.WHITE,a.hover=R.ProductTypesEnum.PREORDER===n.data.productType?y.ButtonColorModifiers.BLUE:y.ButtonColorModifiers.BRAND),i="buy-btn__mobile-icon_cart"}t.element.closest("["+d.CatalogProductConstants.DATA_ATTR_PRIMARY_BUTTON_AS_ICON+"]")&&!n.data.availAbText&&(a.buttonText='<i class="buy-btn__mobile-icon '+i+'"></i>'),n.data.availAbText&&(a.buttonText='<i class="buy-btn__mobile-icon '+i+'"></i> '+a.buttonText),t.afterActionHandler(a),c.set(p._products.get(e),!!o)})),(0,l.domDispatchEvent)(m.BuyButtonEventsEnum.UPDATED,void 0,{products:c}),[2]}}))}))},e.prototype._resetState=function(t){var e=this;this._products.forEach((function(n,r){n===t.entityId&&e._request(r,{id:n,action:T.BuyButtonActionEnum.RESET})}))},e.prototype.getCartParams=function(t){var e=window.productAdditionsDispatcher(t);return{additional:{warrantyPeriod:e.warranty?e.warranty.period:0,warrantyType:e.warranty?e.warranty.type:0,relatedServices:e.services.map((function(t){return t.guid})),optionalProductGuid:e.optionalProduct?e.optionalProduct.guid:null,insuranceId:e.insurance?e.insurance.guid:null,minPriceSelected:e.minPriceEnabled},bundle:null}},e.prototype._request=function(t,e){this._service.updateState(t,e)},e.prototype.getCartUrlByActiveTab=function(t){var e=new URL(this._cartUrl,document.baseURI);return R.ProductTypesEnum.DIGITAL===t.productType?e.searchParams.set("activeTabId",b.CartGroupTypes.TYPE_DIGITAL.toString()):R.ProductTypesEnum.PREORDER===t.productType?e.searchParams.set("activeTabId",b.CartGroupTypes.TYPE_PREORDER.toString()):R.ProductTypesEnum.MARKDOWN===t.productType?e.searchParams.set("activeTabId",b.CartGroupTypes.TYPE_MARKDOWN.toString()):R.ProductTypesEnum.COMMISSION===t.productType?e.searchParams.set("activeTabId",b.CartGroupTypes.TYPE_COMMISSION.toString()):R.ProductTypesEnum.DEFAULT===t.productType&&(S.ProductSeparateEnum.SUBGROUP_DISCOUNT_LOGISTIC===t.separatedId?e.searchParams.set("activeTabId",b.CartGroupTypes.TYPE_CATALOG_WITH_DL.toString()):S.ProductSeparateEnum.SUBGROUP_INSTALLMENT===t.separatedId?e.searchParams.set("activeTabId",b.CartGroupTypes.TYPE_CATALOG_WITH_INSTALLMENT.toString()):S.ProductSeparateEnum.SUBGROUP_LOGISTIC_INSTALLMENT===t.separatedId&&e.searchParams.set("activeTabId",b.CartGroupTypes.TYPE_CATALOG_WITH_DL_AND_INSTALLMENT.toString())),e.toString()},e.prototype.isFilled=function(t){return null!==t.closest("[data-fill-primary-btn]")},e}(v.AjaxStateProcessorAbstract);e.BuyButtonProcessor=w},70489:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CartGroupTypes=void 0,function(t){t[t.TYPE_CATALOG=1]="TYPE_CATALOG",t[t.TYPE_MARKDOWN=2]="TYPE_MARKDOWN",t[t.TYPE_RSU=3]="TYPE_RSU",t[t.TYPE_DIGITAL=4]="TYPE_DIGITAL",t[t.TYPE_CATALOG_WITH_DL=5]="TYPE_CATALOG_WITH_DL",t[t.TYPE_CATALOG_WITH_INSTALLMENT=6]="TYPE_CATALOG_WITH_INSTALLMENT",t[t.TYPE_CATALOG_WITH_DL_AND_INSTALLMENT=7]="TYPE_CATALOG_WITH_DL_AND_INSTALLMENT",t[t.TYPE_PREORDER=9]="TYPE_PREORDER",t[t.TYPE_COMMISSION=11]="TYPE_COMMISSION"}(e.CartGroupTypes||(e.CartGroupTypes={}))},80799:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e["__"]=e["___"]=e["__"]=e["____"]=e["___"]=e["__"]=e["______"]=void 0,e["______"]=" +   ",e["__"]="",e["___"]=" ",e["____"]="  ",e["__"]="",e["___"]=" ",e["__"]=""},37852:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProductSeparateEnum=void 0,function(t){t[t.SUBGROUP_CATALOG_PRODUCTS=0]="SUBGROUP_CATALOG_PRODUCTS",t[t.SUBGROUP_DISCOUNT_LOGISTIC=1]="SUBGROUP_DISCOUNT_LOGISTIC",t[t.SUBGROUP_INSTALLMENT=2]="SUBGROUP_INSTALLMENT",t[t.SUBGROUP_LOGISTIC_INSTALLMENT=3]="SUBGROUP_LOGISTIC_INSTALLMENT"}(e.ProductSeparateEnum||(e.ProductSeparateEnum={}))},42027:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProductTypesEnum=void 0,function(t){t[t.DEFAULT=1]="DEFAULT",t[t.MARKDOWN=2]="MARKDOWN",t[t.DIGITAL=6]="DIGITAL",t[t.PREORDER=9]="PREORDER",t[t.COMMISSION=11]="COMMISSION"}(e.ProductTypesEnum||(e.ProductTypesEnum={}))},91757:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonColorModifiers=void 0,function(t){t.BLUE="_blue",t.BLUE_BORDERED="_blue-bordered",t.BRAND="_brand",t.BRAND_BORDERED="_brand-bordered",t.GREY="_grey",t.RED="_red",t.WHITE="_white"}(e.ButtonColorModifiers||(e.ButtonColorModifiers={}))},24515:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){this.tooltipText="",this.showTooltipOnMobile=!0,this.redirectUrl=""};e.default=n},20795:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AssetsEvents=void 0,function(t){t.LOADED="assets:loaded"}(e.AssetsEvents||(e.AssetsEvents={}))},31080:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(34050)),s=function(){function t(){}return t.prototype.getEntities=function(t){return void 0===t&&(t=null),r(this,void 0,Promise,(function(){return o(this,(function(e){return[2,(new a.default).getEntityStore().then((function(t){return t.getAll()})).then((function(e){var n=new Map;return void 0!==e&&e.forEach((function(e){var r=e.data;null!==t&&t!==r.type||n.set(r.productId,r)})),n}))]}))}))},t.prototype.getAllByLastType=function(){return r(this,void 0,Promise,(function(){return o(this,(function(t){return[2,(new a.default).getEntityStore().then((function(t){return t.getAll()})).then((function(t){var e=new Map,n=null;return void 0!==t&&t.forEach((function(t){var r=t.data;e.set(r.id,r),n=r.type})),e.forEach((function(t){n!==t.type&&e.delete(t.id)})),e}))]}))}))},t.prototype.setEntity=function(t){return r(this,void 0,Promise,(function(){return o(this,(function(e){return[2,(new a.default).getEntityStore().then((function(e){var n={id:t.productId,data:t};e.put(n)})).then((function(){return!0})).catch((function(){return!1}))]}))}))},t.prototype.deleteEntity=function(t){return r(this,void 0,Promise,(function(){return o(this,(function(e){return[2,(new a.default).getEntityStore().then((function(e){return e.delete(t)})).then((function(){return!0})).catch((function(){return!1}))]}))}))},t.prototype.deleteEntities=function(t){return r(this,void 0,Promise,(function(){return o(this,(function(e){return[2,(new a.default).getEntityStore().then((function(e){return t.forEach((function(t){e.delete(t)})),!0})).then((function(){return!0})).catch((function(){return!1}))]}))}))},t.prototype.clear=function(){return r(this,void 0,Promise,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,(new a.default).getEntityStore()];case 1:return[2,t.sent().clear()]}}))}))},t}();e.default=s},34050:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(62801)),i=function(){function t(){this.dbConnect=this.initDb()}return t.prototype.initDb=function(){var e=this;return o.default.open(t.DB_NAME,t.DB_VERSION,(function(t){return e.migrateDb(t)}))},t.prototype.migrateDb=function(e){switch(e.oldVersion){case 0:e.createObjectStore(t.STORE_ENTITY,{keyPath:t.ATTR_ID}),e.createObjectStore(t.STORE_INSURANCE,{keyPath:t.ATTR_ID});break;case 1:e.deleteObjectStore(t.STORE_ENTITY),e.createObjectStore(t.STORE_ENTITY,{keyPath:t.ATTR_ID}),e.createObjectStore(t.STORE_INSURANCE,{keyPath:t.ATTR_ID});break;case 2:e.createObjectStore(t.STORE_INSURANCE,{keyPath:t.ATTR_ID})}},t.prototype.getEntityStore=function(){return this.dbConnect.then((function(e){return e.transaction(t.STORE_ENTITY,"readwrite").objectStore(t.STORE_ENTITY)}))},t.prototype.getInsurancesStore=function(){return this.dbConnect.then((function(e){return e.transaction(t.STORE_INSURANCE,"readwrite").objectStore(t.STORE_INSURANCE)}))},t.ATTR_ID="id",t.DB_NAME="cart-entity-repository",t.DB_VERSION=3,t.STORE_ENTITY="entity",t.STORE_INSURANCE="insurance",t}();e.default=i},99644:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProductType=void 0,function(t){t[t.TYPE_NONE_ID=0]="TYPE_NONE_ID",t[t.TYPE_CATALOG_PRODUCT=1]="TYPE_CATALOG_PRODUCT",t[t.TYPE_MARKDOWN_PRODUCT=2]="TYPE_MARKDOWN_PRODUCT",t[t.TYPE_RSU=3]="TYPE_RSU",t[t.TYPE_ONE_CLICK_PRODUCT=5]="TYPE_ONE_CLICK_PRODUCT",t[t.TYPE_DIGITAL_PRODUCT=6]="TYPE_DIGITAL_PRODUCT",t[t.TYPE_BUNDLE=8]="TYPE_BUNDLE",t[t.TYPE_PREORDER_PRODUCT=9]="TYPE_PREORDER_PRODUCT",t[t.TYPE_PREORDER_BUNDLE=10]="TYPE_PREORDER_BUNDLE",t[t.TYPE_COMMISSION_PRODUCT=11]="TYPE_COMMISSION_PRODUCT"}(e.ProductType||(e.ProductType={}))},5095:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isRSU=e.isBundle=e.isCommonProduct=void 0;var r=n(99644);e.isCommonProduct=function(t){return t.type===r.ProductType.TYPE_CATALOG_PRODUCT||t.type===r.ProductType.TYPE_DIGITAL_PRODUCT||t.type===r.ProductType.TYPE_PREORDER_PRODUCT||t.type===r.ProductType.TYPE_COMMISSION_PRODUCT||t.type===r.ProductType.TYPE_MARKDOWN_PRODUCT},e.isBundle=function(t){return t.type===r.ProductType.TYPE_BUNDLE||t.type===r.ProductType.TYPE_PREORDER_BUNDLE},e.isRSU=function(t){return t.type===r.ProductType.TYPE_RSU}},98816:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getProductIdFromBundleId=e.getBundleId=void 0,e.getBundleId=function(t,e){if(e.length>1){var n=function(t){for(var e=t.join(","),n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return(n>>>0).toString(16)}(e);return"".concat(t,"_").concat(n)}return t||""},e.getProductIdFromBundleId=function(t){return t.split("_")[0]||""}},95140:function(t,e,n){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(n(31080)),u=n(5095),c=n(98816),l=a(n(46791)),p=n(65558),f=a(n(43049)),d=n(54433),h=n(14628),_=n(43006),y=function(){function t(){this.REQUEST_DELAY=1e3,this.settings={addUrl:"/v2/add-products-to-cart",deleteUrl:"/cart-service/delete-batch-by-cart-line-id/",getByTypeUrl:"/cart-service/get-by-type/",getOneUrl:"/cart-service/get-entity/",getCartDataUrl:"/v1/cart-service/cart-preview"},this.cartEntityRepository=new s.default,this.fetchHelper=new f.default,this.addedItems=new Map,this.removeItems=[],this.callbacks=[]}return t.getInstance=function(){if("undefined"!=typeof window)return window.cartRefreshService||(window.cartRefreshService=new this),window.cartRefreshService},t.prototype.getSettings=function(){return this.settings},t.prototype.registerBlock=function(t){this.callbacks.push(t)},t.prototype.refresh=function(){this.callbacks.forEach((function(t){t()}))},t.prototype.sync=function(){var t=this;return this.getEntitiesList().then((function(){return o(t,void 0,void 0,(function(){var t,e,n=this;return i(this,(function(o){switch(o.label){case 0:return[4,(0,p.getConfig)()];case 1:return t=o.sent(),e=new URL(this.settings.getCartDataUrl,t.restApi),[2,fetch(e.toString(),{headers:{"Cache-Control":"no-cache"},credentials:"include"}).then((function(e){if(!e.ok)throw e;var n=new Date;return n.setDate(n.getDate()+1),l.default.setCookie("last-cart-update","1",{expires:n.toUTCString(),domain:".dns-shop."+t.domainCode,path:"/"}),e.json()})).then((function(t){return n.cartEntityRepository.clear(),!!t.data&&(t.data.forEach((function(t){var e=r({},t);if((0,u.isBundle)(e)){var o=e.products.map((function(t){return t.productId}));e.productId=(0,c.getBundleId)(e.productId,o)}n.cartEntityRepository.setEntity(e)})),!0)})).catch((function(){return!1}))]}}))}))}))},t.prototype.getEntitiesList=function(t){return void 0===t&&(t=null),o(this,void 0,Promise,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.cartEntityRepository.getEntities(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.setEntity=function(t,e){var n,r,a;return o(this,void 0,Promise,(function(){var o,s=this;return i(this,(function(i){switch(i.label){case 0:return 0!==this.addedItems.size?[3,2]:[4,this.getEntitiesList().catch((function(){return new Map}))];case 1:i.sent().forEach((function(t){s.addedItems.set(t.id,t.type)})),i.label=2;case 2:return o=null!==(a=null===(r=null===(n=t.ids)||void 0===n?void 0:n.slice(-1))||void 0===r?void 0:r.pop())&&void 0!==a?a:null,t.bundle&&(o=(0,c.getBundleId)(t.bundle.id,t.bundle.products.map((function(t){return t.productId})))),!o||this.addedItems.has(o)?[2,{cartLimitHtml:"",code:d.AddResultEnum.ADD_PRODUCT_RESULT_ERROR}]:[2,this.sendAddRequest(this.transformToCartServiceRequest(t),e)]}}))}))},t.prototype.deleteEntity=function(t,e){var n=this;return void 0===e&&(e=""),this.removeItems.push(t),clearTimeout(this.timer),new Promise((function(t){n.timer=setTimeout((function(){t(n.sendDeleteRequest(e).then((function(t){return t})))}),n.REQUEST_DELAY)}))},t.prototype.deleteEntities=function(t,e){var n=this;return void 0===e&&(e=""),this.removeItems=this.removeItems.concat(t),clearTimeout(this.timer),new Promise((function(t){n.timer=setTimeout((function(){t(n.sendDeleteRequest(e).then((function(t){return t})))}),n.REQUEST_DELAY)}))},t.prototype.sendAddRequest=function(t,e){return o(this,void 0,Promise,(function(){var n,r,a=this;return i(this,(function(s){switch(s.label){case 0:return[4,(0,p.getConfig)()];case 1:return n=s.sent(),r=new URL(this.settings.addUrl,n.restApi),[2,fetch(r.toString(),{method:"PUT",headers:{cityId:e},credentials:"include",body:JSON.stringify(t)}).then((function(t){return t.json()})).then((function(t){return o(a,void 0,void 0,(function(){var e,n,r,o,a,s,l,p=this;return i(this,(function(i){if(!t.data)throw new Error;if(d.AddResultEnum.ADD_PRODUCT_RESULT_OVER_MAX_COUNT===t.data.code)return dispatchEvent(new CustomEvent(_.CartRefreshServiceEvents.CART_LIMIT,{detail:{data:t.data}})),[2,t.data];if(d.AddResultEnum.ADD_PRODUCT_RESULT_ERROR===t.data.code)return[2,t.data];if(!(e=null!==(l=t.data.products)&&void 0!==l?l:[]).length)return[2,t.data];if(d.AddResultEnum.ADD_PRODUCT_RESULT_CART_SERVICE_ERROR===t.data.code)return dispatchEvent(new CustomEvent(_.CartRefreshServiceEvents.CART_SERVICE_ERROR,{detail:{entities:e}})),[2,t.data];for(n=[],r=0,o=e;r<o.length;r++)a=o[r],this.addedItems.delete(a.productId),(0,u.isBundle)(a)&&(s=a.products.map((function(t){return t.productId})),a.productId=(0,c.getBundleId)(a.productId,s)),n.push(this.cartEntityRepository.setEntity(a));return[2,Promise.all(n).then((function(){return p.refresh(),t.data}))]}))}))})).catch((function(){return{code:d.AddResultEnum.ADD_PRODUCT_RESULT_ERROR,products:[]}}))]}}))}))},t.prototype.sendDeleteRequest=function(t){var e=this;void 0===t&&(t="");var n=this.removeItems.filter((function(t,n){return e.addedItems.delete(t),e.removeItems.indexOf(t)===n})),r=new FormData;return r.append("ids",n),this.cartEntityRepository.deleteEntities(n).then((function(){fetch(e.settings.deleteUrl,{headers:{cityId:t},credentials:"include",method:"POST",body:r})})).then((function(){return e.removeItems=[],e.refresh(),n}))},t.prototype.transformToCartServiceRequest=function(t){var e,n,o,i,a,s,u,c,l,p=null!==(n=null===(e=t.ids)||void 0===e?void 0:e.pop())&&void 0!==n?n:null===(o=t.bundle)||void 0===o?void 0:o.id,f=[],d=t.type;if(t.bundle){for(var _=0,y=t.bundle.products;_<y.length;_++){var E=y[_];f.push(r(r({},E),{count:1}))}d=t.bundle.isPreorder?h.CartServiceProductTypes.TYPE_PREORDER_BUNDLE:h.CartServiceProductTypes.TYPE_BUNDLE}return{products:[{productId:p,type:d,count:null!==(i=t.count)&&void 0!==i?i:0,warrantyType:null===(a=t.additional)||void 0===a?void 0:a.warrantyType,warrantyYears:null===(s=t.additional)||void 0===s?void 0:s.warrantyPeriod,optionalProductId:null===(u=t.additional)||void 0===u?void 0:u.optionalProductGuid,relatedServicesIds:null===(c=t.additional)||void 0===c?void 0:c.relatedServices,insuranceId:null===(l=t.additional)||void 0===l?void 0:l.insuranceId,products:f}]}},t.prototype.addProductsToCart=function(t,e){return this.sendAddRequest(t,e)},t.LOCALSTORAGE_CART_MODAL_TYPE="cartModalType",t}();e.default=y},54433:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AddResultEnum=void 0,function(t){t[t.ADD_PRODUCT_RESULT_SUCCESS=0]="ADD_PRODUCT_RESULT_SUCCESS",t[t.ADD_PRODUCT_RESULT_MULTIPLE_OF_STEP=1]="ADD_PRODUCT_RESULT_MULTIPLE_OF_STEP",t[t.ADD_PRODUCT_RESULT_OVER_MAX_COUNT=2]="ADD_PRODUCT_RESULT_OVER_MAX_COUNT",t[t.ADD_PRODUCT_RESULT_ERROR=3]="ADD_PRODUCT_RESULT_ERROR",t[t.ADD_PRODUCT_RESULT_CART_SERVICE_ERROR=4]="ADD_PRODUCT_RESULT_CART_SERVICE_ERROR",t[t.ADD_PRODUCT_RESULT_SUCCESS_NOT_ALL=5]="ADD_PRODUCT_RESULT_SUCCESS_NOT_ALL"}(e.AddResultEnum||(e.AddResultEnum={}))},14628:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CartServiceProductTypes=void 0,function(t){t[t.TYPE_NONE_ID=0]="TYPE_NONE_ID",t[t.TYPE_CATALOG_PRODUCT=1]="TYPE_CATALOG_PRODUCT",t[t.TYPE_MARKDOWN_PRODUCT=2]="TYPE_MARKDOWN_PRODUCT",t[t.TYPE_RSU=3]="TYPE_RSU",t[t.TYPE_ONE_CLICK_PRODUCT=5]="TYPE_ONE_CLICK_PRODUCT",t[t.TYPE_DIGITAL_PRODUCT=6]="TYPE_DIGITAL_PRODUCT",t[t.TYPE_BUNDLE=8]="TYPE_BUNDLE",t[t.TYPE_PREORDER_PRODUCT=9]="TYPE_PREORDER_PRODUCT",t[t.TYPE_PREORDER_BUNDLE=10]="TYPE_PREORDER_BUNDLE",t[t.TYPE_COMMISSION_PRODUCT=11]="TYPE_COMMISSION_PRODUCT"}(e.CartServiceProductTypes||(e.CartServiceProductTypes={}))},43006:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CartRefreshServiceEvents=void 0,function(t){t.CART_SERVICE_ERROR="cart-service-error",t.CART_LIMIT="cart-limit"}(e.CartRefreshServiceEvents||(e.CartRefreshServiceEvents={}))},46791:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0});var CookieHelper=function(){function CookieHelper(){}return CookieHelper.getCookie=function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0},CookieHelper.setCookie=function(t,e,n){var r=n||{},o=t+"="+(e=encodeURIComponent(e));for(var i in r)if(!1!==r.hasOwnProperty(i)){o+="; "+i;var a=r[i];!0!==a&&(o+="="+a)}document.cookie=o},CookieHelper.unserializeCookie=function(serializeString){var error=0;if(!(""==serializeString||serializeString.length<2)){var val,kret,vret,cval,type=serializeString.charAt(0),cont=serializeString.substring(2),size=0,divpos=0,endcont=0,rest="";switch(type){case"N":rest=cont;break;case"b":val="1"==cont.charAt(0),rest=cont.substring(1);break;case"s":if(val="",divpos=cont.indexOf(":"),-1==divpos)break;if(size=parseInt(cont.substring(0,divpos)),0==size){if(cont.length-divpos<4)break;rest=cont.substring(divpos+4);break}if(cont.length-divpos-size<4)break;val=cont.substring(divpos+2,divpos+2+size),rest=cont.substring(divpos+4+size);break;case"i":case"d":for(var dotfound=0,i=0;i<cont.length;i++)if(cval=cont.charAt(i),isNaN(parseInt(cval))&&("d"!=type||"."!=cval||dotfound++)){endcont=i;break}val=cont.substring(0,endcont),val="i"==type?parseInt(val):parseFloat(val),rest=cont.substring(endcont+1);break;case"a":if(cont.length<4)return;if(divpos=cont.indexOf(":",1),-1==divpos)return;if(size=parseInt(cont.substring(1,divpos-1)),cont=cont.substring(divpos+2),val=new Array,cont.length<1)return;for(var i=0;i+1<2*size;i+=2){if(kret=CookieHelper.unserializeCookie(cont,1),error||null==kret[0]||""==kret[1])return;if(vret=CookieHelper.unserializeCookie(kret[1],1),error)return;val[kret[0]]=vret[0],cont=vret[1]}if("}"!=cont.charAt(0))return;rest=cont.substring(1);break;case"O":if(divpos=cont.indexOf(":"),-1==divpos)return;size=parseInt(cont.substring(0,divpos));var objname=cont.substring(divpos+2,divpos+2+size);if('":'!=cont.substring(divpos+2+size,divpos+4+size))return;var objprops=CookieHelper.unserializeCookie("a:"+cont.substring(divpos+4+size),1);if(error)return;rest=objprops[1];var objout="function "+objname+"(){";for(var key in objprops[0])objout+=key+"=objprops[0]['"+key+"'];";objout+="}val=new "+objname+"();",eval(objout)}return 1==arguments.length?val:[val,rest]}},CookieHelper}();exports.default=CookieHelper},6543:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.domDispatchEvent=void 0,e.domDispatchEvent=function(t,e,n){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!0,!0,n),void 0===e?window.dispatchEvent(r):e.dispatchEvent(r)}},43049:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(20795),o=n(36620);n(18998);var i=function(){function t(){this.credentials="same-origin",this.head=document.querySelector("head")}return t.prototype.postData=function(t,e,n,r,i){void 0===n&&(n="application/x-www-form-urlencoded"),void 0===i&&(i=!0);var a={"X-Requested-With":"XMLHttpRequest"};if(!0===i){var s=this.getCrsfToken();null!==s&&(a["X-CSRF-Token"]=s)}return""!==n&&(a["content-type"]=n),fetch(t,Object.assign({},{body:e,cache:"no-cache",credentials:this.credentials,headers:a,method:"POST",mode:"cors",redirect:"follow",referrer:"no-referrer"},r||{})).then((function(n){return(0,o.logGroupCollapsed)("fetch-helper: JSON"),(0,o.logMessage)(t),(0,o.logMessage)(e),(0,o.logMessage)(n),(0,o.logGroupEnd)(),n.json()}))},t.prototype.getData=function(t,e,n){void 0===n&&(n=!0);var r={"X-Requested-With":"XMLHttpRequest"};if(!0===n){var i=this.getCrsfToken();null!==i&&(r["X-CSRF-Token"]=i)}return fetch(t,Object.assign({},{cache:"no-cache",credentials:this.credentials,headers:r,method:"GET",mode:"cors",redirect:"follow",referrerPolicy:"no-referrer"},e||{})).then((function(e){return(0,o.logGroupCollapsed)("fetch-helper: JSON"),(0,o.logMessage)(t),(0,o.logMessage)(e),(0,o.logGroupEnd)(),e.json()}))},t.prototype.getCrsfToken=function(){var t=document.querySelector("meta[name=csrf-token]");return t?t.getAttribute("content"):null},t.prototype.processSuccess=function(t){var e=this,n=[],o=function(t){var n=[];if(window.REGISTERED_JS_KEYS=window.REGISTERED_JS_KEYS||[],Object.keys(t).forEach((function(e){-1===window.REGISTERED_JS_KEYS.indexOf(e)&&(n.push(t[e]),window.REGISTERED_JS_KEYS.push(e))})),0!==n.length){var r=document.createElement("script");r.type="text/javascript",r.innerHTML=n.join("\n"),e.head.appendChild(r)}};t.assets.inlineJsHead&&o(t.assets.inlineJsHead),t.assets.jsFiles.forEach((function(t){var r=/.*\/(assets|static\/\d+)\/\w{4,8}(\/.+)/,o=t.replace(r,"$2"),i='script[src$="'+o+'"]',a=document.querySelector(i);if(null===a||a.src.replace(r,"$2")!==o){(a=document.createElement("script")).src=t,a.async=!1;var s=new Promise((function(t){a.addEventListener("load",(function(){t()}))}));e.head.appendChild(a),n.push(s)}})),t.assets.cssFiles.forEach((function(t){n.push(window.defferCSS(t.url,t.media))}));return Promise.all(n).then((function(){return o(t.assets.inlineJs),window.dispatchEvent(new CustomEvent(r.AssetsEvents.LOADED)),[].slice.call(document.querySelectorAll("[data-show-after-load]")).forEach((function(t){t.hidden=!1})),Promise.resolve()}))},t.prototype.setWithCredentials=function(){this.credentials="include"},t.prototype.setDefaultCredentials=function(){this.credentials="same-origin"},t}();e.default=i},42749:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isDev=void 0,e.isDev=function(){return null!==document.querySelector('meta[name="superuser"]')}},36620:function(t,e,n){var r=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.logGroupEnd=e.logGroupCollapsed=e.logGroup=e.logError=e.logDebug=e.logMessage=void 0;var o=n(42749);function i(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];!1!==(0,o.isDev)()&&console[t].apply(console,e)}e.logMessage=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(void 0,r(["log"],t,!1))},e.logDebug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(void 0,r(["debug"],t,!1))},e.logError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(void 0,r(["error"],t,!1))},e.logGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(void 0,r(["group"],t,!1))},e.logGroupCollapsed=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(void 0,r(["groupCollapsed"],t,!1))},e.logGroupEnd=function(){i("groupEnd")}},42601:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ScreenTypes=void 0,function(t){t[t.SCREEN_NOT_SUPPORTED=0]="SCREEN_NOT_SUPPORTED",t[t.SCREEN_WIDE=1]="SCREEN_WIDE",t[t.SCREEN_DESKTOP=2]="SCREEN_DESKTOP",t[t.SCREEN_TABLET=3]="SCREEN_TABLET",t[t.SCREEN_MOBILE=4]="SCREEN_MOBILE"}(e.ScreenTypes||(e.ScreenTypes={}))},80138:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(42601),o=function(){function t(){var t=this;this.SCREEN_MOBILE_MIN_WIDTH=320,this.SCREEN_MOBILE_MAX_WIDTH=767,this.SCREEN_TABLET_MAX_WIDTH=991,this.SCREEN_DESKTOP_MAX_WIDTH=1199,this.EVENT_RESIZE="resize",this.EVENT_OPTIMIZED_RESIZE="optimizedResize",this.EVENT_SCREEN_TYPE_CHANGED="screenTypeChanged",this._currentScreenType=null,this.optimizeResizeEvent=function(e){e=e||window;var n=!1;e.addEventListener(t.EVENT_RESIZE,(function(){n||(n=!0,requestAnimationFrame((function(){e.dispatchEvent(new CustomEvent(t.EVENT_OPTIMIZED_RESIZE));var r=t.calcCurrent();t._currentScreenType!==r&&(t._currentScreenType=r,e.dispatchEvent(new CustomEvent(t.EVENT_SCREEN_TYPE_CHANGED))),n=!1})))}))}}return Object.defineProperty(t.prototype,"current",{get:function(){return null===this._currentScreenType&&(this._currentScreenType=this.calcCurrent()),this._currentScreenType},enumerable:!1,configurable:!0}),t.prototype.calcCurrent=function(){var t=document.querySelector('meta[name="screen-type-helper"]');if(null!==t)return parseInt(t.content,10);var e=window.matchMedia;if(e){if(e("(min-width: "+(this.SCREEN_DESKTOP_MAX_WIDTH+1)+"px)").matches)return r.ScreenTypes.SCREEN_WIDE;if(e("(min-width: "+(this.SCREEN_TABLET_MAX_WIDTH+1)+"px)").matches)return r.ScreenTypes.SCREEN_DESKTOP;if(e("(min-width: "+(this.SCREEN_MOBILE_MAX_WIDTH+1)+"px)").matches)return r.ScreenTypes.SCREEN_TABLET;if(e("(min-width: "+this.SCREEN_MOBILE_MIN_WIDTH+"px)").matches)return r.ScreenTypes.SCREEN_MOBILE}else{var n=window.innerWidth;if(n>this.SCREEN_DESKTOP_MAX_WIDTH)return r.ScreenTypes.SCREEN_WIDE;if(n>this.SCREEN_TABLET_MAX_WIDTH)return r.ScreenTypes.SCREEN_DESKTOP;if(n>this.SCREEN_MOBILE_MAX_WIDTH)return r.ScreenTypes.SCREEN_TABLET;if(n>=this.SCREEN_MOBILE_MIN_WIDTH)return r.ScreenTypes.SCREEN_MOBILE}return r.ScreenTypes.SCREEN_NOT_SUPPORTED},t.prototype.check=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++){if(r[n]===this.current)return!0}return!1},Object.defineProperty(t.prototype,"isDesktop",{get:function(){return this.check(r.ScreenTypes.SCREEN_DESKTOP,r.ScreenTypes.SCREEN_WIDE)},enumerable:!1,configurable:!0}),t.prototype.addResizeListener=function(t){this.optimizeResizeEvent(window),window.addEventListener(this.EVENT_OPTIMIZED_RESIZE,t)},t.prototype.removeResizeListener=function(t){window.removeEventListener(this.EVENT_OPTIMIZED_RESIZE,t)},t.prototype.addChangeScreenTypeListener=function(t){this.optimizeResizeEvent(window),window.addEventListener(this.EVENT_SCREEN_TYPE_CHANGED,t)},t.prototype.removeChangeScreenTypeListener=function(t){window.removeEventListener(this.EVENT_SCREEN_TYPE_CHANGED,t)},t}();e.default=o},28109:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CatalogProductConstants=void 0,function(t){t.DATA_ATTR_PRIMARY_BUTTON_AS_ICON="data-primary-as-icon"}(e.CatalogProductConstants||(e.CatalogProductConstants={}))},77837:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CatalogProductEvents=void 0,function(t){t.INITED="catalog-products::inited",t.UPDATE_PRIMARY_BUTTONS="catalog-products::update-primary-buttons"}(e.CatalogProductEvents||(e.CatalogProductEvents={}))},65558:(t,e,n)=>{n.r(e),n.d(e,{getConfig:()=>i,setConfig:()=>o});const r="env-config:request",o=t=>{window.getConfigQueue||(window.getConfigQueue=[]),window.getConfigQueue.forEach((e=>e(t))),window.addEventListener(r,(()=>{var e;null===(e=window.getConfigQueue)||void 0===e||e.forEach((e=>e(t)))}))},i=()=>new Promise(((t,e)=>{window.getConfigQueue||(window.getConfigQueue=[]),window.getConfigQueue.push(t),dispatchEvent(new CustomEvent(r))}))}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={},buy_button_processor_1;buy_button_processor_1=__webpack_require__(26005),window.AjaxState.processors.register("buy-button",new buy_button_processor_1.BuyButtonProcessor)})();