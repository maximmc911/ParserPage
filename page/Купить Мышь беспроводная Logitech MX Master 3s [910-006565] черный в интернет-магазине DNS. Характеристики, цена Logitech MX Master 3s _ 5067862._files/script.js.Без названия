!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),(new(i(n(2)).default)).register()},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(3)),a=i(n(4)),u=i(n(5)),o=i(n(6)),l=i(n(16)),s=i(n(17)),c=function(){function e(){this.crypter=new a.default,this.storage=new s.default,this.URL_PREFIX="/menu/",this.WINDOW_KEY="6c756bb5-a250-4ca2-a6b9-2d0f8b9f25a1"}return e.prototype.register=function(){var e=this;if(!0!==window[this.WINDOW_KEY]&&(window[this.WINDOW_KEY]=!0,void 0!==window.fetch&&!1!="Promise"in window)){var t=document.querySelectorAll('script[src*="//analytics.dns"]');if(Array.prototype.slice.call(t).forEach(function(t){-1!==t.src.indexOf(e.URL_PREFIX)&&(e.serverKey=t.dataset.key,e.serverData=t.dataset.value,e.apiDomain=t.src.replace(/^(.*\/\/[^\/]+)\/.*$/,"$1"))}),new o.default(this).init(),this.storage.isAvailable()){var n=this.storage.load();null!==n&&(this.send(n),this.storage.save(null))}}},e.prototype.onException=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=this.apiDomain+this.URL_PREFIX+"/?t="+Date.now()+"."+(new Date).getMilliseconds()+"&e="+encodeURIComponent(JSON.stringify(e.stack)).substring(0,2e3),document.head.appendChild(t)},e.prototype.log=function(e){this.storage.isAvailable()?this.storage.save(e):this.send(e)},e.prototype.send=function(e){var t=new u.default;t.deviceBrowserWidth=l.default.getBrowserWidth(),t.deviceBrowserHeight=l.default.getBrowserHeight(),t.deviceScreenWidth=l.default.getScreenWidth(),t.deviceScreenHeight=l.default.getScreenHeight();var n=new r.default;n.serverKey=this.serverKey,n.serverData=this.serverData,n.browserData=this.crypter.encode(this.serverKey,JSON.stringify(t)),n.loggerData=this.crypter.encode(this.serverKey,JSON.stringify(e)),fetch(this.apiDomain+this.URL_PREFIX,{body:JSON.stringify(n),cache:"no-cache",method:"POST",mode:"cors",redirect:"follow"})},e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){}}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.encode=function(e,t){return t=encodeURIComponent(t),t=btoa(t),t=this.rc4(e,t),t=btoa(t)},e.prototype.rc4=function(e,t){var n,i,r,a,u;for(n=[],a=0;a<256;a++)n[a]=a;for(i=0,a=0;a<256;a++)i=(i+n[a]+e.charCodeAt(a%e.length))%256,r=n[a],n[a]=n[i],n[i]=r;a=0,i=0,u="";for(var o=0;o<t.length;o++)i=(i+n[a=(a+1)%256])%256,r=n[a],n[a]=n[i],n[i]=r,u+=String.fromCharCode(t.charCodeAt(o)^n[(n[a]+n[i])%256]);return u},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){}}();t.default=i},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(7)),a=i(n(8)),u=i(n(9)),o=i(n(10)),l=i(n(11)),s=i(n(12)),c=i(n(13)),d=i(n(14)),f=i(n(15)),h=function(){function e(e){this.mouseOutTimeout=null,this.clicked=!1,this.service=e}return e.prototype.init=function(){var e=this;this.reset(),(new a.default).catch(function(t){try{e.bindEvents(t)}catch(t){e.service.onException(t)}})},e.prototype.bindEvents=function(e){var t=this;e.addEventListener("mouseover",function(){clearTimeout(t.mouseOutTimeout),null===t.data.time_hover&&(t.data.time_hover=d.default.YmdHis(new Date))}),e.addEventListener("mouseout",function(){clearTimeout(t.mouseOutTimeout),t.mouseOutTimeout=setTimeout(function(){t.reset()},500)}),e.addEventListener("click",function(e){clearTimeout(t.mouseOutTimeout),t.onClick(e)}),Array.prototype.slice.call(e.querySelectorAll(".menu-desktop__root")).forEach(function(e){e.addEventListener("mouseover",function(){clearTimeout(t.mouseOutTimeout),t.onLevel1MouseOver(e)})})},e.prototype.reset=function(){this.data=new r.default,this.data.url=document.location.href},e.prototype.onLevel1MouseOver=function(e){var t=e.querySelector(".menu-desktop__root-title"),n=this.getCategoryDataByMenuItem(t);null!==n&&(null!==this.data.level1&&n.uid===this.data.level1.uid||(this.data.level1=new u.default,this.data.level1.time=d.default.YmdHis(new Date),this.data.level1.uid=n.uid,this.data.level1.label=n.label))},e.prototype.onClick=function(e){if(!this.clicked&&"Уцененные товары"!==e.target.innerHTML.trim()&&(this.data.time_click=d.default.YmdHis(new Date),this.data.level1sub=null,this.data.level2=null,this.data.level3=null,this.data.level4=null,this.data.clicked=e.target.innerHTML,"a"===e.target.tagName||null!==e.target.closest("a"))){var t,n;if(this.data.float=null!==e.target.closest(".menu-desktop-wrap__sub"),null!==(t=e.target.classList.contains("menu-desktop__popup-link")?e.target:e.target.closest(".menu-desktop__popup-link"))){var i=this.getCategoryDataByMenuItem(t);this.data.level4=new l.default,this.data.level4.uid=i.uid,this.data.level4.label=i.label,this.data.level4.virtual=i.virtual}if(null!==(n=e.target.classList.contains("menu-desktop__second-level")?e.target:e.target.closest(".menu-desktop__second-level"))){var r=this.getCategoryDataByMenuItem(n);this.data.level3=new o.default,this.data.level3.uid=r.uid,this.data.level3.label=r.label,this.data.level3.virtual=r.virtual}var a=null;if(e.target.classList.contains("menu-desktop__first-level"))a=e.target;else{var u=e.target.closest(".menu-desktop__second-level-wrap");null!==u&&(a=u.previousElementSibling)}if(null!==a){var c=this.getCategoryDataByMenuItem(a);this.data.level2=new s.default,this.data.level2.uid=c.uid,this.data.level2.label=c.label}if(null!==this.data.level2)this.clicked=!0,this.service.log(this.data);else{var h=e.target;if(h.classList.contains("menu-desktop__root-subtitle")){var v=this.getCategoryDataByMenuItem(h);this.data.level1sub=new f.default,this.data.level1sub.uid=v.uid,this.data.level1sub.label=v.label,this.clicked=!0,this.service.log(this.data)}else h.classList.contains("menu-desktop__root-title")&&(this.clicked=!0,this.service.log(this.data))}}},e.prototype.getCategoryDataByMenuItem=function(e){var t,n=new c.default;null===n.uid&&(null!==(t=(e.href+"/").match(/virtual_category_uid=([a-f0-9]{16})/))&&(n.uid=t[1],n.virtual=!0));null===n.uid&&(null!==(t=(e.href+"/").match(/catalog\/recipe\/([a-f0-9]{16})\//))&&(n.uid=t[1],n.virtual=!0));null===n.uid&&(null!==(t=(e.href+"/").match(/catalog\/([a-f0-9]{16})\//))&&(n.uid=t[1],n.virtual=!1));return null===n.uid?null:(n.label=e.innerHTML.replace(/<[^>]+>.+<\/[^>]+>/gm,"").trim(),n)},e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){this.version="1",this.time_hover=null,this.time_click=null,this.level1=null,this.level1sub=null,this.level2=null,this.level3=null,this.level4=null}}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.intervalHandle=null,this.timeLeft=0}return e.prototype.catch=function(e){this.callback=e,this.fetch(),this.timer(5e3)},e.prototype.fetch=function(){var e=this,t=window.fetch;void 0!==t&&!1!="Promise"in window&&(window.fetch=function(n,i){return t(n,i).then(function(t){return"/ajax-state/catalog-menu/"===n&&e.timer(3e3),t})})},e.prototype.timer=function(e){var t=this;0<=this.timeLeft?this.timeLeft=e:this.timeLeft<e&&(this.timeLeft=e);this.intervalHandle=setInterval(function(){t.check(),t.timeLeft-=500,t.timeLeft<=0&&clearInterval(t.intervalHandle)},500)},e.prototype.check=function(){var e=this;Array.prototype.slice.call(document.querySelectorAll(".menu-desktop__root")).forEach(function(t){var n=t.parentNode,i="c9625552be194e2db34887af34a6f217";i!==n.dataset[i]&&(n.dataset[i]=i,e.callback(n))})},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){}}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){}}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){}}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){}}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){this.uid=null}}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.YmdHis=function(e){return[e.getUTCFullYear(),("0"+(e.getUTCMonth()+1)).slice(-2),("0"+e.getUTCDate()).slice(-2)].join("-")+" "+[("0"+e.getUTCHours()).slice(-2),("0"+e.getUTCMinutes()).slice(-2),("0"+e.getUTCSeconds()).slice(-2)].join(":")+"."+("000"+e.getUTCMilliseconds()).slice(-3)},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){}}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.getBrowserWidth=function(){try{return window.innerWidth||document.documentElement.clientWidth||document.documentElement.getElementsByTagName("body")[0].clientWidth||0}catch(e){}return 0},e.getBrowserHeight=function(){try{return window.innerHeight||document.documentElement.clientHeight||document.documentElement.getElementsByTagName("body")[0].clientHeight||0}catch(e){}return 0},e.getScreenWidth=function(){return screen.width||0},e.getScreenHeight=function(){return screen.height||0},e}();t.default=i},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(18)),a=i(n(19)),u=function(){function e(){this.STORAGE_VERSION=1,this.STORAGE_KEY="dnsMainMenuLog",this.md5=new a.default,this.available=null}return e.prototype.isAvailable=function(){return null===this.available&&(this.available=this.isAvailableInner()),this.available},e.prototype.isAvailableInner=function(){if(!1=="localStorage"in window)return!1;try{if(window.localStorage.setItem(this.STORAGE_KEY+"_","test"),"test"!==window.localStorage.getItem(this.STORAGE_KEY+"_"))return!1;window.localStorage.removeItem(this.STORAGE_KEY+"_")}catch(e){return!1}return!0},e.prototype.save=function(e){if(null!==e){var t=new r.default;t.value=e,t.version=this.STORAGE_VERSION,t.hash=null,t.hash=this.md5.md5(JSON.stringify(t)),window.localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}else window.localStorage.removeItem(this.STORAGE_KEY)},e.prototype.load=function(){var e=window.localStorage.getItem(this.STORAGE_KEY);if(null===e)return null;try{var t=JSON.parse(e);if(this.STORAGE_VERSION!==t.version)return null;var n=t.hash;return t.hash=null,n!==this.md5.md5(JSON.stringify(t))?null:t.value}catch(e){}return null},e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){}}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.md5=function(e){return function(){var e=0;function t(e){return i(n(r(e)))}function n(e){return u(o(a(e),8*e.length))}function i(t){for(var n,i=e?"0123456789ABCDEF":"0123456789abcdef",r="",a=0;a<t.length;a++)n=t.charCodeAt(a),r+=i.charAt(n>>>4&15)+i.charAt(15&n);return r}function r(e){for(var t="",n=-1;++n<e.length;){var i=e.charCodeAt(n),r=n+1<e.length?e.charCodeAt(n+1):0;55296<=i&&i<=56319&&56320<=r&&r<=57343&&(i=65536+((1023&i)<<10)+(1023&r),n++),i<=127?t+=String.fromCharCode(i):i<=2047?t+=String.fromCharCode(192|i>>>6&31,128|63&i):i<=65535?t+=String.fromCharCode(224|i>>>12&15,128|i>>>6&63,128|63&i):i<=2097151&&(t+=String.fromCharCode(240|i>>>18&7,128|i>>>12&63,128|i>>>6&63,128|63&i))}return t}function a(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function u(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function o(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,i=-271733879,r=-1732584194,a=271733878,u=0;u<e.length;u+=16){var o=n,l=i,v=r,m=a;i=f(i=f(i=f(i=f(i=d(i=d(i=d(i=d(i=c(i=c(i=c(i=c(i=s(i=s(i=s(i=s(i,r=s(r,a=s(a,n=s(n,i,r,a,e[u+0],7,-680876936),i,r,e[u+1],12,-389564586),n,i,e[u+2],17,606105819),a,n,e[u+3],22,-1044525330),r=s(r,a=s(a,n=s(n,i,r,a,e[u+4],7,-176418897),i,r,e[u+5],12,1200080426),n,i,e[u+6],17,-1473231341),a,n,e[u+7],22,-45705983),r=s(r,a=s(a,n=s(n,i,r,a,e[u+8],7,1770035416),i,r,e[u+9],12,-1958414417),n,i,e[u+10],17,-42063),a,n,e[u+11],22,-1990404162),r=s(r,a=s(a,n=s(n,i,r,a,e[u+12],7,1804603682),i,r,e[u+13],12,-40341101),n,i,e[u+14],17,-1502002290),a,n,e[u+15],22,1236535329),r=c(r,a=c(a,n=c(n,i,r,a,e[u+1],5,-165796510),i,r,e[u+6],9,-1069501632),n,i,e[u+11],14,643717713),a,n,e[u+0],20,-373897302),r=c(r,a=c(a,n=c(n,i,r,a,e[u+5],5,-701558691),i,r,e[u+10],9,38016083),n,i,e[u+15],14,-660478335),a,n,e[u+4],20,-405537848),r=c(r,a=c(a,n=c(n,i,r,a,e[u+9],5,568446438),i,r,e[u+14],9,-1019803690),n,i,e[u+3],14,-187363961),a,n,e[u+8],20,1163531501),r=c(r,a=c(a,n=c(n,i,r,a,e[u+13],5,-1444681467),i,r,e[u+2],9,-51403784),n,i,e[u+7],14,1735328473),a,n,e[u+12],20,-1926607734),r=d(r,a=d(a,n=d(n,i,r,a,e[u+5],4,-378558),i,r,e[u+8],11,-2022574463),n,i,e[u+11],16,1839030562),a,n,e[u+14],23,-35309556),r=d(r,a=d(a,n=d(n,i,r,a,e[u+1],4,-1530992060),i,r,e[u+4],11,1272893353),n,i,e[u+7],16,-155497632),a,n,e[u+10],23,-1094730640),r=d(r,a=d(a,n=d(n,i,r,a,e[u+13],4,681279174),i,r,e[u+0],11,-358537222),n,i,e[u+3],16,-722521979),a,n,e[u+6],23,76029189),r=d(r,a=d(a,n=d(n,i,r,a,e[u+9],4,-640364487),i,r,e[u+12],11,-421815835),n,i,e[u+15],16,530742520),a,n,e[u+2],23,-995338651),r=f(r,a=f(a,n=f(n,i,r,a,e[u+0],6,-198630844),i,r,e[u+7],10,1126891415),n,i,e[u+14],15,-1416354905),a,n,e[u+5],21,-57434055),r=f(r,a=f(a,n=f(n,i,r,a,e[u+12],6,1700485571),i,r,e[u+3],10,-1894986606),n,i,e[u+10],15,-1051523),a,n,e[u+1],21,-2054922799),r=f(r,a=f(a,n=f(n,i,r,a,e[u+8],6,1873313359),i,r,e[u+15],10,-30611744),n,i,e[u+6],15,-1560198380),a,n,e[u+13],21,1309151649),r=f(r,a=f(a,n=f(n,i,r,a,e[u+4],6,-145523070),i,r,e[u+11],10,-1120210379),n,i,e[u+2],15,718787259),a,n,e[u+9],21,-343485551),n=h(n,o),i=h(i,l),r=h(r,v),a=h(a,m)}return Array(n,i,r,a)}function l(e,t,n,i,r,a){return h((u=h(h(t,e),h(i,a)))<<(o=r)|u>>>32-o,n);var u,o}function s(e,t,n,i,r,a,u){return l(t&n|~t&i,e,t,r,a,u)}function c(e,t,n,i,r,a,u){return l(t&i|n&~i,e,t,r,a,u)}function d(e,t,n,i,r,a,u){return l(t^n^i,e,t,r,a,u)}function f(e,t,n,i,r,a,u){return l(n^(t|~i),e,t,r,a,u)}function h(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return t}()(e)},e}();t.default=i}]);